<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>geopm: SSTControl.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">geopm
   &#160;<span id="projectnumber">3.0.1.dev446+g42c7dd9ac</span>
   </div>
   <div id="projectbrief">GEOPM - Global Extensible Open Power Manager</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1323faf5d8ba135ad7b7ee1f96549bd0.html">libgeopmd</a></li><li class="navelem"><a class="el" href="dir_4cfff4ace7b9b40bf92d95c6629a62a1.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SSTControl.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_s_s_t_control_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2015 - 2024, Intel Corporation</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; </div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#ifndef SSTCONTROL_HPP_INCLUDE</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#define SSTCONTROL_HPP_INCLUDE</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_control_8hpp.html">Control.hpp</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacegeopm.html">geopm</a></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;{</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="keyword">class </span>SSTIO;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="classgeopm_1_1_s_s_t_control.html">   19</a></span>&#160;    <span class="keyword">class </span><a class="code" href="classgeopm_1_1_s_s_t_control.html">SSTControl</a> : <span class="keyword">public</span> <a class="code" href="classgeopm_1_1_control.html">geopm::Control</a></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    {</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        <span class="keyword">public</span>:</div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="classgeopm_1_1_s_s_t_control.html#abbf8516abfedcf3ba1e3af0ad35eea65">   22</a></span>&#160;            <span class="keyword">enum</span> <a class="code" href="classgeopm_1_1_s_s_t_control.html#abbf8516abfedcf3ba1e3af0ad35eea65">ControlType</a></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;            {</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="classgeopm_1_1_s_s_t_control.html#abbf8516abfedcf3ba1e3af0ad35eea65a42c8a076326c782040d49fc41c63809a">   24</a></span>&#160;                <a class="code" href="classgeopm_1_1_s_s_t_control.html#abbf8516abfedcf3ba1e3af0ad35eea65a42c8a076326c782040d49fc41c63809a">M_MBOX</a>, <span class="comment">// SST Mailbox interface</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                <a class="code" href="classgeopm_1_1_s_s_t_control.html#abbf8516abfedcf3ba1e3af0ad35eea65a52ede027d758ec4042933a0e9e640194">M_MMIO</a>  <span class="comment">// SST MMIO interface</span></div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="classgeopm_1_1_s_s_t_control.html#abbf8516abfedcf3ba1e3af0ad35eea65a52ede027d758ec4042933a0e9e640194">   26</a></span>&#160;            };</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            <a class="code" href="classgeopm_1_1_s_s_t_control.html#ae62249b92d4d29187c46ffc5e0f9c1ff">SSTControl</a>(std::shared_ptr&lt;SSTIO&gt; sstio, <a class="code" href="classgeopm_1_1_s_s_t_control.html#abbf8516abfedcf3ba1e3af0ad35eea65">ControlType</a> control_type,</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                       <span class="keywordtype">int</span> cpu_idx, uint32_t command, uint32_t subcommand,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                       uint32_t interface_parameter, uint32_t write_value, uint32_t begin_bit,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                       uint32_t <a class="code" href="namespacegeopm.html#abd8151cb4b4164e7051e3a8cc9c33510">end_bit</a>, <span class="keywordtype">double</span> scale, uint32_t rmw_subcommand,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                       uint32_t rmw_interface_parameter, uint32_t rmw_read_mask);</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="classgeopm_1_1_s_s_t_control.html#a21d688d9371859803b1943c3010f6b08">   55</a></span>&#160;            <span class="keyword">virtual</span> <a class="code" href="classgeopm_1_1_s_s_t_control.html#a21d688d9371859803b1943c3010f6b08">~SSTControl</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            <span class="keywordtype">void</span> <a class="code" href="classgeopm_1_1_s_s_t_control.html#aaf80f9d565d0007331f626997997593b">setup_batch</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            <span class="keywordtype">void</span> <a class="code" href="classgeopm_1_1_s_s_t_control.html#a609ebca86119a1349df8a9379a7cd6d2">adjust</a>(<span class="keywordtype">double</span> <a class="code" href="namespacegeopm.html#a43dcaa7f9e40b7463fd5f49967006559">value</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <span class="keywordtype">void</span> <a class="code" href="classgeopm_1_1_s_s_t_control.html#a61ba0b24125e5b6b353a58a4224478a7">write</a>(<span class="keywordtype">double</span> <a class="code" href="namespacegeopm.html#a43dcaa7f9e40b7463fd5f49967006559">value</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <span class="keywordtype">void</span> <a class="code" href="classgeopm_1_1_s_s_t_control.html#a040158bc9ced86175cfa9be3b9fdd9f8">save</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <span class="keywordtype">void</span> <a class="code" href="classgeopm_1_1_s_s_t_control.html#aaf3ccf0d755f09553df194e4436fe4c6">restore</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <span class="keywordtype">void</span> <a class="code" href="classgeopm_1_1_s_s_t_control.html#acb94330147bf1cae184c0c97b4389122">set_write_dependency</a>(uint64_t trigger_value, std::weak_ptr&lt;geopm::Control&gt; dependency, uint64_t dependency_write_value);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <span class="keyword">private</span>:</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                std::shared_ptr&lt;SSTIO&gt; m_sstio;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                <span class="keyword">const</span> <a class="code" href="classgeopm_1_1_s_s_t_control.html#abbf8516abfedcf3ba1e3af0ad35eea65">ControlType</a> m_control_type;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> m_cpu_idx;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <span class="keyword">const</span> uint32_t m_command;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                <span class="keyword">const</span> uint32_t m_subcommand;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                <span class="keyword">const</span> uint32_t m_interface_parameter;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <span class="keyword">const</span> uint32_t m_write_value;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                <span class="keywordtype">int</span> m_adjust_idx;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> m_shift;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> m_num_bit;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                <span class="keyword">const</span> uint64_t m_mask;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                <span class="keyword">const</span> uint32_t m_rmw_subcommand;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <span class="keyword">const</span> uint32_t m_rmw_interface_parameter;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <span class="keyword">const</span> uint32_t m_rmw_read_mask;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">double</span> m_multiplier;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                uint32_t m_saved_value;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                uint64_t m_trigger_write_value;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                std::weak_ptr&lt;geopm::Control&gt; m_dependency;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                uint64_t m_dependency_write_value;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    };</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="a_control_8hpp_html"><div class="ttname"><a href="_control_8hpp.html">Control.hpp</a></div></div>
<div class="ttc" id="aclassgeopm_1_1_control_html"><div class="ttname"><a href="classgeopm_1_1_control.html">geopm::Control</a></div><div class="ttdef"><b>Definition:</b> Control.hpp:16</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html">geopm::SSTControl</a></div><div class="ttdef"><b>Definition:</b> SSTControl.hpp:20</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html_a040158bc9ced86175cfa9be3b9fdd9f8"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html#a040158bc9ced86175cfa9be3b9fdd9f8">geopm::SSTControl::save</a></div><div class="ttdeci">void save(void) override</div><div class="ttdoc">Store the current setting of the control for use by a future call to restore().</div><div class="ttdef"><b>Definition:</b> SSTControl.cpp:81</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html_a21d688d9371859803b1943c3010f6b08"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html#a21d688d9371859803b1943c3010f6b08">geopm::SSTControl::~SSTControl</a></div><div class="ttdeci">virtual ~SSTControl()=default</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html_a609ebca86119a1349df8a9379a7cd6d2"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html#a609ebca86119a1349df8a9379a7cd6d2">geopm::SSTControl::adjust</a></div><div class="ttdeci">void adjust(double value) override</div><div class="ttdoc">Store values to be written by the owner's write_batch step.</div><div class="ttdef"><b>Definition:</b> SSTControl.cpp:55</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html_a61ba0b24125e5b6b353a58a4224478a7"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html#a61ba0b24125e5b6b353a58a4224478a7">geopm::SSTControl::write</a></div><div class="ttdeci">void write(double value) override</div><div class="ttdoc">Write the value of the control without affecting any pushed batch controls.</div><div class="ttdef"><b>Definition:</b> SSTControl.cpp:62</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html_aaf3ccf0d755f09553df194e4436fe4c6"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html#aaf3ccf0d755f09553df194e4436fe4c6">geopm::SSTControl::restore</a></div><div class="ttdeci">void restore(void) override</div><div class="ttdoc">Restore the setting stored by save().</div><div class="ttdef"><b>Definition:</b> SSTControl.cpp:99</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html_aaf80f9d565d0007331f626997997593b"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html#aaf80f9d565d0007331f626997997593b">geopm::SSTControl::setup_batch</a></div><div class="ttdeci">void setup_batch(void) override</div><div class="ttdoc">Prepare the control for being written through side effects by the owner's write_batch step....</div><div class="ttdef"><b>Definition:</b> SSTControl.cpp:42</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html_abbf8516abfedcf3ba1e3af0ad35eea65"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html#abbf8516abfedcf3ba1e3af0ad35eea65">geopm::SSTControl::ControlType</a></div><div class="ttdeci">ControlType</div><div class="ttdef"><b>Definition:</b> SSTControl.hpp:23</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html_abbf8516abfedcf3ba1e3af0ad35eea65a42c8a076326c782040d49fc41c63809a"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html#abbf8516abfedcf3ba1e3af0ad35eea65a42c8a076326c782040d49fc41c63809a">geopm::SSTControl::M_MBOX</a></div><div class="ttdeci">@ M_MBOX</div><div class="ttdef"><b>Definition:</b> SSTControl.hpp:24</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html_abbf8516abfedcf3ba1e3af0ad35eea65a52ede027d758ec4042933a0e9e640194"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html#abbf8516abfedcf3ba1e3af0ad35eea65a52ede027d758ec4042933a0e9e640194">geopm::SSTControl::M_MMIO</a></div><div class="ttdeci">@ M_MMIO</div><div class="ttdef"><b>Definition:</b> SSTControl.hpp:25</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html_acb94330147bf1cae184c0c97b4389122"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html#acb94330147bf1cae184c0c97b4389122">geopm::SSTControl::set_write_dependency</a></div><div class="ttdeci">void set_write_dependency(uint64_t trigger_value, std::weak_ptr&lt; geopm::Control &gt; dependency, uint64_t dependency_write_value)</div><div class="ttdef"><b>Definition:</b> SSTControl.cpp:118</div></div>
<div class="ttc" id="aclassgeopm_1_1_s_s_t_control_html_ae62249b92d4d29187c46ffc5e0f9c1ff"><div class="ttname"><a href="classgeopm_1_1_s_s_t_control.html#ae62249b92d4d29187c46ffc5e0f9c1ff">geopm::SSTControl::SSTControl</a></div><div class="ttdeci">SSTControl(std::shared_ptr&lt; SSTIO &gt; sstio, ControlType control_type, int cpu_idx, uint32_t command, uint32_t subcommand, uint32_t interface_parameter, uint32_t write_value, uint32_t begin_bit, uint32_t end_bit, double scale, uint32_t rmw_subcommand, uint32_t rmw_interface_parameter, uint32_t rmw_read_mask)</div><div class="ttdoc">Create an SSTIO Control.</div><div class="ttdef"><b>Definition:</b> SSTControl.cpp:13</div></div>
<div class="ttc" id="anamespacegeopm_html"><div class="ttname"><a href="namespacegeopm.html">geopm</a></div><div class="ttdef"><b>Definition:</b> Agg.cpp:21</div></div>
<div class="ttc" id="anamespacegeopm_html_a43dcaa7f9e40b7463fd5f49967006559"><div class="ttname"><a href="namespacegeopm.html#a43dcaa7f9e40b7463fd5f49967006559">geopm::value</a></div><div class="ttdeci">UMASK it aggregates as the count of all such bits that have been it aggregates as the count of all such bits that have been count rising edges of the event signal instead of counting all instances where the event is observed When reading at a higher level domain than its native it aggregates as the count of all such bits that have been the processor s PMi pins are only event counter overflows toggle the PMi pins When reading at a higher level domain than its native it aggregates as the count of all such bits that have been generate an interrupt when the counter overflows When reading at a higher level domain than its native it aggregates as the count of all such bits that have been increment event counts when the event occurs on any hardware thread from the configured thread s core only increment event counts when the configured thread triggers the event When reading at a higher level domain than its native it aggregates as the count of all such bits that have been it aggregates as the count of all such bits that have been increment the event count when the number of occurrences is less than the configured instead of the default behavior of counting when the number of occurrences is greater than or equal to the cutoff When reading at a higher level domain than its native it aggregates as the count of all such bits that have been all events are counted When non a single event is counted when the number of event occurrences is greater or equal to the set CMASK value</div><div class="ttdef"><b>Definition:</b> msr_data_arch.cpp:618</div></div>
<div class="ttc" id="anamespacegeopm_html_abd8151cb4b4164e7051e3a8cc9c33510"><div class="ttname"><a href="namespacegeopm.html#abd8151cb4b4164e7051e3a8cc9c33510">geopm::end_bit</a></div><div class="ttdeci">UMASK end_bit</div><div class="ttdef"><b>Definition:</b> msr_data_arch.cpp:513</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
