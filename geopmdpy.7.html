<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>geopmdpy(7) -- global extensible open power manager python daemon package &mdash; GEOPM  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="geopmpy(7) -- global extensible open power manager python package" href="geopmpy.7.html" />
    <link rel="prev" title="geopmwrite(1) -- modify platform state" href="geopmwrite.1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> GEOPM
            <img src="https://geopm.github.io/images/geopm-logo-clear.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="service.html">Guide for Service Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">Guide for HPC Runtime Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="contrib.html">Guide for Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="devel.html">Guide for GEOPM Developers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="reference.html">Reference Manual</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="reference.html#geopm-manual-pages">GEOPM Manual Pages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="geopm.7.html">geopm(7) -- Global Extensible Open Power Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio.7.html">geopm_pio(7) -- GEOPM PlatformIO interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_cnl.7.html">geopm_pio_cnl(7) -- Signals and controls for Compute Node Linux Board-Level Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_cpuinfo.7.html">geopm_pio_cpuinfo(7) -- Signals and controls for the CPUInfoIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_dcgm.7.html">geopm_pio_dcgm(7) -- IOGroup providing signals and controls for NVIDIA GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_levelzero.7.html">geopm_pio_levelzero(7) -- IOGroup providing signals and controls for Intel GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_msr.7.html">geopm_pio_msr(7) -- Signals and controls for Model Specific Registers (MSRs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_nvml.7.html">geopm_pio_nvml(7) -- IOGroup providing signals and controls for NVIDIA GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_profile.7.html">geopm_pio_profile(7) -- Signals and controls for the ProfileIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_service.7.html">geopm_pio_service(7) -- Signals and controls for the ServiceIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_sst.7.html">geopm_pio_sst(7) -- Signals and controls for Intel Speed Select Technology</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_time.7.html">geopm_pio_time(7) -- Signals and controls for Time IO Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmaccess.1.html">geopmaccess(1) -- Access management for the GEOPM Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmadmin.1.html">geopmadmin(1) -- tool for GEOPM system administrators</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmagent.1.html">geopmagent(1) -- query agent information and create static policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmbench.1.html">geopmbench(1) -- synthetic benchmark application</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmctl.1.html">geopmctl(1) -- GEOPM runtime control application</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmendpoint.1.html">geopmendpoint(1) -- command line tool for dynamic policy control</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmlaunch.1.html">geopmlaunch(1) -- application launch wrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmread.1.html">geopmread(1) -- query platform information</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmsession.1.html">geopmsession(1) -- Command line interface for the GEOPM service batch read features</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmwrite.1.html">geopmwrite(1) -- modify platform state</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">geopmdpy(7) -- global extensible open power manager python daemon package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-geopmdpy.access">geopmdpy.access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-geopmdpy.dbus_xml">geopmdpy.dbus_xml</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-geopmdpy.error">geopmdpy.error</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-geopmdpy.pio">geopmdpy.pio</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-geopmdpy.runtime">geopmdpy.runtime</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-geopmdpy.schemas">geopmdpy.schemas</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-geopmdpy.service">geopmdpy.service</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-geopmdpy.session">geopmdpy.session</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-geopmdpy.system_files">geopmdpy.system_files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-geopmdpy.topo">geopmdpy.topo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-geopmdpy.version">geopmdpy.version</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="geopmpy.7.html">geopmpy(7) -- global extensible open power manager python package</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent.3.html">geopm_agent(3) -- query information about available agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_ctl.3.html">geopm_ctl(3) -- GEOPM runtime control thread</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_daemon.3.html">geopm_daemon(3) -- helpers for GEOPM daemons</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_endpoint.3.html">geopm_endpoint(3) -- dynamic policy control for resource management</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_error.3.html">geopm_error(3) -- error code descriptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_field.3.html">geopm_agent(3) -- query information about available agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_fortran.3.html">geopm_fortran(3) -- GEOPM fortran interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_hash.3.html">geopm_hash(3) -- helper methods for encoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_imbalancer.3.html">geopm_imbalancer(3) -- set artificial runtime imbalance</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio.3.html">geopm_pio(3) -- interfaces to query and modify platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_policystore.3.html">geopm_policystore(3) -- GEOPM resource policy store interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_prof.3.html">geopm_prof(3) -- application profiling interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_sched.3.html">geopm_sched(3) -- interface with Linux scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_time.3.html">geopm_time(3) -- helper methods for time</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_topo.3.html">geopm_topo(3) -- query platform component topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_version.3.html">geopm_version(3) -- GEOPM library version</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_Agent.3.html">geopm::Agent(3) -- GEOPM agent plugin interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_Agg.3.html">geopm::Agg(3) -- data aggregation functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_CNLIOGroup.3.html">geopm::CNLIOGroup(3) -- IOGroup for interaction with Compute Node Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_CircularBuffer.3.html">geopm::CircularBuffer(3) -- generic circular buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_Comm.3.html">geopm::Comm(3) -- communication abstractions</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_CpuinfoIOGroup.3.html">geopm::CpuinfoIOGroup(3) -- IOGroup for CPU frequency limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_Daemon.3.html">geopm::Daemon(3) -- GEOPM daemon helper methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_Endpoint.3.html">geopm::Endpoint(3) -- GEOPM endpoint interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_Exception.3.html">geopm::Exception(3) -- custom GEOPM exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_Helper.3.html">geopm::Helper -- common helper methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_IOGroup.3.html">geopm::IOGroup(3) -- provides system values and settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_MPIComm.3.html">geopm::MPIComm(3) -- implementation of Comm using MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_MSRIO.3.html">geopm::MSRIO(3) -- methods for reading and writing MSRs</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_MSRIOGroup.3.html">geopm::MSRIOGroup -- IOGroup providing MSR-based signals and controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_MonitorAgent.3.html">geopm::MonitorAgent -- agent that enforces no policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_PlatformIO.3.html">geopm::PlatformIO(3) -- GEOPM platform interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_PlatformTopo.3.html">geopm::PlatformTopo(3) -- platform topology information</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_PluginFactory.3.html">geopm::PluginFactory(3) -- abstract factory for plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_PowerBalancer.3.html">geopm::PowerBalancer(3) -- balances power according to epoch runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_PowerBalancerAgent.3.html">geopm::PowerBalancerAgent(3) -- agent optimizing performance under a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_PowerGovernor.3.html">geopm::PowerGovernor(3) -- enforces a power limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_PowerGovernorAgent.3.html">geopm::PowerGovernorAgent(3) -- agent that enforces a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_ProfileIOGroup.3.html">geopm::ProfileIOGroup(3) -- IOGroup providing application signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_SampleAggregator.3.html">geopm::SampleAggregator(3) -- per-region aggregated signal data</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_SharedMemory.3.html">geopm::SharedMemory(3) -- abstractions for shared memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="GEOPM_CXX_MAN_TimeIOGroup.3.html">geopm::TimeIOGroup(3) -- IOGroup providing time signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_report.7.html">geopm_report(7) -- GEOPM summary report file</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_frequency_map.7.html">geopm_agent_frequency_map(7) -- agent for running regions at user selected frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_monitor.7.html">geopm_agent_monitor(7) -- agent implementation for aggregating statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_power_balancer.7.html">geopm_agent_power_balancer(7) -- agent optimizes performance under a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_power_governor.7.html">geopm_agent_power_governor(7) -- agent enforces a power cap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#doxygen-pages">Doxygen Pages</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GEOPM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="reference.html">Reference Manual</a> &raquo;</li>
      <li>geopmdpy(7) -- global extensible open power manager python daemon package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/geopmdpy.7.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="geopmdpy-7-global-extensible-open-power-manager-python-daemon-package">
<h1>geopmdpy(7) -- global extensible open power manager python daemon package<a class="headerlink" href="#geopmdpy-7-global-extensible-open-power-manager-python-daemon-package" title="Permalink to this heading"></a></h1>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this heading"></a></h2>
<p>This document describes the Python APIs provided by the geopmdpy package.</p>
</section>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this heading"></a></h2>
</section>
<section id="module-geopmdpy.access">
<span id="geopmdpy-access"></span><h2>geopmdpy.access<a class="headerlink" href="#module-geopmdpy.access" title="Permalink to this heading"></a></h2>
<p>Implementation for the geopmaccess command line tool.</p>
<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.access.Access">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.access.</span></span><span class="sig-name descname"><span class="pre">Access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geopm_proxy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Extension to the GEOPM D-Bus proxy to support the geopmaccess
command line interface.</p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.access.Access.edited_names">
<span class="sig-name descname"><span class="pre">edited_names</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_control</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access.edited_names" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.access.Access.get_all_controls">
<span class="sig-name descname"><span class="pre">get_all_controls</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access.get_all_controls" title="Permalink to this definition"></a></dt>
<dd><p>Call GEOPM D-Bus API and return all supported control names</p>
<p>Returns a human readable list of all controls available on the
system.  The returned string has one control name on each
line, and is in sorted order.  The PlatformGetAllAccess D-Bus API
of the io.github.geopm interface is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>All available controls, one on each line, in sorted order</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.access.Access.get_all_signals">
<span class="sig-name descname"><span class="pre">get_all_signals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access.get_all_signals" title="Permalink to this definition"></a></dt>
<dd><p>Call GEOPM D-Bus API and return all supported signal names</p>
<p>Returns a human readable list of all signals available on the
platform.  The returned string has one signal name on each
line, and is in sorted order.  The PlatformGetAllAccess D-Bus API
of the io.github.geopm interface is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>All available signals, one on each line, in sorted order</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.access.Access.get_group_controls">
<span class="sig-name descname"><span class="pre">get_group_controls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access.get_group_controls" title="Permalink to this definition"></a></dt>
<dd><p>Call GEOPM D-Bus API and return the group's control access list</p>
<p>Returns a human readable list of the controls that are
enabled.  The returned string has one control name on each
line, and is in sorted order.</p>
<p>The default control access list is returned if the group
provided is the empty string.  If the group provided is not
empty then the list of controls that are enabled for the
specified Unix group is returned.</p>
<p>A user process accessing the GEOPM D-Bus APIs is restricted to
the combination of the default access list and the access list
for all groups that the user belongs to.  The results from
querying a specific Unix group with this method do not reflect
the default access list that is enabled for all users.</p>
<p>The PlatformGetGroupAccess D-Bus API of the io.github.geopm
interface is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Unix group name to get access list for.  Gets
the default control access list if group
provided is '': the empty string.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Access list of controls, one on each line, in sorted order.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.access.Access.get_group_signals">
<span class="sig-name descname"><span class="pre">get_group_signals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access.get_group_signals" title="Permalink to this definition"></a></dt>
<dd><p>Call GEOPM D-Bus API and return the group's signal access list</p>
<p>Returns a human readable list of the signals that are enabled.
The returned string has one signal name on each line, and is in sorted order.</p>
<p>The default signal access list is returned if the group
provided is the empty string.  If the group provided is not
empty then the list of signals that are enabled for the
specified Unix group is returned.</p>
<p>A user process accessing the GEOPM D-Bus APIs is restricted to
the combination of the default access list and the access list
for all groups that the user belongs to.  The results from
querying a specific Unix group with this method do not reflect
the default access list that is enabled for all users.</p>
<p>The Platforms D-Bus API of the io.github.geopm
interface is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Unix group name to get access list for.  Gets
the default signal access list if group
provided is '': the empty string.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Access list of signals, one on each line, in sorted order.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.access.Access.get_user_controls">
<span class="sig-name descname"><span class="pre">get_user_controls</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access.get_user_controls" title="Permalink to this definition"></a></dt>
<dd><p>Call GEOPM D-Bus API and return user allowed control names</p>
<p>Returns a human readable list of user allowed controls on the
platform.  The returned string has one control name on each
line, and is in sorted order.  The PlatformGetAllAccess D-Bus API
of the io.github.geopm interface is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>User allowed controls, one on each line, in sorted order</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.access.Access.get_user_signals">
<span class="sig-name descname"><span class="pre">get_user_signals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access.get_user_signals" title="Permalink to this definition"></a></dt>
<dd><p>Call GEOPM D-Bus API and return user allowed signal names</p>
<p>Returns a human readable list of user allowed signal names on
the platform.  The returned string has one signal name on each
line, and is in sorted order.  The PlatformGetAllAccess D-Bus API
of the io.github.geopm interface is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>User allowed signals, one on each line, in sorted order</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.access.Access.read_names">
<span class="sig-name descname"><span class="pre">read_names</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access.read_names" title="Permalink to this definition"></a></dt>
<dd><p>Returns list names from user</p>
<p>Parse list of signals or controls from standard input or edit
existing list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.access.Access.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_write</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_all</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_control</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_default</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_delete</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_dry_run</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_force</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_edit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access.run" title="Permalink to this definition"></a></dt>
<dd><p>Execute geopmaccess command line interface</p>
<p>The inputs to this method are parsed from the command line
interface of geopmaccess.  All of the features of the
geopmaccess tool are implemented with this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>is_write</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) -- True if user requested to write to the
access lists, False if it is a read
operation.</p></li>
<li><p><strong>is_all</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) -- True if the user requested that all
available signals or controls be printed as
opposed to one of the access lists.</p></li>
<li><p><strong>is_control</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) -- True if the user requested to read or
write the control access lists.</p></li>
<li><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- If is_all is not specified, the group
determines which access list will be read or
written.  If the group is the empty string
then the default access list is used,
otherwise the parameter specifies the Unix
group.</p></li>
<li><p><strong>is_default</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) -- True if the default user access list
should be printed rather than the calling
process' access list.</p></li>
<li><p><strong>is_delete</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) -- True to remove an access list file.</p></li>
<li><p><strong>is_dry_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) -- True to run error checking without file
modification</p></li>
<li><p><strong>is_force</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) -- True if error checking is disabled</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.access.Access.set_group_controls">
<span class="sig-name descname"><span class="pre">set_group_controls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_dry_run</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_force</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access.set_group_controls" title="Permalink to this definition"></a></dt>
<dd><p>Call GEOPM D-Bus API to set control access</p>
<p>Sets the control access list for a group while leaving the
signal access list unchanged.  The user must be 'root' to
perform this operation.  The PlatformGetGroupAccess D-Bus API
of the io.github.geopm interface is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Unix group name to set access list for.  The
call sets the default control access list if
group provided is ''.</p></li>
<li><p><strong>controls</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- List of all control names that are
allowed for the group or for the
defaults.</p></li>
<li><p><strong>is_dry_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) -- True to run error checking without file
modification</p></li>
<li><p><strong>is_force</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) -- True if error checking is disabled</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- The user is not root, the group provided is
    invalid, or any of the provided control names are
    not supported.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.access.Access.set_group_signals">
<span class="sig-name descname"><span class="pre">set_group_signals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_dry_run</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_force</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.Access.set_group_signals" title="Permalink to this definition"></a></dt>
<dd><p>Call GEOPM D-Bus API to set signal access</p>
<p>Sets the signal access list for a group while leaving the
control access list unchanged.  The user must be 'root' to
perform this operation.  The PlatformGetGroupAccess D-Bus API
of the io.github.geopm interface is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Unix group name to set access list for.  The
call sets the default signal access list if
group provided is ''.</p></li>
<li><p><strong>signals</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- List of all signal names that are
allowed for the group or for the
defaults.</p></li>
<li><p><strong>is_dry_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) -- True to run error checking without file
modification</p></li>
<li><p><strong>is_force</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) -- True if error checking is disabled</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- The user is not root, the group provided is
    invalid, or any of the provided signal names
    are not supported.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.access.main">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.access.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.access.main" title="Permalink to this definition"></a></dt>
<dd><p>Access management for the GEOPM Service.</p>
<p>Command line tool for reading and writing the access management
lists for the GEOPM Service signals and controls.</p>
</dd></dl>

</section>
<section id="module-geopmdpy.dbus_xml">
<span id="geopmdpy-dbus-xml"></span><h2>geopmdpy.dbus_xml<a class="headerlink" href="#module-geopmdpy.dbus_xml" title="Permalink to this heading"></a></h2>
<p>The GEOPM DBus API enables a client to make measurements from the
hardware platform and set hardware control parameters.  Fine grained
permissions management for both measurements (signals) and controls is
configurable by system administrators.</p>
<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.dbus_xml.geopm_dbus_xml">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.dbus_xml.</span></span><span class="sig-name descname"><span class="pre">geopm_dbus_xml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">TopoService</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">PlatformService</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.dbus_xml.geopm_dbus_xml" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-geopmdpy.error">
<span id="geopmdpy-error"></span><h2>geopmdpy.error<a class="headerlink" href="#module-geopmdpy.error" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.error.message">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.error.</span></span><span class="sig-name descname"><span class="pre">message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">err_number</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.error.message" title="Permalink to this definition"></a></dt>
<dd><p>Return the error message associated with the error code.  Positive
error codes are interpreted as system error numbers, and
negative error codes are interpreted as GEOPM error numbers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>err_number</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Error code to be interpreted.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Error message associated with error code.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-geopmdpy.pio">
<span id="geopmdpy-pio"></span><h2>geopmdpy.pio<a class="headerlink" href="#module-geopmdpy.pio" title="Permalink to this heading"></a></h2>
<p>The pio module provides python bindings for the geopm_pio(3) C
interfaces.  This interface provides an abstraction for reading
signals and writing controls from system components.</p>
<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.adjust">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">adjust</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setting</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.adjust" title="Permalink to this definition"></a></dt>
<dd><p>Updates the cached value of a single control.</p>
<p>The particular control that is modified is determined by the
control index provided.  The control index is the value that was
returned when push_control() was called.  The value for this
control is updated so that the next call to write_batch() will
write the setting to the platform.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>control_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Index returned by a previous call to the
push_control() function.</p></li>
<li><p><strong>setting</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- Value for control to be set on next call to
write_batch().</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.control_description">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">control_description</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.control_description" title="Permalink to this definition"></a></dt>
<dd><p>Get a description of a control.</p>
<p>A description should include the units of the control along with
other descriptive text.  An exception is raised if any error
occurs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>control_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of control.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Control description string.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.control_domain_type">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">control_domain_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.control_domain_type" title="Permalink to this definition"></a></dt>
<dd><p>Get the domain type that is native for a control.</p>
<p>Controls cannot be set at a finer granularity than the native
domain, and such requests will result in a raised exception.  When
a request is made to write a control at a courser domain than the
native domain, the same control value will be set for all
sub-domains of the requested domain.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>control_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- name of control to query</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>One of the geopmdpy.topo.DOMAIN_* integers corresponding</dt><dd><p>to a domain type.  This can be converted into a domain
name with the geopmdpy.topo.domain_name() function.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.control_names">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">control_names</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.control_names" title="Permalink to this definition"></a></dt>
<dd><p>Get all available controls.</p>
<p>A user can choose from any of the control names returned to
pass as a parameter to other pio module functions that take a
control_name as input.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>All available control names in sorted order.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.format_signal">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">format_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.format_signal" title="Permalink to this definition"></a></dt>
<dd><p>Convert a signal into a string representation</p>
<p>All signals have a format enum that describes how to format a
value that was read.  This format enum can be queried with the
signal_info() function and passed as the format type parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- The value of a signal that was read.</p></li>
<li><p><strong>format_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- The geopm::string_format_e enum value
defined in Helper.hpp that describes how to
format the value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>String representation of the signal value.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Unable to format the value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.push_control">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">push_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.push_control" title="Permalink to this definition"></a></dt>
<dd><p>Push a control onto the stack of batch access controls.</p>
<p>The return value is an index that can be passed to the adjust()
function which will update the internal state used to store batch
controls.  Subsequent calls to the write_batch() function access
the control values in the internal state and write the values to
the hardware.  A distinct control index will be returned for each
unique combination of input parameters.  All controls must be
pushed onto the stack prior to the first call to the adjust() or
read_batch() functions.  After calls to adjust() or
read_batch() have been made, controls may be pushed again only
after calling reset() and before calling adjust() or
read_batch() again.  Attempts to push a control onto the stack
after the first call to adjust() or read_batch() (and without
calling reset()) or attempts to push a control_name that is not
a value provided by the control_names() function will result in a
raised exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>control_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of the control to be written.</p></li>
<li><p><strong>domain_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- One of the domain types provided
by the geopmdpy.topo module or the name associated
with a domain type (e.g. 'cpu' or 'board').</p></li>
<li><p><strong>domain_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Index of domain to write to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Control index that can be passed to the adjust()
function prior to a call to the write_batch() function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.push_signal">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">push_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.push_signal" title="Permalink to this definition"></a></dt>
<dd><p>Push a signal onto the stack of batch access signals.</p>
<p>Subsequent calls to the read_batch() function will read the signal
and update the internal state used to store batch signals.  The
function returns an index that can be passed to the sample()
function to access the signal value stored in the internal state
from the last update.  A distinct signal index will be returned
for each unique combination of input parameters.  All signals must
be pushed onto the stack prior to the fist call to read_batch()
or adjust().  After calls to read_batch() or adjust() have been
made, signals may be pushed again only after calling reset() and
before caling read_batch() or adjust() again.  Attempts to push a
signal onto the stack after the first call to read_batch() or
read_batch() (and without calling reset()) or attempts to push a
signal_name that is not provided by signal_names() will result in
a raised exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signal_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of the signal to be read.</p></li>
<li><p><strong>domain_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- One of the domain types provided
by the geopmdpy.topo module or the name associated
with a domain type (e.g. 'cpu' or 'board').</p></li>
<li><p><strong>domain_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Index of domain to read from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Signal index that can be passed to the sample() function</dt><dd><p>after the read_batch() function has been called.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.read_batch">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">read_batch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.read_batch" title="Permalink to this definition"></a></dt>
<dd><p>Read all pushed signals from the platform.</p>
<p>The next calls to sample() will reflect the updated data.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.read_signal">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">read_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.read_signal" title="Permalink to this definition"></a></dt>
<dd><p>Read a signal value from platform.</p>
<p>Select a signal by name and read the current value from the
domain type and index specified.  The read signal is returned
as a floating point number in SI units.  The signal name can
be any returned by the signal_names() function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signal_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of the signal to be read.</p></li>
<li><p><strong>domain_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- One of the domain types provided
by the geopmdpy.topo module or the name associated
with a domain type (e.g. 'cpu' or 'board').</p></li>
<li><p><strong>domain_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Index of domain to read from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The value of the signal read in SI units.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.reset">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.reset" title="Permalink to this definition"></a></dt>
<dd><p>Reset the GEOPM platform interface.</p>
<p>Resetting the GEOPM platform interface will cause the internal
PlatformIO instance to be released/deleted and reconstructed.  As
a result, any signals and controls that had been pushed will be
cleared, any batch servers that had been started will be stopped,
and all registered IOGroups will be reset.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.restore_control">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">restore_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.restore_control" title="Permalink to this definition"></a></dt>
<dd><p>Restore the state recorded by the last call to save_control().</p>
<p>All previous changes made through write_control() or write_batch()
are reverted to their previous settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Failure to restore all control values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.restore_control_dir">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">restore_control_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.restore_control_dir" title="Permalink to this definition"></a></dt>
<dd><p>Restore the state recorded to the save directory</p>
<p>The save directory will have been created by the last call to
save_control_dir(save_dir) so that all subsequent changes made
through write_control() or write_batch() are reverted to their
previous settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>save_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Output directory where each IOGroup has
created a save file.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Failure to restore all control values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.sample">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">sample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.sample" title="Permalink to this definition"></a></dt>
<dd><p>Samples cached value of a single signal.</p>
<p>This function returns one of the values that was read in the last
call to read_batch().  The particular signal returned is
determined by the signal index provided.  This signal index is the
value that was returned when push_signal() was called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>signal_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Index returned by a previous call to the
push_signal() function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Value of signal read when read_batch() function was</dt><dd><p>last called.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.save_control">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">save_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.save_control" title="Permalink to this definition"></a></dt>
<dd><p>Save the state of all controls.</p>
<p>Any subsequent changes made through write_control() or
write_batch() will be reverted with a call to restore_control().
The control settings are stored in memory managed by GEOPM.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Failure to save all control values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.save_control_dir">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">save_control_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.save_control_dir" title="Permalink to this definition"></a></dt>
<dd><p>Save the state of all controls to files in the save directory.</p>
<p>Any subsequent changes made through write_control() or
write_batch() will be reverted with a call to
restore_control_dir(save_dir).  The control settings are stored in
files named after each IOGroup that is loaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>save_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Output directory where each IOGroup creates a
save file.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Failure to save all control values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.signal_description">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">signal_description</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.signal_description" title="Permalink to this definition"></a></dt>
<dd><p>Get a description of a signal.</p>
<p>A description should include the units of the signal and the
aggregation function along with other descriptive text.  An
exception is raised if any error occurs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>signal_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of signal.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal description string.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.signal_domain_type">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">signal_domain_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.signal_domain_type" title="Permalink to this definition"></a></dt>
<dd><p>Get the domain type that is native for a signal.</p>
<p>Signals cannot be sampled at a finer granularity than the native
domain, and such requests will result in a raised exception.  When
a request is made to read a signal at a courser domain than the
native domain, the signal will be read at the native granularity
for all sub-domains of the requested domain and the returned result
will be aggregated from the values read.  The result can be
converted into a domain name with the topo.domain_name() function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>signal_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- name of signal to query</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>One of the geopmdpy.topo.DOMAIN_* integers corresponding</dt><dd><p>to a domain type.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.signal_info">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">signal_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.signal_info" title="Permalink to this definition"></a></dt>
<dd><p>Get information about a signal</p>
<p>Query the integer enum values that give information about the
named signal.  There are three integers returned which correspond
to the the aggregation type, the format method, and the behavior
of the signal.</p>
<p>The aggregation type is one of the the geopm::Agg::m_type_e enum
values defined in Agg.hpp.  The format method is one of the
geopm::string_format_e enum values defined in Helper.hpp.  The
behavior is one of the geopm::IOGroup::m_signal_behavior_e enum
values defined in IOGroup.hpp.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>signal_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of the signal to query.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The aggregation type, format type, and</dt><dd><p>behavior type enum values associated
with the signal.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)">tuple</a>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Query of signal name failed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.signal_names">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">signal_names</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.signal_names" title="Permalink to this definition"></a></dt>
<dd><p>Get all available signals.</p>
<p>A user can choose from any of the signal names returned to
pass as a parameter to other pio module functions that take a
signal_name as input.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>All available signal names in sorted order.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.start_batch_server">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">start_batch_server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.start_batch_server" title="Permalink to this definition"></a></dt>
<dd><p>Start a batch server to interface with a client thread</p>
<p>Create a new process to interact with the client thread using the
GEOPM batch server protocol.  The created server will be enabled
to read the configured signals and write the configured controls
based on requests made by the client thread after the server is
running.  Each configuration is a list of tuples that specify the
name of the signal or control, the domain type, and domain index.
This call to start the batch server will block until the server is
up and ready to respond to client requests through the GEOPM batch
server protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID of the thread that will interact
with the batch server.</p></li>
<li><p><strong>signal_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>)</em><em>)</em>) -- List of requested
signals where each tuple represents (signal_name,
domain_type, domain_idx).</p></li>
<li><p><strong>control_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>)</em><em>)</em>) -- List of requested
controlss where each tuple represents (control_name,
domain_type, domain_idx).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The server PID and the string key used by the</dt><dd><p>client thread to initiate the GEOPM batch
server protocol.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)">tuple</a>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Failure to start the batch server.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.stop_batch_server">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">stop_batch_server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.stop_batch_server" title="Permalink to this definition"></a></dt>
<dd><p>Stop a currently running batch server</p>
<p>End a batch server process that was created with a call to
start_batch_server().  This will end the server process, and the
client will not be able to use the GEOPM batch server protocol
unless it starts a new server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>server_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID of the created batch server.  This
is the value of the first element of the
tuple returned by the start_batch_server()
function.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Failure to stop the batch server.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.write_batch">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">write_batch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.write_batch" title="Permalink to this definition"></a></dt>
<dd><p>Write all pushed controls to the platform.</p>
<p>The values provided to previous calls to adjust() are written to
the platform.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.pio.write_control">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.pio.</span></span><span class="sig-name descname"><span class="pre">write_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setting</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.pio.write_control" title="Permalink to this definition"></a></dt>
<dd><p>Write a control value to the platform.</p>
<p>Select a control by name and write a new setting for the
domain type and index specified.  The written control is a
floating point number in SI units.  The control name can be any
returned by the control_names() function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>control_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of the control to be written.</p></li>
<li><p><strong>domain_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- One of the domain types provided
by the geopmdpy.topo module or the name associated
with a domain type (e.g. 'cpu' or 'board').</p></li>
<li><p><strong>domain_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Index of domain to write to.</p></li>
<li><p><strong>setting</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- Value of the control to be written.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-geopmdpy.runtime">
<span id="geopmdpy-runtime"></span><h2>geopmdpy.runtime<a class="headerlink" href="#module-geopmdpy.runtime" title="Permalink to this heading"></a></h2>
<p>Tools to support runtime implementations that use the GEOPM service</p>
<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.runtime.Agent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.runtime.</span></span><span class="sig-name descname"><span class="pre">Agent</span></span><a class="headerlink" href="#geopmdpy.runtime.Agent" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class that documents the interfaces required by an agent</p>
<p>Agent objects are used to initialize a Controller object and
define the control algorithm.</p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Agent.get_controls">
<span class="sig-name descname"><span class="pre">get_controls</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Agent.get_controls" title="Permalink to this definition"></a></dt>
<dd><p>Get list of control requests</p>
<p>The returned controls will be set in the platform by the Controller
based on the return value from Agent.update().</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>List of request tuples. Each</dt><dd><p>request comprises a control name,
domain type, and domain index.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>((<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>))</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Agent.get_period">
<span class="sig-name descname"><span class="pre">get_period</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Agent.get_period" title="Permalink to this definition"></a></dt>
<dd><p>Get the target time interval for the control loop</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Time interval in seconds</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Agent.get_report">
<span class="sig-name descname"><span class="pre">get_report</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Agent.get_report" title="Permalink to this definition"></a></dt>
<dd><p>Summary of all data collected by calls to update()</p>
<p>The report covers the interval of time between the last two calls to
Agent.begin_run() / Agent.end_run().  Until the next call to
Agent.begin_run(), the same report will be returned by this method.
The Controller.run() method will return this report upon completion of
the run.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Human readable report</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Agent.get_signals">
<span class="sig-name descname"><span class="pre">get_signals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Agent.get_signals" title="Permalink to this definition"></a></dt>
<dd><p>Get list of read requests</p>
<p>The returned signals will be sampled from the platform by the
Controller and passed into Agent.update().</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>List of request tuples. Each</dt><dd><p>request comprises a signal name,
domain type, and domain index.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>((<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>))</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Agent.policy_repr">
<span class="sig-name descname"><span class="pre">policy_repr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Agent.policy_repr" title="Permalink to this definition"></a></dt>
<dd><p>Create a string representation of a policy suitable for printing</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Agent.run_begin">
<span class="sig-name descname"><span class="pre">run_begin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Agent.run_begin" title="Permalink to this definition"></a></dt>
<dd><p>Called by Controller at the start of each run</p>
<p>The policy for the run is passed through to the agent from the
Controller.run() input.  For some agents, the policy may always be
None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>policy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) -- The Agent specific policy provided to the
Controller.run() method.</p></li>
<li><p><strong>profile</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Profile name to associate with the report</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Agent.run_end">
<span class="sig-name descname"><span class="pre">run_end</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Agent.run_end" title="Permalink to this definition"></a></dt>
<dd><p>Called by the Controller at the end of each run</p>
<p>The result of calling the get_report() method after run_end() should
reflect the same report until the next call to run_end().  This report
will document the measurements made between the last calls to
run_begin() and run_end().  Each call to run_end() will follow a
previous call to run_begin().  The run_end() method will be called by
the Controller even if the run resulted in an error that raises an
exception.  In this way resources associated with a single run can be
released when the run_end() method is called.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Agent.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signals</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Agent.update" title="Permalink to this definition"></a></dt>
<dd><p>Called periodically by the Controller</p>
<p>The signals that specified by get_signals() will be passed as inputs
to the method by the Controller.  The update() method will be called
periodically and the interval is set by the value returned by
Agent.get_period().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>signals</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>)</em>) -- Recently read signal values</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Control values for next control interval</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.runtime.Controller">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.runtime.</span></span><span class="sig-name descname"><span class="pre">Controller</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Controller" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class that supports a runtime control algorithm</p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Controller.push_all">
<span class="sig-name descname"><span class="pre">push_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Controller.push_all" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Controller.read_all_signals">
<span class="sig-name descname"><span class="pre">read_all_signals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Controller.read_all_signals" title="Permalink to this definition"></a></dt>
<dd><p>Sample for all signals pushed with pio</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Sampled values for each signal</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Controller.returncode">
<span class="sig-name descname"><span class="pre">returncode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Controller.returncode" title="Permalink to this definition"></a></dt>
<dd><p>Get the return code of the application process</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Return code of app process</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.Controller.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.Controller.run" title="Permalink to this definition"></a></dt>
<dd><p>Execute control loop defined by agent</p>
<p>Interfaces with PlatformIO directly through the geopmdpy.pio module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>argv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- Arguments for application that is executed</p></li>
<li><p><strong>policy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) -- Policy for Agent to use during the run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Human readable report created by agent</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.runtime.PIDTimedLoop">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.runtime.</span></span><span class="sig-name descname"><span class="pre">PIDTimedLoop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.PIDTimedLoop" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#geopmdpy.runtime.TimedLoop" title="geopmdpy.runtime.TimedLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedLoop</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.PIDTimedLoop.wait">
<span class="sig-name descname"><span class="pre">wait</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.PIDTimedLoop.wait" title="Permalink to this definition"></a></dt>
<dd><p>Wait for timeout seconds or until pid ends</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- Target interval for the loop execution in
units of seconds.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#StopIteration" title="(in Python v3.10)"><strong>StopIteration</strong></a> -- When last call to wait termintated due to
    the process ending</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.runtime.TimedLoop">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.runtime.</span></span><span class="sig-name descname"><span class="pre">TimedLoop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.TimedLoop" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Object that can be iterated over to run a timed loop</p>
<p>Use in a for loop to execute a fixed number of timed delays.  The
overhead time for executing what is inside of the loop is
accounted for.  Calls to time.sleep() are made to delay until the
targeted end time for each iteration.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">TimedLoop</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">time_0</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">0: 0.0008680820465087891</span>
<span class="go">1: 0.10126090049743652</span>
<span class="go">2: 0.20174455642700195</span>
<span class="go">3: 0.30123186111450195</span>
<span class="go">4: 0.4010961055755615</span>
<span class="go">5: 0.5020360946655273</span>
<span class="go">6: 0.6011238098144531</span>
<span class="go">7: 0.7011349201202393</span>
<span class="go">8: 0.8020164966583252</span>
<span class="go">9: 0.9015650749206543</span>
<span class="go">10: 1.0021190643310547</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.runtime.TimedLoop.wait">
<span class="sig-name descname"><span class="pre">wait</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.runtime.TimedLoop.wait" title="Permalink to this definition"></a></dt>
<dd><p>Pass-through to time.sleep()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- Target interval for the loop execution in
units of seconds.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-geopmdpy.schemas">
<span id="geopmdpy-schemas"></span><h2>geopmdpy.schemas<a class="headerlink" href="#module-geopmdpy.schemas" title="Permalink to this heading"></a></h2>
<p>Json schemas used by geopmdpy</p>
<p>GEOPM_ACTIVE_SESSIONS_SCHEMA:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://json-schema.org/draft-04/schema#&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://geopm.github.io/active_sessions.schema.json&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ActiveSession&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;client_pid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;reference_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;signals&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;controls&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;watch_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;batch_server&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;client_pid&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;signals&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;controls&quot;</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="module-geopmdpy.service">
<span id="geopmdpy-service"></span><h2>geopmdpy.service<a class="headerlink" href="#module-geopmdpy.service" title="Permalink to this heading"></a></h2>
<p>Module containing the implementations of the DBus interfaces
exposed by geopmd.</p>
<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.service.</span></span><span class="sig-name descname"><span class="pre">GEOPMService</span></span><a class="headerlink" href="#geopmdpy.service.GEOPMService" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The dasbus service object that is published.</p>
<p>Object used by dasbus to map GEOPM service DBus APIs to their
implementation.  A GEOPMService object is published by geopmd
using the publish_object() method of dasbus.SystemMessageBus
class which enables the GEOPM service.</p>
<p>The GEOPMService methods are named after the DBus API they provide
within the io.github.geopm DBus namespace.  The parameter type
conversion is configured with the __dbus_xml__ class member.</p>
<p>The implementation for each method is a pass-through call to a
member object method.  These member objects do not have an
explicit dasbus dependency which facilitates unit testing.</p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformCloseSession">
<span class="sig-name descname"><span class="pre">PlatformCloseSession</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">call_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformCloseSession" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformCloseSessionAdmin">
<span class="sig-name descname"><span class="pre">PlatformCloseSessionAdmin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">call_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformCloseSessionAdmin" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformGetAllAccess">
<span class="sig-name descname"><span class="pre">PlatformGetAllAccess</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformGetAllAccess" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformGetControlInfo">
<span class="sig-name descname"><span class="pre">PlatformGetControlInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformGetControlInfo" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformGetGroupAccess">
<span class="sig-name descname"><span class="pre">PlatformGetGroupAccess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformGetGroupAccess" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformGetSignalInfo">
<span class="sig-name descname"><span class="pre">PlatformGetSignalInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformGetSignalInfo" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformGetUserAccess">
<span class="sig-name descname"><span class="pre">PlatformGetUserAccess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">call_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformGetUserAccess" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformLockControl">
<span class="sig-name descname"><span class="pre">PlatformLockControl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">call_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformLockControl" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformOpenSession">
<span class="sig-name descname"><span class="pre">PlatformOpenSession</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">call_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformOpenSession" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformReadSignal">
<span class="sig-name descname"><span class="pre">PlatformReadSignal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_idx</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">call_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformReadSignal" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformSetGroupAccess">
<span class="sig-name descname"><span class="pre">PlatformSetGroupAccess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_signals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_controls</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">call_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformSetGroupAccess" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformStartBatch">
<span class="sig-name descname"><span class="pre">PlatformStartBatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">call_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformStartBatch" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformStopBatch">
<span class="sig-name descname"><span class="pre">PlatformStopBatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_pid</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">call_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformStopBatch" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformUnlockControl">
<span class="sig-name descname"><span class="pre">PlatformUnlockControl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">call_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformUnlockControl" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.PlatformWriteControl">
<span class="sig-name descname"><span class="pre">PlatformWriteControl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setting</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">call_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.PlatformWriteControl" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.GEOPMService.TopoGetCache">
<span class="sig-name descname"><span class="pre">TopoGetCache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.GEOPMService.TopoGetCache" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.service.</span></span><span class="sig-name descname"><span class="pre">PlatformService</span></span><a class="headerlink" href="#geopmdpy.service.PlatformService" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Provides the concrete implementation for all of the GEOPM DBus
interfaces that use PlatformIO.  This class is used by the
GEOPMService class that maps DBus interfaces to their
implementations.</p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.check_client">
<span class="sig-name descname"><span class="pre">check_client</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.check_client" title="Permalink to this definition"></a></dt>
<dd><p>Called by GLib periodically to monitor if a PID is active</p>
<p>GLib queries check_client() to see if the process is still alive.</p>
<p>This method gets triggered upon abnormal termination of the
session, such as when the client process unexpectedly crashes
or ends without closing all sessions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.close_session">
<span class="sig-name descname"><span class="pre">close_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.close_session" title="Permalink to this definition"></a></dt>
<dd><p>Close an active session for the client process.</p>
<p>After closing a session, the client process is required to
call open_session() again before using any of the client-facing
member functions.</p>
<p>Closing an active session will remove the record of which
signals and controls the client process has access to; thus,
this record is updated to reflect changes to the policy when the
next session is opened by the process.</p>
<p>When closing a write-mode session, the control values that were
recorded when the session was promoted to write-mode are restored.</p>
<p>A client PID may attempt to open a session multiple times and
this is tracked with a reference count as described in the
documentation for opening a session.  In this case, calls to
close the session will not actually release the resources
associated with the session until the reference count falls to
zero.</p>
<p>A RuntimeError is raised if the client_pid does not have an
open session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID of the client thread</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.close_session_admin">
<span class="sig-name descname"><span class="pre">close_session_admin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.close_session_admin" title="Permalink to this definition"></a></dt>
<dd><p>Close an active session for the client process completely.</p>
<p>This administrative function is used to forcibly close an
active session regardless of the client's reference count.
Similarly, if a client process PID is no longer active, but an
open session exists, this implementation is used to release
the session resources.</p>
<p>When closing a write-mode session, the control values that were
recorded when the session was promoted to write-mode are restored.
A RuntimeError is raised if the client_pid does not have an
open session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID of the client thread</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.get_all_access">
<span class="sig-name descname"><span class="pre">get_all_access</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.get_all_access" title="Permalink to this definition"></a></dt>
<dd><p>Get all of the signals and controls that the service supports.</p>
<p>Returns the list of all signals and controls supported by the
service.  The lists returned are independent of the access
controls; therefore, calling get_all_access() is equivalent
to calling get_user_access('root').</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>All supported signals and controls, in sorted order.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>), <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.get_control_info">
<span class="sig-name descname"><span class="pre">get_control_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.get_control_info" title="Permalink to this definition"></a></dt>
<dd><p>For each specified control name, return a tuple of information.</p>
<p>The caller provides a list of control names.  This method returns
a list of the same length which consists of a tuple of information
for each control.</p>
<p>The method will raise a RuntimeError if any of the requested
control names are not supported by the service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>control_names</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- List of control names to query</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>name (str): The control name specified by the caller</p>
<dl class="simple">
<dt>description (str): A human-readable description of the</dt><dd><p>effect of setting the control.</p>
</dd>
<dt>domain_type (int): One of the geopmpy.topo.DOMAIN_*</dt><dd><p>integers corresponding to a domain
type that is the finest available
granularity for the control.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)">tuple</a>((<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>), (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>), (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>)))</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.get_group_access">
<span class="sig-name descname"><span class="pre">get_group_access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.get_group_access" title="Permalink to this definition"></a></dt>
<dd><p>Get the signal and control access lists</p>
<p>Read the list of allowed signals and controls for the
specified group.  If the group is None or the empty string
then the default lists of allowed signals and controls are
returned.</p>
<p>The values are securely read from files located in
/etc/geopm-service using the secure_read_file() interface.</p>
<p>If no secure file exist for the specified group, then two
empty lists are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of group</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal and control allowed lists, both in sorted order.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>), <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- The group name is not valid on the system.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.get_signal_info">
<span class="sig-name descname"><span class="pre">get_signal_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.get_signal_info" title="Permalink to this definition"></a></dt>
<dd><p>For each specified signal name, return a tuple of information.</p>
<p>The caller provides a list of signal names.  This method returns
a list of the same length which consists of a tuple of information
for each signal.</p>
<p>The method will raise a RuntimeError if any of the requested
signal names are not supported by the service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>signal_names</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- List of signal names to query</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>name (str): The signal name specified by the caller</p>
<dl class="simple">
<dt>description (str): A human-readable description of</dt><dd><p>what the signal measures.</p>
</dd>
<dt>domain_type (int): One of the geopmpy.topo.DOMAIN_*</dt><dd><p>integers corresponding to a domain
type where the signal is natively
supported.</p>
</dd>
<dt>aggregation (int): One of the geopm::Agg::m_type_e</dt><dd><p>enum values defined in Agg.hpp that
specifies how to aggregate the
signal over domains.</p>
</dd>
<dt>format_type (int): One of the geopm::string_format_e</dt><dd><p>enum values defined in Helper.hpp
that specifies how to convert the
signal value to a human readable
string.</p>
</dd>
<dt>behavior (int): One of the</dt><dd><p>IOGroup::m_signal_behavior_e enum
values that specifies how the signal
changes over time.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)">tuple</a>((<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>), (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>), (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>), (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>), (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>), (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>)))</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.get_user_access">
<span class="sig-name descname"><span class="pre">get_user_access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.get_user_access" title="Permalink to this definition"></a></dt>
<dd><p>Get the list of all of the signals and controls that are
accessible to the specified user.</p>
<p>Returns the default access lists that apply to all non-root
users if the empty string is provided.</p>
<p>All available signals and controls are returned if the caller
specifies the user name 'root'.  A RuntimeError is
raised if the user does not exist on the system.</p>
<p>When a user requests a signal or control through one of the
other PlatformService methods, they are restricted to the
union of the default allowed lists and the allowed lists for
all Unix groups that the user belongs to.  These combined
lists are what this method returns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Which Unix user name to query; if the empty
string is provided, the default allowed list
is returned.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal and control allowed lists, both in sorted order.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>), <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- The user does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.lock_control">
<span class="sig-name descname"><span class="pre">lock_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.lock_control" title="Permalink to this definition"></a></dt>
<dd><p>Block all write-mode sessions.</p>
<p>A call to this method will end any currently running
write-mode session and block the creation of any new
write-mode sessions.  Use the unlock_control() method to
enable write-mode sessions to begin again.</p>
<p>Calls to this method through the DBus interface will be
blocked for all non-root users due to the rules established by
the &quot;io.github.geopm.conf&quot; DBus configuration file.</p>
<p>Until write-mode sessions are re-enabled, any calls to
write_control() or calls to start_batch() with a non-empty
control_config parameter will raise a RuntimeError.</p>
<p>The default system configuration may be updated by the system
administrator while write-mode is locked.  For instance, the
system administrator may use the geopmwrite command-line tool
as user root between calls to lock_control() and
unlock_control().  These changes will be reflected by the
save/restore executed by the service for the next client
write-mode session after the controls are unlocked.</p>
<p>No action is taken and no error is raised if controls are already
disabled when this method is called.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.open_session">
<span class="sig-name descname"><span class="pre">open_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.open_session" title="Permalink to this definition"></a></dt>
<dd><p>Open a new session for the client thread.</p>
<p>The creation of a session is the first step that a client
thread makes to interact with the GEOPM service.  Each Linux
thread has a unique PID, and this PID can be associated with
at most one GEOPM service session.  The session is ended by
passing the client PID to the close_session() method.  The
session will also be ended if the client thread terminates for
any reason.</p>
<p>The client PID may attempt to open a new session multiple
times.  In this case a reference count records the number of
calls to open the session by the client PID.  Each call to
open a session is expected to be paired with a call to close
the session.  When the reference count falls to zero, all
resources associated with the session are released.</p>
<p>Incrementing the reference count is an abstraction for the
client.  The client itself cannot have more than a single open
connection at once, so when requesting a new session, other
than incrementing the counter, nothing else happens.</p>
<p>All sessions are opened in read-mode, and may later be
promoted to write-mode.  This promotion will occur with the
first successful call requiring access to controls.  This
includes any calls to write_control() or calls to
start_batch() with a non-empty control_config.  These calls
will fail if there is an active write-mode session opened by
another thread.</p>
<p>Prior to being promoted to write-mode, the current value for
all controls that are supported by the GEOPM service will be
recorded.  This record enables the service to restore all
controls when the write-mode session ends.</p>
<p>Permissions for the session's access to signals and controls
are determined based on the policy for the user when
the session is first opened.  Calling the set_group_access()
method to alter the policy will not affect active sessions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Unix user name that owns the client thread
opening the session.</p></li>
<li><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID of the client thread opening
the session.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.read_signal">
<span class="sig-name descname"><span class="pre">read_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.read_signal" title="Permalink to this definition"></a></dt>
<dd><p>Read a signal from a particular domain.</p>
<p>Select a signal by name and read the current value from the
domain type and index specified.  The value is returned
as a floating point number in SI units.</p>
<p>A RuntimeError is raised if the client_pid does not have an
open session or if the client does not have permission to read the
signal from the specified domain.</p>
<p>A RuntimeError is raised if the requested signal is not
supported, the domain is invalid or the domain index is out of
range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID of the client thread.</p></li>
<li><p><strong>signal_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of the signal to read.</p></li>
<li><p><strong>domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- One of the geopmpy.topo.DOMAIN_* integers
corresponding to a domain type to read from.</p></li>
<li><p><strong>domain_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Specifies the particular domain index to
read from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The value of the signal in SI units.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.set_group_access">
<span class="sig-name descname"><span class="pre">set_group_access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_signals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_controls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.set_group_access" title="Permalink to this definition"></a></dt>
<dd><p>Set signals and controls in the allowed lists</p>
<p>Write the list of allowed signals and controls for the
specified group.  If the group is None or the empty string
then the default lists of allowed signals and controls are
updated.</p>
<p>The values are securely written atomically to files located in
/etc/geopm-service using the secure_make_dirs() and
secure_make_file() interfaces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of group</p></li>
<li><p><strong>allowed_signals</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- Signal names that are allowed</p></li>
<li><p><strong>allowed_controls</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- Control names that are allowed</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- The group name is not valid on the system.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.start_batch">
<span class="sig-name descname"><span class="pre">start_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.start_batch" title="Permalink to this definition"></a></dt>
<dd><p>Start a batch server to support a client session.</p>
<p>Configure the signals and controls that will be enabled by the
batch server and start the server process.  The server enables
fast access for the signals and controls that are configured
by the caller.  These are configured by specifying a name,
domain and domain index for each of the signals and controls
that the server will support.</p>
<p>After a batch server is successfully created, the client will
interact with the batch server though PlatformIO interfaces
that do not go over DBus.  That is, once access is established
by DBus, a faster protocol can be safely used.</p>
<p>The batch server does not enable features beyond those of
the read_signal() or write_control() methods; it simply
provides a much higher performance interface.</p>
<p>A RuntimeError is raised if the client does not have
permission to read or write any of configured signals or
controls or if the client_pid does not have an open session.
The server process will not be created if any error occurs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID of the client thread</p></li>
<li><p><strong>signal_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a><em>(</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>)</em><em>, </em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>)</em><em>, </em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em><em>)</em>) -- <dl class="simple">
<dt>domain_type (int): One of the geopmpy.topo.DOMAIN_*</dt><dd><p>integers corresponding to a domain
type to read from.</p>
</dd>
<dt>domain_idx (int): Specifies the particular domain</dt><dd><p>index to read from.</p>
</dd>
</dl>
<p>signal_name (str): The name of the signal to read.</p>
</p></li>
<li><p><strong>control_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a><em>(</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>)</em><em>, </em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>)</em><em>, </em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em><em>)</em>) -- <dl class="simple">
<dt>domain_type (int): One of the geopmpy.topo.DOMAIN_*</dt><dd><p>integers corresponding to a domain
type to write to.</p>
</dd>
<dt>domain_idx (int): Specifies the particular domain</dt><dd><p>index to write to.</p>
</dd>
</dl>
<p>control_name (str): The name of the control to write.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>server_pid (int): The Linux PID of the batch server process.</p>
<dl class="simple">
<dt>server_key (str): A unique identifier enabling the</dt><dd><p>server/client connection across
inter-process shared memory.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)">tuple</a>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.stop_batch">
<span class="sig-name descname"><span class="pre">stop_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.stop_batch" title="Permalink to this definition"></a></dt>
<dd><p>End a batch server previously started by the client.</p>
<p>Terminate the batch server process and free up all resources
associated with the batch server.  Any future calls by the
client to interfaces that require the batch server will result
in errors.</p>
<p>The batch server will also be terminated if the client session
that created the server terminates for any reason.</p>
<p>A RuntimeError will be raised if the specified server PID was
not previously created by the client's call to start_batch(),
or if the batch server has already been closed for any reason.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID of the client thread.</p></li>
<li><p><strong>server_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID of a batch server process
returned by a previous call to
start_batch().</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.unlock_control">
<span class="sig-name descname"><span class="pre">unlock_control</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.unlock_control" title="Permalink to this definition"></a></dt>
<dd><p>Unblock access to create new write-mode sessions.</p>
<p>A call to this method will re-enable write-mode sessions to be
created after they were previously disabled by a call to
lock_control().</p>
<p>Although new sessions may be created after a call to
unlock_control(), write-mode sessions that were ended due to
previous calls to lock_control() will remain closed.</p>
<p>No action is taken and no error is raised if controls are already
enabled when this method is called.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.PlatformService.write_control">
<span class="sig-name descname"><span class="pre">write_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setting</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.PlatformService.write_control" title="Permalink to this definition"></a></dt>
<dd><p>Write a control value to a particular domain.</p>
<p>Select a control by name and write a new setting for the
domain type and index specified.  The written control setting
is a floating point number in SI units.</p>
<p>A RuntimeError is raised if the client_pid does not have an
open session, or if the client does not have permission to write the
control to the specified domain.</p>
<p>A RuntimeError is raised if a different client currently has an
open write-mode session.</p>
<p>A RuntimeError is raised if the requested control is not
supported, the domain is invalid or the domain index is out of
range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID of the client thread.</p></li>
<li><p><strong>control_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The name of the control to write.</p></li>
<li><p><strong>domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- One of the geopmpy.topo.DOMAIN_* integers
corresponding to a domain type to written
to.</p></li>
<li><p><strong>domain_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Specifies the particular domain index to
write to.</p></li>
<li><p><strong>setting</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- Value of the control to be written.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.service.TopoService">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.service.</span></span><span class="sig-name descname"><span class="pre">TopoService</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topo=&lt;module</span> <span class="pre">'geopmdpy.topo'</span> <span class="pre">from</span> <span class="pre">'/home/cmcantal/Git/geopm/service/geopmdpy/topo.py'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.TopoService" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Provides the concrete implementation for all of the GEOPM DBus
interfaces that use PlatformTopo.  This class is used by the
GEOPMService class that maps DBus interfaces to their
implementations.</p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.service.TopoService.get_cache">
<span class="sig-name descname"><span class="pre">get_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.service.TopoService.get_cache" title="Permalink to this definition"></a></dt>
<dd><p>Return the contents of the PlatformTopo cache file.</p>
<p>Create the PlatformTopo cache file if it does not exist and
then return the contents of the file as a string.  This
provides all the information required to associate all domains
with CPUs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Contents of the topology cache file that defines</dt><dd><p>the system topology.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-geopmdpy.session">
<span id="geopmdpy-session"></span><h2>geopmdpy.session<a class="headerlink" href="#module-geopmdpy.session" title="Permalink to this heading"></a></h2>
<p>Implementation for the geopmsession command line tool</p>
<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.session.ReadRequestQueue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.session.</span></span><span class="sig-name descname"><span class="pre">ReadRequestQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geopm_proxy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.ReadRequestQueue" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#geopmdpy.session.RequestQueue" title="geopmdpy.session.RequestQueue"><code class="xref py py-class docutils literal notranslate"><span class="pre">RequestQueue</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.session.ReadRequestQueue.get_formats">
<span class="sig-name descname"><span class="pre">get_formats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.ReadRequestQueue.get_formats" title="Permalink to this definition"></a></dt>
<dd><p>Get formatting enum values for the parsed read requests</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>The geopm::string_format_e enum value for each</dt><dd><p>read request.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.session.ReadRequestQueue.parse_requests">
<span class="sig-name descname"><span class="pre">parse_requests</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_stream</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.ReadRequestQueue.parse_requests" title="Permalink to this definition"></a></dt>
<dd><p>Parse input stream and return list of read requests</p>
<p>Parse a user supplied stream into a list of tuples
representing read requests.  The tuples are of the form
(signal_name, domain_type, domain_idx) and are parsed one from
each line of the stream.  Each of the values in the stream is
separated by white space.</p>
<p>Each signal_name should match one of the signal names provided
by the service.  The domain_type is specified as the name
string, i.e one of the following strings: &quot;board&quot;, &quot;package&quot;,
&quot;core&quot;, &quot;cpu&quot;, &quot;memory&quot;, &quot;package_integrated_memory&quot;, &quot;nic&quot;,
&quot;package_integrated_nic&quot;, &quot;gpu&quot;, &quot;package_integrated_gpu&quot;.
The domain index is a positive integer indexing the specific
domain.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request_stream</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.IO" title="(in Python v3.10)"><em>IO</em></a>) -- Input stream to parse for read
requests</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>List of request tuples. Each</dt><dd><p>request comprises a signal name,
domain type, and domain index.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>((<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>))</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Line from stream does not split into three
    words and is also not a comment or empty
    line.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.session.ReadRequestQueue.query_formats">
<span class="sig-name descname"><span class="pre">query_formats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geopm_proxy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.ReadRequestQueue.query_formats" title="Permalink to this definition"></a></dt>
<dd><p>Call the GEOPM D-Bus API to get the format type for each signal name</p>
<p>Returns a list of geopm::string_format_e integers that determine
how each signal value is formatted as a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signal_names</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- List of signal names to query.</p></li>
<li><p><strong>geopm_proxy</strong> (<a class="reference external" href="https://dasbus.readthedocs.io/en/stable/api/dasbus.client.proxy.html#dasbus.client.proxy.InterfaceProxy" title="(in dasbus)"><em>dasbus.client.proxy.InterfaceProxy</em></a>) -- The
dasbus proxy for the GEOPM D-Bus interface.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of geopm::string_format_e integers, one
for each signal name in input list.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.session.RequestQueue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.session.</span></span><span class="sig-name descname"><span class="pre">RequestQueue</span></span><a class="headerlink" href="#geopmdpy.session.RequestQueue" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Object derived from user input that provides request information</p>
<p>The geopmsession command line tool parses requests for reading
from standard input.  The RequestQueue object holds the logic for
parsing the input stream upon construction.  The resulting object
may be iterated upon to retrieve the requested signals that the
user would like to read.  The Request object also provides the
enum used to format signal values into strings.</p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.session.RequestQueue.get_names">
<span class="sig-name descname"><span class="pre">get_names</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.RequestQueue.get_names" title="Permalink to this definition"></a></dt>
<dd><p>Get the signal or control names from each request</p>
<p>Strip off &quot;SERVICE::&quot; prefix from any names in request queue,
so that the name can be passed to the proxy.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>The name of the signal or control associated</dt><dd><p>with each user request.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.session.RequestQueue.iterate_stream">
<span class="sig-name descname"><span class="pre">iterate_stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_stream</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.RequestQueue.iterate_stream" title="Permalink to this definition"></a></dt>
<dd><p>Iterate over a stream of requests</p>
<p>This is a generator function that will filter out comment
lines and trailing white space from the input stream.  It can
be used to iterate over a request stream from the user for
either a read or write mode session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request_stream</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.IO" title="(in Python v3.10)"><em>IO</em></a>) -- Stream containing requests from
user.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Iterate over filtered lines of the</dt><dd><p>request_stream</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><em>Generator</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.session.Session">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.session.</span></span><span class="sig-name descname"><span class="pre">Session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geopm_proxy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.Session" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Object responsible for creating a GEOPM service session</p>
<p>This object's run() method is the main entry point for
geopmsession command line tool.  The inputs to run() are derived
from the command line options provided by the user.</p>
<p>The Session object depends on the RequestQueue object to parse the
input request buffer from the user.  The Session object also
depends on the runtime.TimedLoop object when executing a periodic
read session.</p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.session.Session.check_read_args">
<span class="sig-name descname"><span class="pre">check_read_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.Session.check_read_args" title="Permalink to this definition"></a></dt>
<dd><p>Check that the run time and period are valid for a read session</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>run_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- Time duration of the session open in
seconds.</p></li>
<li><p><strong>period</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- The user specified period between samples
in units of seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- The period is greater than the total time or
    either is negative.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.session.Session.format_signals">
<span class="sig-name descname"><span class="pre">format_signals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_format</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.Session.format_signals" title="Permalink to this definition"></a></dt>
<dd><p>Format a list of signal values for printing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signals</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>)</em>) -- Values to be printed</p></li>
<li><p><strong>signal_format</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>)</em>) -- The geopm::format_string_e enum
value describing the formatting
for each signal provided.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Ready-to-print line of formatted values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.session.Session.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request_stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdin&gt;'</span> <span class="pre">mode='r'</span> <span class="pre">encoding='UTF-8'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='UTF-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.Session.run" title="Permalink to this definition"></a></dt>
<dd><p>&quot;Create a GEOPM session with values parsed from the command line</p>
<p>The implementation for the geopmsession command line tool.
The inputs to this method are derived from the parsed command
line provided by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>run_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- Time duration of the session in seconds.</p></li>
<li><p><strong>period</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- Time interval for each line of output for.
Value must be zero for a write mode
session.</p></li>
<li><p><strong>request_stream</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.IO" title="(in Python v3.10)"><em>IO</em></a>) -- Input from user describing the
requests to read.</p></li>
<li><p><strong>out_stream</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.IO" title="(in Python v3.10)"><em>IO</em></a>) -- Stream where output from will be
printed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.session.Session.run_read">
<span class="sig-name descname"><span class="pre">run_read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">requests</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_stream</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.Session.run_read" title="Permalink to this definition"></a></dt>
<dd><p>Run a read mode session</p>
<p>Use the GEOPM D-Bus interface to periodically read the
requested signals. A line of text will be printed to the
output stream for each period of time.  The line will contain
a comma separated list of the read values, one for each
request.</p>
<p>Only one read of the requests is made if the period is zero.
If the period is non-zero then the requested signals are read
periodically.  The first read is immediate, and then a delay
of period seconds elapses until the next sample is made.
These periodic reads are executed and printed until the
duration of time specified has been met or exceeded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>requests</strong> (<a class="reference internal" href="#geopmdpy.session.ReadRequestQueue" title="geopmdpy.session.ReadRequestQueue"><em>ReadRequestQueue</em></a>) -- Request object parsed from
user input.</p></li>
<li><p><strong>duration</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- The user specified minimum length of time
for the samples to span in units of
seconds.</p></li>
<li><p><strong>period</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) -- The user specified period between samples
in units of seconds.</p></li>
<li><p><strong>out_stream</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.IO" title="(in Python v3.10)"><em>IO</em></a>) -- Object with write() method where output
will be printed (typically sys.stdout).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.session.main">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.session.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.session.main" title="Permalink to this definition"></a></dt>
<dd><p>Command line interface for the geopm service batch read features.</p>
<p>This command can be used to read signals by opening a session with
the geopm service.</p>
</dd></dl>

</section>
<section id="module-geopmdpy.system_files">
<span id="geopmdpy-system-files"></span><h2>geopmdpy.system_files<a class="headerlink" href="#module-geopmdpy.system_files" title="Permalink to this heading"></a></h2>
<p>Manage system files used by the geopm service</p>
<p>Provides secure interfaces for manipulating the files in</p>
<blockquote>
<div><p>/run/geopm-service</p>
</div></blockquote>
<p>that enable the service to be restarted and</p>
<blockquote>
<div><p>/etc/geopm-service</p>
</div></blockquote>
<p>where the access lists are located.  These interfaces provide
guarantees about the security of these system files, and an
abstraction for updating the contents.</p>
<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.system_files.AccessLists">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.system_files.</span></span><span class="sig-name descname"><span class="pre">AccessLists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/etc/geopm-service'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.AccessLists" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class that manages the access list files</p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.AccessLists.get_all_access">
<span class="sig-name descname"><span class="pre">get_all_access</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.AccessLists.get_all_access" title="Permalink to this definition"></a></dt>
<dd><p>Get all of the signals and controls that the service supports.</p>
<p>Returns the list of all signals and controls supported by the
service.  The lists returned are independent of the access
controls; therefore, calling get_all_access() is equivalent
to calling get_user_access('root').</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>All supported signals and controls, in sorted order.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>), <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.AccessLists.get_group_access">
<span class="sig-name descname"><span class="pre">get_group_access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.AccessLists.get_group_access" title="Permalink to this definition"></a></dt>
<dd><p>Get the signal and control access lists</p>
<p>Read the list of allowed signals and controls for the
specified group.  If the group is None or the empty string
then the default lists of allowed signals and controls are
returned.</p>
<p>The values are securely read from files located in
/etc/geopm-service using the secure_read_file() interface.</p>
<p>If no secure file exist for the specified group, then two
empty lists are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of group</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal and control allowed lists, in sorted order.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)), <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- The group name is not valid on the system.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.AccessLists.get_user_access">
<span class="sig-name descname"><span class="pre">get_user_access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.AccessLists.get_user_access" title="Permalink to this definition"></a></dt>
<dd><p>Get the list of all of the signals and controls that are
accessible to the specified user.</p>
<p>Returns the default access lists that apply to all non-root
users if the empty string is provided.</p>
<p>All available signals and controls are returned if the caller
specifies the user name 'root'.  A RuntimeError is
raised if the user does not exist on the system.</p>
<p>When a user requests a signal or control through one of the
other PlatformService methods, they are restricted to the
union of the default allowed lists and the allowed lists for
all Unix groups that the user belongs to.  These combined
lists are what this method returns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Which Unix user name to query; if the empty
string is provided, the default allowed list
is returned.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal and control allowed lists, in sorted order.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>), <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- The user does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.AccessLists.set_group_access">
<span class="sig-name descname"><span class="pre">set_group_access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_signals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_controls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.AccessLists.set_group_access" title="Permalink to this definition"></a></dt>
<dd><p>Set signals and controls in the allowed lists</p>
<p>Write the list of allowed signals and controls for the
specified group.  If the group is None or the empty string
then the default lists of allowed signals and controls are
updated.</p>
<p>The values are securely written atomically to files located in
/etc/geopm-service using the secure_make_dirs() and
secure_make_file() interfaces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- Name of group</p></li>
<li><p><strong>allowed_signals</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- Signal names that are allowed</p></li>
<li><p><strong>allowed_controls</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- Control names that are allowed</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- The group name is not valid on the system.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.system_files.</span></span><span class="sig-name descname"><span class="pre">ActiveSessions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/run/geopm-service'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class that manages the session files for the service</p>
<p>The state about active sessions opened with geopmd by a client
processes is stored in files in /run/geopm-service.  These
files are loaded when the geopmd process starts.  The files are
modified each time a client opens a session, closes a session,
requests write permission, or starts a batch server.  The class is
responsible for managing file access permissions, and atomic file
creation.</p>
<p>The session files are stored in JSON format and follow the
GEOPM_ACTIVE_SESSIONS_SCHEMA documented in the
<code class="docutils literal notranslate"><span class="pre">geopmdpy.schemas</span></code> module.</p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.add_client">
<span class="sig-name descname"><span class="pre">add_client</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watch_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.add_client" title="Permalink to this definition"></a></dt>
<dd><p>Add a new client session to be tracked</p>
<p>Create a new session file that contains the JSON data provided
as the call parameters in a format that conforms to the
session file schema.</p>
<p>This file will be created atomically such that if this method
is interrupted before the session file is ready to be used,
then no file will be present that matches load pattern below.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">/run/geopm-service/session-*.json</span></code></p>
</div></blockquote>
<p>The session file is created without the JSON object property
&quot;batch_server&quot; specified.  This properties may be modified by the
set_batch_server() method after the client is added.</p>
<p>This operation creates the session file atomically, but does
not modify the session properties nor the session file if the
client PID already has an open session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p></li>
<li><p><strong>signals</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- List of signal names that are allowed
to be read by the client</p></li>
<li><p><strong>controls</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>)</em>) -- List of control names that are allowed
to be written by the client</p></li>
<li><p><strong>watch_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- The watch ID handle returned by GLib for
tracking that the PID is active</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.check_client_active">
<span class="sig-name descname"><span class="pre">check_client_active</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.check_client_active" title="Permalink to this definition"></a></dt>
<dd><p>Raise an exception if a PID does not have an active session</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID to query</p></li>
<li><p><strong>msg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The operation that was attempted which requires
an active session.  Used in error message</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Operation not allowed without an open session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.decrement_reference_count">
<span class="sig-name descname"><span class="pre">decrement_reference_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.decrement_reference_count" title="Permalink to this definition"></a></dt>
<dd><p>Decrement the reference_count value by one</p>
<p>This method is called when an independent component of the client
calls close_session() and the connection is still open.
For example when there are multiple independent components using that
open connection, and one of them wants to close the session, we just
decrement the reference count, we do not close the connection, as that
would impact the other independent components which are using the connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Client does not have an open session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.get_batch_server">
<span class="sig-name descname"><span class="pre">get_batch_server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.get_batch_server" title="Permalink to this definition"></a></dt>
<dd><p>Query the batch server for the client session</p>
<p>In the case where the client has an open batch server, this
method returns the Linux PID of the batch server.  If there is
no active batch server then None is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Linux PID of the batch server or None</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Client does not have an open session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.get_clients">
<span class="sig-name descname"><span class="pre">get_clients</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.get_clients" title="Permalink to this definition"></a></dt>
<dd><p>Get list of the client PID values for all active sessions</p>
<p>Creates a list of the PID values for all active session clients.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The Linux PID values for all active clients in sorted order.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.get_controls">
<span class="sig-name descname"><span class="pre">get_controls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.get_controls" title="Permalink to this definition"></a></dt>
<dd><p>Query all control names that are available</p>
<p>Creates a list of all control names that are available to the
session opened by the client PID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Control name access list in sorted order for the session</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Client does not have an open session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.get_reference_count">
<span class="sig-name descname"><span class="pre">get_reference_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.get_reference_count" title="Permalink to this definition"></a></dt>
<dd><p>Query the reference count for the client session.</p>
<p>The reference count is basically just an abstraction for the client.
The client itself cannot have more than a single open session at once,
since there is a one to one mapping between client pid and open sessions,
and lifetime of our session is coupled to the lifetime of the connection.</p>
<p>The reference count is used when in the client process, we have independent components,
which all may request that same connection as a kind of shared resource.
We want to provide that same connection as a singleton, and keep track of
how many independent components have access to that same connection as a resource,
in order to know when to deallocate that resource when all these components
have disconnected from the session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The reference count</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Client does not have an open session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.get_signals">
<span class="sig-name descname"><span class="pre">get_signals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.get_signals" title="Permalink to this definition"></a></dt>
<dd><p>Query all signal names that are available</p>
<p>Creates a list of all signal names that are available to the
session opened by the client PID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Signal name access list in sorted order for the session</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Client does not have an open session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.get_watch_id">
<span class="sig-name descname"><span class="pre">get_watch_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.get_watch_id" title="Permalink to this definition"></a></dt>
<dd><p>Query for the GLib watch ID for tracking the session lifetime</p>
<p>The watch ID is not valid in the case where the geopmd process
restarts.  When a new geopmd process starts it will read files
that contain watch ID values, however, the set_watch_id()
method must be called with an updated watch ID for each active
client session when geopmd starts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>GLib watch ID to track the session lifetime</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Client does not have an open session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.increment_reference_count">
<span class="sig-name descname"><span class="pre">increment_reference_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.increment_reference_count" title="Permalink to this definition"></a></dt>
<dd><p>Increment the reference_count value by one</p>
<p>This method is called when a new independent component calls open_session()
a subsequent time after the connection has already been opened.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Client does not have an open session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.is_client_active">
<span class="sig-name descname"><span class="pre">is_client_active</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.is_client_active" title="Permalink to this definition"></a></dt>
<dd><p>Query if a Linux PID currently has an active session</p>
<p>If a session file matching the client_pid exists, but the file
was not parsed or created by geopmd, then a warning message is
printed to syslog and the file is renamed.  The warning
message will display the user and group permissions of the
file being deleted.  In this case False is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID to query</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the PID has an open session, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.remove_batch_server">
<span class="sig-name descname"><span class="pre">remove_batch_server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.remove_batch_server" title="Permalink to this definition"></a></dt>
<dd><p>Remove the record for the batch server supporting a client session</p>
<p>This method is used to remove the record of a batch server
after it is closed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Client does not have an open session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.remove_client">
<span class="sig-name descname"><span class="pre">remove_client</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.remove_client" title="Permalink to this definition"></a></dt>
<dd><p>Delete the record of an active session</p>
<p>Remove the client session file and delete the state associated with
the client.  Future requests about this client PID will raise an
exception until another call to add_client() is made, although
repeated calls to remove_client() for the same PID do not result in an
error.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.set_batch_server">
<span class="sig-name descname"><span class="pre">set_batch_server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.set_batch_server" title="Permalink to this definition"></a></dt>
<dd><p>Set the Linux PID of the batch server supporting a client session</p>
<p>This method is used to store the PID after a batch server is created.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p></li>
<li><p><strong>batch_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID of the batch server created for
the client session</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Client does not have an open session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.set_reference_count">
<span class="sig-name descname"><span class="pre">set_reference_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_count</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.set_reference_count" title="Permalink to this definition"></a></dt>
<dd><p>Set the reference count for the session</p>
<p>This method is used whenever we want to update the reference_count to
reflect the number of independent components that have connected to the session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p></li>
<li><p><strong>reference_count</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- The new reference count value</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Client does not have an open session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.ActiveSessions.set_watch_id">
<span class="sig-name descname"><span class="pre">set_watch_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watch_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.ActiveSessions.set_watch_id" title="Permalink to this definition"></a></dt>
<dd><p>Set the GLib watch ID for tracking the session lifetime</p>
<p>Store the GLib watch ID after registering the callback with
GLib.timeout_add().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Linux PID that opened the session</p></li>
<li><p><strong>watch_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- GLib watch ID returned by the
GLib.timeout_add() method</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- Client does not have an open session</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="geopmdpy.system_files.GEOPM_SERVICE_CONFIG_PATH_PERM">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.system_files.</span></span><span class="sig-name descname"><span class="pre">GEOPM_SERVICE_CONFIG_PATH_PERM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">448</span></em><a class="headerlink" href="#geopmdpy.system_files.GEOPM_SERVICE_CONFIG_PATH_PERM" title="Permalink to this definition"></a></dt>
<dd><p>Default permissions for the GEOPM service config path</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="geopmdpy.system_files.GEOPM_SERVICE_RUN_PATH_PERM">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.system_files.</span></span><span class="sig-name descname"><span class="pre">GEOPM_SERVICE_RUN_PATH_PERM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">457</span></em><a class="headerlink" href="#geopmdpy.system_files.GEOPM_SERVICE_RUN_PATH_PERM" title="Permalink to this definition"></a></dt>
<dd><p>Default permissions for the GEOPM service run path</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geopmdpy.system_files.WriteLock">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geopmdpy.system_files.</span></span><span class="sig-name descname"><span class="pre">WriteLock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/run/geopm-service'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.WriteLock" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class for interacting with control lock file</p>
<p>This class provides the interface to query and set the PID that owns the
GEOPM Service control write lock.  The state of this lock is stored in the
file path:</p>
<blockquote>
<div><p>/run/geopm-service/CONTROL_LOCK</p>
</div></blockquote>
<p>This file is empty when the lock is free, and contains the PID of the
controlling process when the lock is held.  The class manages the advisory
lock to serialize any attempts read or write the file.  Additionally the
class checks that the lock file is a regular file with restricted
permissions.  Maniuplations of the control lock file should be done
exclusively with the WriteLock object to insure that the advisory lock is
effective.</p>
<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.WriteLock.try_lock">
<span class="sig-name descname"><span class="pre">try_lock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.WriteLock.try_lock" title="Permalink to this definition"></a></dt>
<dd><p>Get the PID that holds the lock or set lock</p>
<p>Returns the PID that currently holds the lock.  If the user specifies
a PID and the lock is not held by another process, then the lock will
be assigned, and the input pid will be returned.  The user must check
the return value to determine if a request to assign the lock was
successful, an error is not raised if the lock is held by another PID.</p>
<p>None is returned if the write lock is not held by any active session
and the user does not specify a pid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- The PID to assign the lock</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The PID of the session that holds the write lock upon return</dt><dd><p>or None if the write lock is not held</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geopmdpy.system_files.WriteLock.unlock">
<span class="sig-name descname"><span class="pre">unlock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.WriteLock.unlock" title="Permalink to this definition"></a></dt>
<dd><p>Release the write lock</p>
<p>Release the write lock from ownership by a specified PID.  If the lock
is not currently assigned to the specified PID, then a RuntimeError is
raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- The PID that the lock is assigned to</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> -- The specified PID does not currently hold the lock</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.system_files.is_secure_file">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.system_files.</span></span><span class="sig-name descname"><span class="pre">is_secure_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.is_secure_file" title="Permalink to this definition"></a></dt>
<dd><p>Query if file descriptor may be safely read</p>
<p>After opening a file this function is called to determine if the file
descriptor is a regular file owned by the calling process user and group
with restricted permissions (i.e. mode 0o600).  If these conditions are
not met then a warning message is printed and the file is renamed to a
path of the form <cite>&lt;PATH&gt;-&lt;UUID&gt;-INVALID</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The file path that was passed to open()</p></li>
<li><p><strong>fid</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.IO" title="(in Python v3.10)"><em>IO</em></a>) -- File descriptor returned by open()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if regular file with restricted permissions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.system_files.is_secure_path">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.system_files.</span></span><span class="sig-name descname"><span class="pre">is_secure_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.is_secure_path" title="Permalink to this definition"></a></dt>
<dd><p>Query if path may be openend safely</p>
<p>Check if path exists, and refers to a regular file that is not a link.  A
warning message is printed if the path is a link, a directory or is not a
regular file and the file is renamed to a path of the form
<cite>&lt;PATH&gt;-&lt;UUID&gt;-INVALID</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The file path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the path is a regular file and not a link</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.system_files.secure_make_dirs">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.system_files.</span></span><span class="sig-name descname"><span class="pre">secure_make_dirs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perm_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">448</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.secure_make_dirs" title="Permalink to this definition"></a></dt>
<dd><p>Securely create a directory</p>
<p>When the path does not exist a directory is created with permissions
0o700 by default along with all required parent directories.</p>
<p>The security of this path is verified if the path exists.  An
existing path is considered to be secure only if all of the
following conditions are met:</p>
<blockquote>
<div><ul class="simple">
<li><p>The path is a regular directory</p></li>
<li><p>The path is not a link</p></li>
<li><p>The path is accessible the the caller</p></li>
<li><p>The path is a directory owned by the calling process uid</p></li>
<li><p>The path is a directory owned by the calling process gid</p></li>
<li><p>The permissions for the directory are 0o700 by default</p></li>
</ul>
</div></blockquote>
<p>If the existing path is determined to be insecure, a warning is
printed to syslog and the existing file will be renamed to
<cite>&lt;path&gt;-&lt;UUID&gt;-INVALID</cite> so that it may be audited later, but not
used.  The warning message will display the reason why the
directory was not secure.  A new directory with the specified path
will be created in place of the renamed file.</p>
<p>This function will simply return when the directory already exists
and is considered secure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The path were the directory is created</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.system_files.secure_make_file">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.system_files.</span></span><span class="sig-name descname"><span class="pre">secure_make_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.secure_make_file" title="Permalink to this definition"></a></dt>
<dd><p>Securely and atomically create a file containing a string</p>
<p>The file is created by first writing the output to a temporary
file with restricted permissions (mode 0o600) within the same
directory, and then renaming the file after it is closed.  This
temporary file with have the path <cite>&lt;path&gt;-&lt;uuid&gt;-tmp</cite>.</p>
<p>The rename operation is atomic, and will overwrite any existing
file located in the specified path.  The permissions on the output
file are mode 0o600 with uid and gid matching the process values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The path where the file is created</p></li>
<li><p><strong>contents</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The contents of the created file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.system_files.secure_read_file">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.system_files.</span></span><span class="sig-name descname"><span class="pre">secure_read_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.system_files.secure_read_file" title="Permalink to this definition"></a></dt>
<dd><p>Securely read a file into a string</p>
<p>The security of this path is verified after the file is opened. An
existing path is considered to be secure only if all of the
following conditions are met:</p>
<blockquote>
<div><ul class="simple">
<li><p>The path is a regular file</p></li>
<li><p>The path is not a link</p></li>
<li><p>The path is accessible the the caller</p></li>
<li><p>The path is a file owned by the calling process uid</p></li>
<li><p>The path is a file owned by the calling process gid</p></li>
<li><p>The permissions for the file are 0o600</p></li>
</ul>
</div></blockquote>
<p>If the existing path is determined to be insecure, a warning is
printed to syslog and the existing file will be renamed to
<cite>&lt;path&gt;-&lt;UUID&gt;-INVALID</cite> so that it may be audited later, but not
used.  The warning message will display the reason why the file
was not secure and None is returned.</p>
<p>If the path points to an existing file that is determined to be
secure then the contents of the file are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The path where the file is created</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The contents of the file if file was opened, None if couldn't open file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-geopmdpy.topo">
<span id="geopmdpy-topo"></span><h2>geopmdpy.topo<a class="headerlink" href="#module-geopmdpy.topo" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.topo.create_cache">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.topo.</span></span><span class="sig-name descname"><span class="pre">create_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.topo.create_cache" title="Permalink to this definition"></a></dt>
<dd><p>Create a cache file for the platform topology if one does not
exist.  This cache file will be used by any calls to the other
functions in the topo module as well as any use of the GEOPM
runtime.  File permissions of the cache file are set to
&quot;-rw-r--r--&quot;, i.e. 644. The path for the cache file is
/run/geopm-service/geopm-topo-cache.  If this file is older than
the last boot it will be regenerated.  If the file exists but has
improper permissions is will be regenerated.  If the file has been
created since the last boot with the correct permissions, no
operation will be performed.  To force the creation of a new cache
file call os.unlink('/run/geopm-service/geopm-topo-cache') prior
to calling this function.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.topo.domain_idx">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.topo.</span></span><span class="sig-name descname"><span class="pre">domain_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpu_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.topo.domain_idx" title="Permalink to this definition"></a></dt>
<dd><p>Get the index of the domain that is local to a specific Linux
logical CPU.  The return value will be greater than or equal to
zero and less than the value returned by num_domain(domain).  An
exception is raised if either input is out of range or invalid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The domain type from one of topo.DOMAIN_*
integer values or a domain name string.</p></li>
<li><p><strong>cpu_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- The Linux logical CPU that is associated with
the returned domain type.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Domain index associated with the specified logical CPU.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.topo.domain_name">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.topo.</span></span><span class="sig-name descname"><span class="pre">domain_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.topo.domain_name" title="Permalink to this definition"></a></dt>
<dd><p>Get the domain name corresponding to the domain type specified.  If
domain is a string, a check is done that the string is a valid
domain type and then the input string is returned.  This is the
inverse of the domain_type() function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The domain type from one of topo.DOMAIN_*
integer values or a domain name string.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Domain name string associated with input.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.topo.domain_nested">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.topo.</span></span><span class="sig-name descname"><span class="pre">domain_nested</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inner_domain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outer_domain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outer_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.topo.domain_nested" title="Permalink to this definition"></a></dt>
<dd><p>Get a list of all inner domains nested within a specified outer
domain.  An exception is raised if the inner domain is not within
the outer domain or if the index is out of range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inner_domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The inner domain type from one of
topo.DOMAIN_* integer values or a domain name string.</p></li>
<li><p><strong>outer_domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The outer domain type from one of
topo.DOMAIN_* integer values or a domain name string.</p></li>
<li><p><strong>outer_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- Index of the outer domain that is queried.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The inner domain indices that are contained</dt><dd><p>within the specified outer domain.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.topo.domain_type">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.topo.</span></span><span class="sig-name descname"><span class="pre">domain_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.topo.domain_type" title="Permalink to this definition"></a></dt>
<dd><p>Returns the domain type that is associated with the provided domain
string.  If domain is of integer type, a check is done that it is
a valid topo.DOMAIN_* value and then the input value is returned.
This is the inverse of the domain_name() function.  If domain is a
string that does not match any of the valid domain names, or if domain
is an integer that is out of range an exception is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) -- A domain name string or the domain type
from one of topo.DOMAIN_* integer values.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A domain type matching one of the topo.DOMAIN_* values</dt><dd><p>associated with the input.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="geopmdpy.topo.num_domain">
<span class="sig-prename descclassname"><span class="pre">geopmdpy.topo.</span></span><span class="sig-name descname"><span class="pre">num_domain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geopmdpy.topo.num_domain" title="Permalink to this definition"></a></dt>
<dd><p>Get the number of domains available on the system of a specific
domain type.  If the domain is valid, but there are no domains of
that type on the system, the return value is zero.  Invalid domain
specificiation will result in a raised exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) -- The domain type from one of topo.DOMAIN_*
integer values or a domain name string.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The number of domains of the specified type available on</dt><dd><p>the system.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-geopmdpy.version">
<span id="geopmdpy-version"></span><h2>geopmdpy.version<a class="headerlink" href="#module-geopmdpy.version" title="Permalink to this heading"></a></h2>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading"></a></h2>
<p><a class="reference internal" href="geopmpy.7.html"><span class="doc">geopmpy(7)</span></a>,
<a class="reference internal" href="geopm_daemon.3.html"><span class="doc">geopm_daemon(3)</span></a>,
<a class="reference internal" href="GEOPM_CXX_MAN_Daemon.3.html"><span class="doc">geopm::Daemon(3)</span></a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="geopmwrite.1.html" class="btn btn-neutral float-left" title="geopmwrite(1) -- modify platform state" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="geopmpy.7.html" class="btn btn-neutral float-right" title="geopmpy(7) -- global extensible open power manager python package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015 - 2022, Intel Corporation. All rights reserved..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>