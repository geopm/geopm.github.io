

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>geopmsession(1) – sample platform information over time &mdash; GEOPM  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/colon_scheme_fix.js?v=ca089989"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="geopmwrite(1) – modify platform state" href="geopmwrite.1.html" />
    <link rel="prev" title="geopmread(1) – query platform information" href="geopmread.1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            GEOPM
              <img src="https://geopm.github.io/images/geopm-logo-clear.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin.html">Admin Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guides.html">User Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="contrib.html">Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="devel.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="reference.html">Reference Manual</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="reference.html#geopm-manual-pages">GEOPM Manual Pages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="geopm.7.html">geopm(7) – Global Extensible Open Power Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio.7.html">geopm_pio(7) – GEOPM PlatformIO interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_cnl.7.html">geopm_pio_cnl(7) – Signals and controls for Compute Node Linux Board-Level Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_const_config.7.html">geopm_pio_const_config(7) – Signals for ConstConfigIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_cpuinfo.7.html">geopm_pio_cpuinfo(7) – Signals and controls for the CPUInfoIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_dcgm.7.html">geopm_pio_dcgm(7) – IOGroup providing signals and controls for NVIDIA GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_levelzero.7.html">geopm_pio_levelzero(7) – IOGroup providing signals and controls for Intel GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_msr.7.html">geopm_pio_msr(7) – Signals and controls for Model Specific Registers (MSRs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_nvml.7.html">geopm_pio_nvml(7) – IOGroup providing signals and controls for NVIDIA GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_profile.7.html">geopm_pio_profile(7) – Signals and controls for the ProfileIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_service.7.html">geopm_pio_service(7) – Signals and controls for the ServiceIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_sst.7.html">geopm_pio_sst(7) – Signals and controls for Intel Speed Select Technology</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_sysfs.7.html">geopm_pio_sysfs(7) – Signals and controls for sysfs attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_time.7.html">geopm_pio_time(7) – Signals and controls for Time IO Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmaccess.1.html">geopmaccess(1) – Access management for the GEOPM Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmadmin.1.html">geopmadmin(1) – tool for GEOPM system administrators</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmagent.1.html">geopmagent(1) – query agent information and create static policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmbatch.1.html">geopmbatch(1) – Command line interface for the GEOPM batch server</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmbench.1.html">geopmbench(1) – synthetic benchmark application</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmctl.1.html">geopmctl(1) – GEOPM runtime control application</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmendpoint.1.html">geopmendpoint(1) – command line tool for dynamic policy control</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmexporter.1.html">geopmexporter(1) – Prometheus exporter for GEOPM metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmgrid.1.html">geopmgrid(1) – define control parameter grids</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmlaunch.1.html">geopmlaunch(1) – application launch wrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmopt.1.html">geopmopt(1) – Bayesian optimization for GEOPM control parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmread.1.html">geopmread(1) – query platform information</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">geopmsession(1) – sample platform information over time</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#options">Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#launch-option">Launch Option</a></li>
<li class="toctree-l4"><a class="reference internal" href="#agent-support">Agent Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gathering-reports-using-mpi">Gathering Reports using MPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#writing-a-custom-agent">Writing a Custom Agent</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="geopmwrite.1.html">geopmwrite(1) – modify platform state</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmdpy.7.html">geopmdpy(7) – global extensible open power manager python daemon package</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmpy.7.html">geopmpy(7) – global extensible open power manager python package</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent.3.html">geopm_agent(3) – query information about available agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_ctl.3.html">geopm_ctl(3) – GEOPM runtime control thread</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_daemon.3.html">geopm_daemon(3) – helpers for GEOPM daemons</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_endpoint.3.html">geopm_endpoint(3) – dynamic policy control for resource management</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_error.3.html">geopm_error(3) – error code descriptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_field.3.html">geopm_agent(3) – query information about available agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_fortran.3.html">geopm_fortran(3) – GEOPM fortran interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_hash.3.html">geopm_hash(3) – helper methods for encoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_imbalancer.3.html">geopm_imbalancer(3) – set artificial runtime imbalance</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio.3.html">geopm_pio(3) – interfaces to query and modify platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_policystore.3.html">geopm_policystore(3) – GEOPM resource policy store interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_prof.3.html">geopm_prof(3) – application profiling interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_sched.3.html">geopm_sched(3) – interface with Linux scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_time.3.html">geopm_time(3) – helper methods for time</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_topo.3.html">geopm_topo(3) – query platform component topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_version.3.html">geopm_version(3) – GEOPM library version</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AAgent.3.html">geopm::Agent(3) – GEOPM agent plugin interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AAgg.3.html">geopm::Agg(3) – data aggregation functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACNLIOGroup.3.html">geopm::CNLIOGroup(3) – IOGroup for interaction with Compute Node Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACPUActivityAgent.3.html">geopm::CPUActivityAgent(3) – agent for selecting CPU frequency based on CPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACircularBuffer.3.html">geopm::CircularBuffer(3) – generic circular buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AComm.3.html">geopm::Comm(3) – communication abstractions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACpuinfoIOGroup.3.html">geopm::CpuinfoIOGroup(3) – IOGroup for CPU frequency limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ADaemon.3.html">geopm::Daemon(3) – GEOPM daemon helper methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AEndpoint.3.html">geopm::Endpoint(3) – GEOPM endpoint interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AException.3.html">geopm::Exception(3) – custom GEOPM exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AGPUActivityAgent.3.html">geopm::GPUActivityAgent(3) – agent for selecting GPU frequency based on GPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AHelper.3.html">geopm::Helper – common helper methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AIOGroup.3.html">geopm::IOGroup(3) – provides system values and settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMPIComm.3.html">geopm::MPIComm(3) – implementation of Comm using MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMSRIO.3.html">geopm::MSRIO(3) – methods for reading and writing MSRs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMSRIOGroup.3.html">geopm::MSRIOGroup – IOGroup providing MSR-based signals and controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMonitorAgent.3.html">geopm::MonitorAgent – agent that enforces no policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APlatformIO.3.html">geopm::PlatformIO(3) – GEOPM platform interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APlatformTopo.3.html">geopm::PlatformTopo(3) – platform topology information</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APluginFactory.3.html">geopm::PluginFactory(3) – abstract factory for plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerBalancer.3.html">geopm::PowerBalancer(3) – balances power according to epoch runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerBalancerAgent.3.html">geopm::PowerBalancerAgent(3) – agent optimizing performance under a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerGovernor.3.html">geopm::PowerGovernor(3) – enforces a power limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerGovernorAgent.3.html">geopm::PowerGovernorAgent(3) – agent that enforces a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AProfileIOGroup.3.html">geopm::ProfileIOGroup(3) – IOGroup providing application signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ASampleAggregator.3.html">geopm::SampleAggregator(3) – per-region aggregated signal data</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ASharedMemory.3.html">geopm::SharedMemory(3) – abstractions for shared memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ATimeIOGroup.3.html">geopm::TimeIOGroup(3) – IOGroup providing time signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_report.7.html">geopm_report(7) – GEOPM summary report file</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_cpu_activity.7.html">geopm_agent_cpu_activity(7) – agent for selecting CPU frequency based on CPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_ffnet.7.html">geopm_agent_ffnet(7) – agent for adjusting frequencies based on application behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_frequency_balancer.7.html">geopm_agent_frequency_balancer(7) – Agent reduces imbalance across CPU cores</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_frequency_map.7.html">geopm_agent_frequency_map(7) – agent for running regions at user selected frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_gpu_activity.7.html">geopm_agent_gpu_activity(7) – agent for selecting GPU frequency based on GPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_monitor.7.html">geopm_agent_monitor(7) – agent implementation for aggregating statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_power_balancer.7.html">geopm_agent_power_balancer(7) – agent optimizes performance under a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_power_governor.7.html">geopm_agent_power_governor(7) – agent enforces a power cap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#doxygen-pages">Doxygen Pages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Releases</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GEOPM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="reference.html">Reference Manual</a></li>
      <li class="breadcrumb-item active">geopmsession(1) – sample platform information over time</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/geopmsession.1.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="geopmsession-1-sample-platform-information-over-time">
<h1>geopmsession(1) – sample platform information over time<a class="headerlink" href="#geopmsession-1-sample-platform-information-over-time" title="Link to this heading"></a></h1>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage:<span class="w"> </span>geopmsession<span class="w"> </span><span class="o">[</span>-h<span class="o">]</span><span class="w"> </span><span class="o">[</span>-v<span class="o">]</span><span class="w"> </span><span class="o">[</span>-t<span class="w"> </span>TIME<span class="o">]</span><span class="w"> </span><span class="o">[</span>-p<span class="w"> </span>PERIOD<span class="o">]</span><span class="w"> </span><span class="o">[</span>--pid<span class="w"> </span>PID<span class="o">]</span>
<span class="w">                    </span><span class="o">[</span>--print-header<span class="w"> </span><span class="p">|</span><span class="w"> </span>-n<span class="o">]</span><span class="w"> </span><span class="o">[</span>-d<span class="w"> </span>DELIMITER<span class="o">]</span>
<span class="w">                    </span><span class="o">[</span>-r<span class="w"> </span>REPORT_OUT<span class="o">]</span><span class="w"> </span><span class="o">[</span>-o<span class="w"> </span>TRACE_OUT<span class="o">]</span><span class="w"> </span><span class="o">[</span>-f<span class="w"> </span>REPORT_FORMAT<span class="o">]</span>
<span class="w">                    </span><span class="o">[</span>-s<span class="w"> </span>REPORT_SAMPLES<span class="o">]</span><span class="w"> </span><span class="o">[</span>-i<span class="w"> </span>CONFIG_PATH<span class="o">]</span><span class="w"> </span><span class="o">[</span>-a<span class="o">]</span>
<span class="w">                    </span><span class="o">[</span>--daemon<span class="w"> </span>DAEMON_PID_FILE<span class="w"> </span><span class="p">|</span><span class="w"> </span>--enable-mpi<span class="o">]</span>
<span class="w">                    </span><span class="o">[</span>--<span class="w"> </span>LAUNCH<span class="w"> </span>...<span class="o">]</span>
</pre></div>
</div>
<section id="read-a-signal">
<h3>Read a signal<a class="headerlink" href="#read-a-signal" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SIGNAL_NAME DOMAIN DOMAIN_IDX&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmsession
</pre></div>
</div>
</section>
<section id="read-a-signal-at-a-specific-period-for-a-specific-timeout">
<h3>Read a signal at a specific period for a specific timeout<a class="headerlink" href="#read-a-signal-at-a-specific-period-for-a-specific-timeout" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geopmsession<span class="w"> </span>-p<span class="w"> </span>PERIOD_IN_SECONDS<span class="w"> </span>-t<span class="w"> </span>TIMEOUT_IN_SECONDS
geopmsession<span class="w"> </span>--period<span class="w"> </span>PERIOD_IN_SECONDS<span class="w"> </span>--time<span class="w"> </span>TIMEOUT_IN_SECONDS
</pre></div>
</div>
</section>
<section id="read-a-set-of-signals">
<h3>Read a set of signals<a class="headerlink" href="#read-a-set-of-signals" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;TIME board 0\nCPU_FREQUENCY_STATUS package 0&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmsession<span class="w"> </span>-n
</pre></div>
</div>
</section>
<section id="get-help-or-version">
<h3>Get Help or Version<a class="headerlink" href="#get-help-or-version" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geopmsession<span class="w"> </span>-h
geopmsession<span class="w"> </span>--help
</pre></div>
</div>
</section>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading"></a></h2>
<p>Command line interface for the GEOPM service batch read features. The input to
the command line tool has one request per line. A request for reading is made up
of three strings separated by white space. The first string is the signal name,
the second string is the domain name, and the third string is the domain index.
Provide the “<code class="docutils literal notranslate"><span class="pre">*</span></code>” character as the second string to request the native domain
for the signal.  Provide the “<code class="docutils literal notranslate"><span class="pre">*</span></code>” character as the third string to request
all domains available on the system.</p>
<p>A descriptive header is written first, unless the <code class="docutils literal notranslate"><span class="pre">-n</span></code> option is specified, in
which case the header omitted.  The output from reading values is printed
subsequently in CSV format.  By default, only one line of CSV will be generated.
Use <code class="docutils literal notranslate"><span class="pre">-p</span></code> to create a CSV with multiple rows providing a time series of
measurements.</p>
</section>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Link to this heading"></a></h2>
<dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p id="help-option">Print help message and exit.</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--version</span></kbd></dt>
<dd><p id="version-option">Print version and exit.</p>
</dd>
<dt><kbd><span class="option">-t <var>TIME</var></span>, <span class="option">--time <var>TIME</var></span></kbd></dt>
<dd><p id="time-option">Total run time of the session to be opened in seconds.</p>
</dd>
<dt><kbd><span class="option">-p <var>PERIOD</var></span>, <span class="option">--period <var>PERIOD</var></span></kbd></dt>
<dd><p id="period-option">When used with a read mode session reads all values out periodically with
the specified period in seconds.  Default: 0.1 second.</p>
</dd>
<dt><kbd><span class="option">--pid <var>PID</var></span></kbd></dt>
<dd><p id="pid-option">Stop the session when the given process PID ends.</p>
</dd>
<dt><kbd><span class="option">--print-header</span></kbd></dt>
<dd><p id="printheader-option">Deprecated. Now this option is the default, see –no-header.</p>
</dd>
<dt><kbd><span class="option">-n</span>, <span class="option">--no-header</span></kbd></dt>
<dd><p id="header-option">Do not print the CSV header before printing any sampled values.</p>
</dd>
<dt><kbd><span class="option">-d</span>, <span class="option">--delimiter</span></kbd></dt>
<dd><p id="delimiter-delimiter-option">Delimiter used to separate values in CSV output. Default: “,”.</p>
</dd>
<dt><kbd><span class="option">-r</span>, <span class="option">--report-out</span></kbd></dt>
<dd><p id="reportout-report-out-option">Output summary statistics into a yaml file. Note if <code class="docutils literal notranslate"><span class="pre">--report-out=-</span></code> is
specified, the report will output to stdout. When used with the
<code class="docutils literal notranslate"><span class="pre">--enable-mpi</span></code> option, reports from all hosts will be combined using the
<code class="docutils literal notranslate"><span class="pre">---</span></code> document separator, and the output is written (stdout or to file) solely
by the MPI process “rank 0”.</p>
</dd>
<dt><kbd><span class="option">-o</span>, <span class="option">--trace-out</span></kbd></dt>
<dd><p id="traceout-trace-out-option">Output trace data into a CSV file. Note if <code class="docutils literal notranslate"><span class="pre">--trace_out=-</span></code> is specified,
the trace will output to stdout which is also the default behavior. To avoid
gathering trace data, set this parameter to <code class="docutils literal notranslate"><span class="pre">/dev/null</span></code>.  When used with
the <code class="docutils literal notranslate"><span class="pre">--enable-mpi</span></code> option, trace file names will be appended with the
hostname combined with the <code class="docutils literal notranslate"><span class="pre">-</span></code> separator.  It is not possible to write the
trace output to stdout when specifying <code class="docutils literal notranslate"><span class="pre">--enable-mpi</span></code>, this will result in
an error.</p>
</dd>
<dt><kbd><span class="option">-f</span>, <span class="option">--report-format</span></kbd></dt>
<dd><p id="reporformat-report-format-option">Generate reports in the specified format, either “csv” or “yaml”.
Default: “yaml”.</p>
</dd>
<dt><kbd><span class="option">-s</span>, <span class="option">--report-samples</span></kbd></dt>
<dd><p id="reportsamples-report-samples-option">Create reports each time the specified number of periods have
elapsed.  When in YAML format, the reports are YAML documents
separated with the document separator string: <code class="docutils literal notranslate"><span class="pre">&quot;---&quot;</span></code>.  When
in CSV format, each report is one line of the CSV output.</p>
</dd>
<dt><kbd><span class="option">-i</span>, <span class="option">--signal-config</span></kbd></dt>
<dd><p id="configpath-config-path-option">Input file containing GEOPM signal requests, specify “-” to use
standard input which is also the default.</p>
</dd>
<dt><kbd><span class="option">--daemon</span></kbd></dt>
<dd><p id="daemon-daemon-pid-file-option">Run geopmsession as a background daemon. The daemon PID is written to the
specified file after startup and the invoking command returns immediately
once the session is ready. A signal configuration file must be provided
(standard input is not supported when using this option). Using
<code class="docutils literal notranslate"><span class="pre">--enable-mpi</span></code> is not allowed when specifying this option, consider
using <code class="docutils literal notranslate"><span class="pre">--append-hostname</span></code> instead.</p>
</dd>
<dt><kbd><span class="option">-a</span>, <span class="option">--append-hostname</span></kbd></dt>
<dd><p id="appendhostname-option">Append the local hostname to report and trace file paths when they are
regular files. This keeps per-host outputs unique on shared filesystems.</p>
</dd>
<dt><kbd><span class="option">--enable-mpi</span></kbd></dt>
<dd><p id="enablempi-option">Gather reports over MPI and write to a single file. Append hostname to trace
output file if specified (trace output to stdout not permitted). Requires
mpi4py module.</p>
</dd>
</dl>
</section>
<section id="launch-option">
<h2>Launch Option<a class="headerlink" href="#launch-option" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">geopmsession</span></code> tool may be used to launch and monitor a subprocess, terminating
the session when the process exits. To use this feature, provide a command after
a double dash (<code class="docutils literal notranslate"><span class="pre">--</span></code>). For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>TIME<span class="w"> </span>board<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmsession<span class="w"> </span>-p<span class="w"> </span><span class="m">1</span><span class="w"> </span>--<span class="w"> </span>sleep<span class="w"> </span><span class="m">5</span>
<span class="s2">&quot;TIME&quot;</span>
<span class="m">0</span>.001785301
<span class="m">1</span>.008901696
<span class="m">2</span>.008939004
<span class="m">3</span>.009074361
<span class="m">4</span>.009136714
<span class="m">5</span>.009231953
<span class="m">6</span>.009308985
</pre></div>
</div>
<p>This will launch <code class="docutils literal notranslate"><span class="pre">sleep</span> <span class="pre">5</span></code> as a subprocess and monitor the TIME signal until
the process exits. Using the <code class="docutils literal notranslate"><span class="pre">--pid</span></code> and the launch option at the same
time is forbidden.</p>
<p>If the geopmsession process receives a SIGTERM and SIGINT or fails dues to an
unmanaged exception, the signal is forwarded to the subprocess and all of its
children followed by SIGKILL after 1 second.  If the geopmsession command fails
due to an exception then the first signal sent is SIGINT.</p>
<p>If using <code class="docutils literal notranslate"><span class="pre">--enable-mpi</span></code> with the launch option, note that each MPI rank will
launch its own subprocess, which may not be the intended behavior for MPI
applications.</p>
</section>
<section id="agent-support">
<h2>Agent Support<a class="headerlink" href="#agent-support" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">geopmsession</span></code> tool supports Python agent plugins that can customize session
behavior. An agent is a Python class derived from the <code class="docutils literal notranslate"><span class="pre">Agent</span></code> base class in
<code class="docutils literal notranslate"><span class="pre">geopmdpy.session</span></code>. Agents can add custom command-line arguments, override the
default signal configuration, and provide additional trace columns.  The agent
can also implement custom logic for each sampling period including the ability
to modify control knobs dynamically. The agent implementation uses the <code class="docutils literal notranslate"><span class="pre">main()</span></code>
function from the <code class="docutils literal notranslate"><span class="pre">geopmdpy.session</span></code> module as the entry point.</p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<p>Some examples of how to use the <code class="docutils literal notranslate"><span class="pre">geopmsession</span></code> command line tool are
provided.</p>
<section id="reading-a-signal">
<h3>Reading a signal<a class="headerlink" href="#reading-a-signal" title="Link to this heading"></a></h3>
<p>The input to the command line tool has one request per line.  A
request for reading is made of up three strings separated by white
space.  The first string is the signal name, the second string is the
domain name, and the third string is the domain index.  An asterisk <code class="docutils literal notranslate"><span class="pre">*</span></code>
in place of the domain name will evaluate to the native domain of the signal.
An asterisk <code class="docutils literal notranslate"><span class="pre">*</span></code> in place of the domain index will result in the signal being
read for all available domain indices on the system for the specified domain type.</p>
<p>An example where the entire <code class="docutils literal notranslate"><span class="pre">THERM_STATUS</span></code> model specific register is read from
core zero:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;MSR::THERM_STATUS# core 0&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmsession<span class="w"> </span>-n
<span class="go">0x0000000088430800</span>
</pre></div>
</div>
<p>This will execute one read of the signal.</p>
<p>A couple of examples reading <code class="docutils literal notranslate"><span class="pre">CPU_POWER</span></code> using <code class="docutils literal notranslate"><span class="pre">*</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;CPU_POWER * 1&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmsession<span class="w"> </span>-n
<span class="go">62.95697469659621</span>
<span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;CPU_POWER * *&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmsession<span class="w"> </span>-n
<span class="go">69.16105633883998,74.9419453995438</span>
</pre></div>
</div>
</section>
<section id="reading-a-signal-periodically">
<h3>Reading a signal periodically<a class="headerlink" href="#reading-a-signal-periodically" title="Link to this heading"></a></h3>
<p>Both a polling period and timeout must be specified.
The polling period must be shorter than the timeout specified.</p>
<p>A 100ms polling period with a 300ms timeout is shown below:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;MSR::THERM_STATUS# core 0&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmsession<span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>.1<span class="w"> </span>-t<span class="w"> </span><span class="m">0</span>.3<span class="w"> </span>-n
<span class="go">0x0000000088350800</span>
<span class="go">0x0000000088350800</span>
<span class="go">0x0000000088350800</span>
<span class="go">0x0000000088360800</span>
</pre></div>
</div>
</section>
<section id="reading-a-set-of-signals">
<h3>Reading a set of signals<a class="headerlink" href="#reading-a-set-of-signals" title="Link to this heading"></a></h3>
<p>Multiple signals may be specified by separating them with a newline.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;TIME board 0\nCPU_FREQUENCY_STATUS package *\nCPU_ENERGY package *\n&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>session.config
<span class="gp">$ </span>geopmsession<span class="w"> </span>-i<span class="w"> </span>config.txt
<span class="go">&quot;TIME&quot;,&quot;CPU_FREQUENCY_STATUS-package-0&quot;,&quot;CPU_FREQUENCY_STATUS-package-1&quot;,&quot;CPU_ENERGY-package-0&quot;,&quot;CPU_ENERGY-package-1&quot;</span>
<span class="go">0.658525605,1000000000,1105000000,51985.06903076172,216490.1282958984</span>
</pre></div>
</div>
<p>Signals may be specified in a separate file using the <code class="docutils literal notranslate"><span class="pre">-i</span></code> option.</p>
</section>
<section id="reading-a-set-of-signals-and-getting-summary-statistics">
<h3>Reading a set of signals and getting summary statistics<a class="headerlink" href="#reading-a-set-of-signals-and-getting-summary-statistics" title="Link to this heading"></a></h3>
<p>Summary statistics may be output to stdout by setting <code class="docutils literal notranslate"><span class="pre">--report-out=-</span></code>.
Otherwise, the statistics will be output to the specified file path. If
unspecified, no statistics will be gathered.</p>
<p>The resulting report will be in yaml by default. To output as a csv, use the
<code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">csv</span></code> option. Hostname and sample information will be output at the top.
Summary statistics (count/first/last/min/max/mean/std) will be output
for each of the specified signals at the specified domains/domain indices.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;TIME board 0\nCPU_POWER board 0\nCPU_FREQUENCY_STATUS board 0\n&#39;</span><span class="w"> </span><span class="p">|</span><span class="se">\</span>
<span class="w">    </span>geopmsession<span class="w"> </span>-t<span class="w"> </span><span class="m">10</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>.005<span class="w"> </span>--report-out<span class="o">=</span>-<span class="w"> </span>--trace-out<span class="o">=</span>/dev/null
</pre></div>
</div>
<p>An example yaml report is shown below:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cluster-node-11&quot;</span>
<span class="nt">sample-time-first</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-05-16T09:08:53.160991796-0700&quot;</span>
<span class="nt">sample-time-total</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0013</span>
<span class="nt">sample-count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="nt">sample-period-mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.00500067</span>
<span class="nt">sample-period-std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.000494084</span>
<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="nt">TIME</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.13225</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11.1336</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.13225</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11.1336</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6.13339</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.88899</span>
<span class="w">  </span><span class="nt">CPU_POWER</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">81.3372</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">114.556</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">81.3372</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">145.638</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">117.871</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7.55413</span>
<span class="w">  </span><span class="nt">CPU_FREQUENCY_STATUS</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0775e+09</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0375e+09</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e+09</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.3325e+09</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.07005e+09</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.80748e+07</span>
</pre></div>
</div>
<p>The same report rendered into csv format:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;host&quot;,&quot;sample-time-first&quot;,&quot;sample-time-total&quot;,&quot;sample-count&quot;,&quot;sample-period-mean&quot;,&quot;sample-period-std&quot;,&quot;CPU_FREQUENCY_STATUS-count&quot;,&quot;CPU_FREQUENCY_STATUS-first&quot;,&quot;CPU_FREQUENCY_STATUS-last&quot;,&quot;CPU_FREQUENCY_STATUS-min&quot;,&quot;CPU_FREQUENCY_STATUS-max&quot;,&quot;CPU_FREQUENCY_STATUS-mean&quot;,&quot;CPU_FREQUENCY_STATUS-std&quot;,&quot;CPU_POWER-count&quot;,&quot;CPU_POWER-first&quot;,&quot;CPU_POWER-last&quot;,&quot;CPU_POWER-min&quot;,&quot;CPU_POWER-max&quot;,&quot;CPU_POWER-mean&quot;,&quot;CPU_POWER-std&quot;,&quot;TIME-count&quot;,&quot;TIME-first&quot;,&quot;TIME-last&quot;,&quot;TIME-min&quot;,&quot;TIME-max&quot;,&quot;TIME-mean&quot;,&quot;TIME-std&quot;
&quot;cluster-node-11&quot;,&quot;2025-05-16T09:09:16.559516035-0700&quot;,10.000596301,2001,0.0050002981505,0.0004777162996813195,2001,1085000000.0,1172500000.0,1000000000.0,1282500000.0,1071716016.9915042,38699360.87433021,2001,134.5205438626066,132.45502415239116,104.55274444442776,148.3458434284852,119.53508979088977,5.258855212642797,2001,1.574881395,11.575477696,1.574881395,11.575477696,6.576009187958503,2.888976620038315
</pre></div>
</div>
</section>
<section id="launching-a-process-and-monitoring-signals">
<h3>Launching a process and monitoring signals<a class="headerlink" href="#launching-a-process-and-monitoring-signals" title="Link to this heading"></a></h3>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span>TIME<span class="w"> </span>board<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmsession<span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>.5<span class="w"> </span>--<span class="w"> </span>sleep<span class="w"> </span><span class="m">5</span>
<span class="go">&quot;TIME&quot;</span>
<span class="go">0.005026064</span>
<span class="go">0.513985594</span>
<span class="go">1.013916775</span>
<span class="go">1.513919136</span>
<span class="go">2.013917347</span>
<span class="go">2.513900635</span>
<span class="go">3.0139143</span>
<span class="go">3.513901374</span>
<span class="go">4.013907436</span>
<span class="go">4.513900239</span>
<span class="go">5.013895239</span>
<span class="go">5.513876408</span>
</pre></div>
</div>
<p>This launches <code class="docutils literal notranslate"><span class="pre">sleep</span> <span class="pre">5</span></code> and monitors the TIME signal until it detects that the
<code class="docutils literal notranslate"><span class="pre">sleep</span></code> command has exited.</p>
</section>
<section id="reading-signals-during-a-job-execution">
<span id="geopmsession-1-reading-signals-during-a-job-execution"></span><h3>Reading signals during a job execution<a class="headerlink" href="#reading-signals-during-a-job-execution" title="Link to this heading"></a></h3>
<p>Signals can be read and summary statistics gathered during job execution using
the launch or <code class="docutils literal notranslate"><span class="pre">--pid</span></code> option. If both the <code class="docutils literal notranslate"><span class="pre">--pid</span></code> and <code class="docutils literal notranslate"><span class="pre">-t</span></code> options are used,
geopmsession will end when either the process ends or when the specified time
elapses, whichever is shorter. Below is an example gathering <code class="docutils literal notranslate"><span class="pre">CPU_POWER</span></code>
while running <code class="docutils literal notranslate"><span class="pre">sleep</span></code>.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;CPU_POWER package 0&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmsession<span class="w"> </span>-p<span class="w"> </span><span class="m">1</span><span class="w"> </span>--<span class="w"> </span>sleep<span class="w"> </span><span class="m">5</span>
<span class="go">&quot;CPU_POWER-package-0&quot;</span>
<span class="go">62.54857725485511</span>
<span class="go">50.5686841290089</span>
<span class="go">57.63407322142274</span>
<span class="go">61.1508168939381</span>
<span class="go">60.71903156269835</span>
<span class="go">59.50978494274343</span>
<span class="go">58.25752970206295</span>
</pre></div>
</div>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sleep<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="p">&amp;</span><span class="w"> </span><span class="nv">apppid</span><span class="o">=</span><span class="nv">$!</span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;CPU_POWER package 0&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmsession<span class="w"> </span>--pid<span class="w"> </span><span class="nv">$apppid</span><span class="w"> </span>-p<span class="w"> </span><span class="m">1</span>
<span class="go">   [1] 3100339</span>
<span class="go">   &quot;CPU_POWER-package-0&quot;</span>
<span class="go">   30.59618629083503</span>
<span class="go">   40.73598509986576</span>
<span class="go">   38.79754643472621</span>
<span class="go">   39.32981634681103</span>
<span class="go">   38.70242242812028</span>
<span class="go">   [1]+  Done                    sleep 5</span>
</pre></div>
</div>
<p>An example gathering summary statistics while executing a job:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;CPU_POWER package 0&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmsession<span class="w"> </span>-p<span class="w"> </span><span class="m">1</span><span class="w"> </span>-r<span class="w"> </span>-<span class="w"> </span>--<span class="w"> </span>sleep<span class="w"> </span><span class="m">5</span>
<span class="go">&quot;CPU_POWER-package-0&quot;</span>
<span class="go">39.15323231457158</span>
<span class="go">39.9597792259686</span>
<span class="go">40.38713156571379</span>
<span class="go">40.3391948981358</span>
<span class="go">40.10173665761857</span>
<span class="go">39.93951912781292</span>
<span class="go">39.83074165703577</span>
<span class="go">host: &quot;cluster-node-11&quot;</span>
<span class="go">sample-time-first: &quot;2025-05-16T09:19:42.253776983-0700&quot;</span>
<span class="go">sample-time-total: 6.00905</span>
<span class="go">sample-count: 7</span>
<span class="go">sample-period-mean: 1.00151</span>
<span class="go">sample-period-std: 0.00372384</span>
<span class="go">metrics:</span>
<span class="go">  CPU_POWER-package-0:</span>
<span class="go">    count: 7</span>
<span class="go">    first: 39.1532</span>
<span class="go">    last: 39.8307</span>
<span class="go">    min: 39.1532</span>
<span class="go">    max: 40.3871</span>
<span class="go">    mean: 39.9588</span>
<span class="go">    std: 0.411159</span>
</pre></div>
</div>
<p>Note that the samples are output followed by summary statistics. To output the
sample trace to a file, use <code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">[filename]</span></code>. To output the summary statistics
report to a file, use <code class="docutils literal notranslate"><span class="pre">-r</span> <span class="pre">[filename]</span></code>. To suppress the trace, set the output
parameter to <code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">/dev/null</span></code>. Reports will not output if <code class="docutils literal notranslate"><span class="pre">-r</span></code> is not specified.</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">[REPORT_SAMPLES]</span></code> option will generate statistics after the
specified number of samples. In default yaml format, sets of statistics will
be separated by “—”. In csv format, each set of statistics will be output as
a row.</p>
<p>Example:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sleep<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="p">&amp;</span><span class="w"> </span><span class="nv">apppid</span><span class="o">=</span><span class="nv">$!</span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;CPU_POWER package 0&quot;</span><span class="w"> </span><span class="p">|</span><span class="se">\</span>
<span class="w">  </span>geopmsession<span class="w"> </span>--pid<span class="w"> </span><span class="nv">$apppid</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>.1<span class="w"> </span>-r<span class="w"> </span>-<span class="w"> </span>-o<span class="w"> </span>/dev/null<span class="w"> </span>-s<span class="w"> </span><span class="m">10</span>
</pre></div>
</div>
<p>In the yaml output below, note that each report is appended, separated by
“—“.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cluster-node-11&quot;</span>
<span class="nt">sample-time-first</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-05-16T09:21:12.854647716-0700&quot;</span>
<span class="nt">sample-time-total</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0005</span>
<span class="nt">sample-count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="nt">sample-period-mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.10005</span>
<span class="nt">sample-period-std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.00017891</span>
<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="nt">CPU_POWER-package-0</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">26.1087</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">41.1297</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">26.1087</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">42.36</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">37.5301</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.85142</span>

<span class="nn">---</span>

<span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cluster-node-11&quot;</span>
<span class="nt">sample-time-first</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-05-16T09:21:13.955151931-0700&quot;</span>
<span class="nt">sample-time-total</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.899985</span>
<span class="nt">sample-count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="nt">sample-period-mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0999983</span>
<span class="nt">sample-period-std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7.34092e-05</span>
<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="nt">CPU_POWER-package-0</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39.0531</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39.4301</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">35.197</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40.6032</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">38.1963</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.09879</span>

<span class="nn">---</span>

<span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cluster-node-11&quot;</span>
<span class="nt">sample-time-first</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-05-16T09:21:14.955165125-0700&quot;</span>
<span class="nt">sample-time-total</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.899977</span>
<span class="nt">sample-count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="nt">sample-period-mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0999974</span>
<span class="nt">sample-period-std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.01953e-05</span>
<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="nt">CPU_POWER-package-0</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">37.8657</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">41.0475</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">36.256</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">44.8203</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40.6383</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.36432</span>

<span class="nn">---</span>

<span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cluster-node-11&quot;</span>
<span class="nt">sample-time-first</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-05-16T09:21:15.955163708-0700&quot;</span>
<span class="nt">sample-time-total</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.600004</span>
<span class="nt">sample-count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
<span class="nt">sample-period-mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.100001</span>
<span class="nt">sample-period-std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.000118453</span>
<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="nt">CPU_POWER-package-0</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">38.3654</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39.4388</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">34.8214</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">39.4388</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">36.8331</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.82103</span>
</pre></div>
</div>
<p>Sample csv output below shows each statistics sample output on a new row:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sleep<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="p">&amp;</span><span class="w"> </span><span class="nv">apppid</span><span class="o">=</span><span class="nv">$!</span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;CPU_POWER package 0&quot;</span><span class="w"> </span><span class="p">|</span><span class="se">\</span>
geopmsession<span class="w"> </span>--pid<span class="w"> </span><span class="nv">$apppid</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>.1<span class="w"> </span>-r<span class="w"> </span>-<span class="w"> </span>-o<span class="w"> </span>/dev/null<span class="w"> </span>-s<span class="w"> </span><span class="m">10</span><span class="w"> </span>-f<span class="w"> </span>csv
<span class="go">&quot;host&quot;,&quot;sample-time-first&quot;,&quot;sample-time-total&quot;,&quot;sample-count&quot;,&quot;sample-period-mean&quot;,&quot;sample-period-std&quot;,&quot;CPU_POWER-package-0-count&quot;,&quot;CPU_POWER-package-0-first&quot;,&quot;CPU_POWER-package-0-last&quot;,&quot;CPU_POWER-package-0-min&quot;,&quot;CPU_POWER-package-0-max&quot;,&quot;CPU_POWER-package-0-mean&quot;,&quot;CPU_POWER-package-0-std&quot;</span>
<span class="go">&quot;cluster-node-11&quot;,&quot;2025-05-16T09:23:33.620790309-0700&quot;,1.000574921,11,0.10005749209999999,0.0001964757920469247,11,39.44969148140212,41.9486178974159,34.84014539393113,41.9486178974159,36.49265394626341,2.465552738326359</span>
<span class="go">&quot;cluster-node-11&quot;,&quot;2025-05-16T09:23:34.721404331-0700&quot;,0.899903938,10,0.09998932644444444,3.917289581063831e-05,10,43.77618495751115,39.447376090215,35.07951019074365,44.37725410303373,39.60711256469672,3.6046116965994814</span>
<span class="go">&quot;cluster-node-11&quot;,&quot;2025-05-16T09:23:35.721373075-0700&quot;,0.8999950860000001,10,0.09999945400000002,0.00010700698475670486,10,40.55431660299817,39.64840048680215,34.56523283529788,40.81876798613059,38.042165265899925,2.384395315318058</span>
<span class="go">&quot;cluster-node-11&quot;,&quot;2025-05-16T09:23:36.721240770-0700&quot;,0.6000795879999998,7,0.10001326466666664,7.467743569208487e-05,7,40.97335095740563,34.912491389496914,34.912491389496914,41.4496234018482,38.75680603826903,2.716795748688028</span>
</pre></div>
</div>
</section>
</section>
<section id="gathering-reports-using-mpi">
<h2>Gathering Reports using MPI<a class="headerlink" href="#gathering-reports-using-mpi" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">--enable-mpi</span></code> command line option can be used to aggregate reports using
an MPI communicator.  This can be helpful when running sessions on more than one
compute node in an MPI enabled environment.  The user must install the optional
<code class="docutils literal notranslate"><span class="pre">mpi4py</span></code> package to use the <code class="docutils literal notranslate"><span class="pre">--enable-mpi</span></code> command line option .  This can
be done using the OS package manager or PyPi.  When running in this way the
<code class="docutils literal notranslate"><span class="pre">geopmsession</span></code> command line tool must be launched with an MPI launch wrapper
like <code class="docutils literal notranslate"><span class="pre">mpiexec</span></code> or <code class="docutils literal notranslate"><span class="pre">mpirun</span></code>.  The user should run this command specifying one
<code class="docutils literal notranslate"><span class="pre">geopmsession</span></code> process per compute node.  When using this option, trace output
to stdout is disabled.  The aggregated report is created by the “rank 0” process
of the geopmsession MPI communicator.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;TIME board 0\nCPU_POWER board 0\nCPU_FREQUENCY_STATUS board 0&quot;</span><span class="w"> </span><span class="p">|</span><span class="se">\</span>
<span class="w">     </span>srun<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span><span class="w"> </span>-N<span class="w"> </span><span class="m">2</span><span class="w"> </span>geopmsession<span class="w"> </span>-t<span class="w"> </span><span class="m">10</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>.005<span class="w">  </span>-r-<span class="w"> </span>-o<span class="w"> </span>/dev/null<span class="w"> </span>--enable-mpi
</pre></div>
</div>
<p>An example report is shown below:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cluster-node-11&quot;</span>
<span class="nt">sample-time-first</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-05-16T09:26:37.114177564-0700&quot;</span>
<span class="nt">sample-time-total</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0011</span>
<span class="nt">sample-count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="nt">sample-period-mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.00500056</span>
<span class="nt">sample-period-std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.000493951</span>
<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="nt">TIME</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.668767</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.6699</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.668767</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.6699</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.66989</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.88899</span>
<span class="w">  </span><span class="nt">CPU_POWER</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">84.186</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">117.827</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">77.7429</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">141.491</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">118.953</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7.03585</span>
<span class="w">  </span><span class="nt">CPU_FREQUENCY_STATUS</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.04375e+09</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.035e+09</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e+09</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.25625e+09</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.07255e+09</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.91874e+07</span>

<span class="nn">---</span>

<span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cluster-node-12&quot;</span>
<span class="nt">sample-time-first</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-05-16T09:26:37.112549059-0700&quot;</span>
<span class="nt">sample-time-total</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0012</span>
<span class="nt">sample-count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="nt">sample-period-mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.00500062</span>
<span class="nt">sample-period-std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.000465038</span>
<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="nt">TIME</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.10684</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11.1081</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.10684</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11.1081</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6.10793</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.88901</span>
<span class="w">  </span><span class="nt">CPU_POWER</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">76.1151</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">118.133</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">76.1151</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">142.527</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">119.894</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7.05624</span>
<span class="w">  </span><span class="nt">CPU_FREQUENCY_STATUS</span><span class="p">:</span>
<span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.045e+09</span>
<span class="w">    </span><span class="nt">last</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.045e+09</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e+09</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.28e+09</span>
<span class="w">    </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.07346e+09</span>
<span class="w">    </span><span class="nt">std</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.24776e+07</span>
</pre></div>
</div>
</section>
<section id="writing-a-custom-agent">
<h2>Writing a Custom Agent<a class="headerlink" href="#writing-a-custom-agent" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">geopmsession</span></code> command line tool supports Python agent plugins that can
customize session behavior. This example shows a simple agent that monitors the
<code class="docutils literal notranslate"><span class="pre">CPU_POWER</span></code> signal at high or low resolution.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># File: cpu_power_agent.py</span>
<span class="kn">from</span> <span class="nn">geopmdpy.session</span> <span class="kn">import</span> <span class="n">main</span>
<span class="kn">from</span> <span class="nn">geopmdpy.session</span> <span class="kn">import</span> <span class="n">Agent</span>

<span class="k">class</span> <span class="nc">CPUPowerAgent</span><span class="p">(</span><span class="n">Agent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Agent for monitoring CPU power.</span>

<span class="sd">    The CPUPowerAgent provides a --hi-res option to read CPU power at the</span>
<span class="sd">    finest granularity available. This allows users to measure CPU power from</span>
<span class="sd">    all domains and indices. By default, CPU power is sampled at the board</span>
<span class="sd">    domain.</span>

<span class="sd">    Command-line options:</span>
<span class="sd">      --hi-res   Measure at finest granularity (all domains/indices).</span>

<span class="sd">    Example:</span>
<span class="sd">        python3 cpu_power_agent.py --hi-res -- sleep 5</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hi_res</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;Measure CPU_POWER as default signal configuration&#39;</span>

    <span class="k">def</span> <span class="nf">update_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">):</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--hi-res&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Measure power at finest granularity (all domains/indices)&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span>

    <span class="k">def</span> <span class="nf">update_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hi_res</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">hi_res</span>
        <span class="k">return</span> <span class="n">args</span>

    <span class="k">def</span> <span class="nf">signal_config_override</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hi_res</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;CPU_POWER * *&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;CPU_POWER board 0&quot;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">(</span><span class="n">CPUPowerAgent</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="geopm.7.html"><span class="doc">geopm(7)</span></a>,
<a class="reference internal" href="geopm_pio.7.html"><span class="doc">geopm_pio(7)</span></a>,
<a class="reference internal" href="geopmread.1.html"><span class="doc">geopmread(1)</span></a>,
<a class="reference internal" href="geopmwrite.1.html"><span class="doc">geopmwrite(1)</span></a>,</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="geopmread.1.html" class="btn btn-neutral float-left" title="geopmread(1) – query platform information" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="geopmwrite.1.html" class="btn btn-neutral float-right" title="geopmwrite(1) – modify platform state" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015 - 2025 Intel Corporation. All rights reserved..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>