<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>geopm_endpoint(3) – dynamic policy control for resource management &mdash; GEOPM  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="geopm_error(3) – error code descriptions" href="geopm_error.3.html" />
    <link rel="prev" title="geopm_daemon(3) – helpers for GEOPM daemons" href="geopm_daemon.3.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            GEOPM
              <img src="https://geopm.github.io/images/geopm-logo-clear.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.1.1.dev148+g784219e0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guides.html">User Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="contrib.html">Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="devel.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="reference.html">Reference Manual</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="reference.html#geopm-manual-pages">GEOPM Manual Pages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="geopm.7.html">geopm(7) – Global Extensible Open Power Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio.7.html">geopm_pio(7) – GEOPM PlatformIO interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_cnl.7.html">geopm_pio_cnl(7) – Signals and controls for Compute Node Linux Board-Level Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_const_config.7.html">geopm_pio_const_config(7) – Signals for ConstConfigIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_cpuinfo.7.html">geopm_pio_cpuinfo(7) – Signals and controls for the CPUInfoIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_dcgm.7.html">geopm_pio_dcgm(7) – IOGroup providing signals and controls for NVIDIA GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_levelzero.7.html">geopm_pio_levelzero(7) – IOGroup providing signals and controls for Intel GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_msr.7.html">geopm_pio_msr(7) – Signals and controls for Model Specific Registers (MSRs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_nvml.7.html">geopm_pio_nvml(7) – IOGroup providing signals and controls for NVIDIA GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_profile.7.html">geopm_pio_profile(7) – Signals and controls for the ProfileIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_service.7.html">geopm_pio_service(7) – Signals and controls for the ServiceIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_sst.7.html">geopm_pio_sst(7) – Signals and controls for Intel Speed Select Technology</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_sysfs.7.html">geopm_pio_sysfs(7) – Signals and controls for sysfs attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_time.7.html">geopm_pio_time(7) – Signals and controls for Time IO Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmaccess.1.html">geopmaccess(1) – Access management for the GEOPM Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmadmin.1.html">geopmadmin(1) – tool for GEOPM system administrators</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmagent.1.html">geopmagent(1) – query agent information and create static policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmbench.1.html">geopmbench(1) – synthetic benchmark application</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmctl.1.html">geopmctl(1) – GEOPM runtime control application</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmendpoint.1.html">geopmendpoint(1) – command line tool for dynamic policy control</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmlaunch.1.html">geopmlaunch(1) – application launch wrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmread.1.html">geopmread(1) – query platform information</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmsession.1.html">geopmsession(1) – Command line interface for the GEOPM service batch read features</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmwrite.1.html">geopmwrite(1) – modify platform state</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmdpy.7.html">geopmdpy(7) – global extensible open power manager python daemon package</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmpy.7.html">geopmpy(7) – global extensible open power manager python package</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent.3.html">geopm_agent(3) – query information about available agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_ctl.3.html">geopm_ctl(3) – GEOPM runtime control thread</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_daemon.3.html">geopm_daemon(3) – helpers for GEOPM daemons</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">geopm_endpoint(3) – dynamic policy control for resource management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#errors">Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="geopm_error.3.html">geopm_error(3) – error code descriptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_field.3.html">geopm_agent(3) – query information about available agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_fortran.3.html">geopm_fortran(3) – GEOPM fortran interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_hash.3.html">geopm_hash(3) – helper methods for encoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_imbalancer.3.html">geopm_imbalancer(3) – set artificial runtime imbalance</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio.3.html">geopm_pio(3) – interfaces to query and modify platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_policystore.3.html">geopm_policystore(3) – GEOPM resource policy store interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_prof.3.html">geopm_prof(3) – application profiling interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_sched.3.html">geopm_sched(3) – interface with Linux scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_time.3.html">geopm_time(3) – helper methods for time</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_topo.3.html">geopm_topo(3) – query platform component topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_version.3.html">geopm_version(3) – GEOPM library version</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AAgent.3.html">geopm::Agent(3) – GEOPM agent plugin interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AAgg.3.html">geopm::Agg(3) – data aggregation functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACNLIOGroup.3.html">geopm::CNLIOGroup(3) – IOGroup for interaction with Compute Node Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACPUActivityAgent.3.html">geopm::CPUActivityAgent(3) – agent for selecting CPU frequency based on CPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACircularBuffer.3.html">geopm::CircularBuffer(3) – generic circular buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AComm.3.html">geopm::Comm(3) – communication abstractions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACpuinfoIOGroup.3.html">geopm::CpuinfoIOGroup(3) – IOGroup for CPU frequency limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ADaemon.3.html">geopm::Daemon(3) – GEOPM daemon helper methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AEndpoint.3.html">geopm::Endpoint(3) – GEOPM endpoint interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AException.3.html">geopm::Exception(3) – custom GEOPM exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AGPUActivityAgent.3.html">geopm::GPUActivityAgent(3) – agent for selecting GPU frequency based on GPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AHelper.3.html">geopm::Helper – common helper methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AIOGroup.3.html">geopm::IOGroup(3) – provides system values and settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMPIComm.3.html">geopm::MPIComm(3) – implementation of Comm using MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMSRIO.3.html">geopm::MSRIO(3) – methods for reading and writing MSRs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMSRIOGroup.3.html">geopm::MSRIOGroup – IOGroup providing MSR-based signals and controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMonitorAgent.3.html">geopm::MonitorAgent – agent that enforces no policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APlatformIO.3.html">geopm::PlatformIO(3) – GEOPM platform interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APlatformTopo.3.html">geopm::PlatformTopo(3) – platform topology information</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APluginFactory.3.html">geopm::PluginFactory(3) – abstract factory for plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerBalancer.3.html">geopm::PowerBalancer(3) – balances power according to epoch runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerBalancerAgent.3.html">geopm::PowerBalancerAgent(3) – agent optimizing performance under a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerGovernor.3.html">geopm::PowerGovernor(3) – enforces a power limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerGovernorAgent.3.html">geopm::PowerGovernorAgent(3) – agent that enforces a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AProfileIOGroup.3.html">geopm::ProfileIOGroup(3) – IOGroup providing application signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ASampleAggregator.3.html">geopm::SampleAggregator(3) – per-region aggregated signal data</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ASharedMemory.3.html">geopm::SharedMemory(3) – abstractions for shared memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ATimeIOGroup.3.html">geopm::TimeIOGroup(3) – IOGroup providing time signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_report.7.html">geopm_report(7) – GEOPM summary report file</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_cpu_activity.7.html">geopm_agent_cpu_activity(7) – agent for selecting CPU frequency based on CPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_ffnet.7.html">geopm_agent_ffnet(7) – agent for adjusting frequencies based on application behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_frequency_map.7.html">geopm_agent_frequency_map(7) – agent for running regions at user selected frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_gpu_activity.7.html">geopm_agent_gpu_activity(7) – agent for selecting GPU frequency based on GPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_monitor.7.html">geopm_agent_monitor(7) – agent implementation for aggregating statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_power_balancer.7.html">geopm_agent_power_balancer(7) – agent optimizes performance under a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_power_governor.7.html">geopm_agent_power_governor(7) – agent enforces a power cap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#doxygen-pages">Doxygen Pages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Releases</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GEOPM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="reference.html">Reference Manual</a></li>
      <li class="breadcrumb-item active">geopm_endpoint(3) – dynamic policy control for resource management</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/geopm_endpoint.3.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="geopm-endpoint-3-dynamic-policy-control-for-resource-management">
<h1>geopm_endpoint(3) – dynamic policy control for resource management<a class="headerlink" href="#geopm-endpoint-3-dynamic-policy-control-for-resource-management" title="Link to this heading"></a></h1>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Link to this heading"></a></h2>
<p>#include <a class="reference external" href="https://github.com/geopm/geopm/blob/dev/libgeopm/include/geopm_endpoint.h">&lt;geopm_endpoint.h&gt;</a></p>
<p>Link with <code class="docutils literal notranslate"><span class="pre">-lgeopm</span></code></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_create</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint_name</span><span class="p">,</span>
<span class="w">                          </span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">**</span><span class="n">endpoint</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_destroy</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_open</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_close</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_agent</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">,</span>
<span class="w">                         </span><span class="kt">size_t</span><span class="w"> </span><span class="n">agent_name_max</span><span class="p">,</span>
<span class="w">                         </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">agent_name</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_wait_for_agent_attach</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">,</span>
<span class="w">                                         </span><span class="kt">double</span><span class="w"> </span><span class="n">timeout</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_stop_wait_loop</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_reset_wait_loop</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_profile_name</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">,</span>
<span class="w">                                </span><span class="kt">size_t</span><span class="w"> </span><span class="n">profile_name_max</span><span class="p">,</span>
<span class="w">                                </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">profile_name</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_num_node</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">num_node</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_node_name</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">,</span>
<span class="w">                             </span><span class="kt">int</span><span class="w"> </span><span class="n">node_idx</span><span class="p">,</span>
<span class="w">                             </span><span class="kt">size_t</span><span class="w"> </span><span class="n">node_name_max</span><span class="p">,</span>
<span class="w">                             </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">node_name</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_write_policy</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">,</span>
<span class="w">                                </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num_policy</span><span class="p">,</span>
<span class="w">                                </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">policy_array</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">geopm_endpoint_read_sample</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="w"> </span><span class="o">*</span><span class="n">endpoint</span><span class="p">,</span>
<span class="w">                               </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num_sample</span><span class="p">,</span>
<span class="w">                               </span><span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">sample_array</span><span class="p">,</span>
<span class="w">                               </span><span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">sample_age_sec</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">geopm_endpoint_c</span></code> interface can be utilized by a system resource manager
or parallel job scheduler to create, inspect, and destroy a GEOPM endpoint.
These endpoints can also be used to dynamically adjust the policy over the
compute application runtime.</p>
<p>For dynamic control, a daemon can use this interface to create and modify an
inter-process shared memory region on the compute node hosting the root MPI
process of the compute application.  The shared memory region is monitored by
the GEOPM runtime to enforce the policy across the entire MPI job allocation.</p>
<p>The endpoints can also be used to extract sample telemetry from the runtime.
This interface works in concert with the <a class="reference internal" href="geopm_agent.3.html"><span class="doc">geopm_agent(3)</span></a> interface for
inspecting the policy and sample parameters that pertain to the current agent.
One must utilize the agent interface to determine the number of sample
parameters provided by the agent and the number of policy values required by the
agent.</p>
<p>All functions described in this man page return an error code on failure and
zero upon success; see <a class="reference internal" href="#errors">ERRORS</a> section below for details.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_create()</span></code>:
will create an endpoint object.  This object will hold the
necessary state for interfacing with the shmem regions.  The
endpoint is stored in <em>endpoint</em> and will be used with other
functions in this interface.  The shared memory regions managed by
this endpoint will have a substring of the shmem key that matches
<em>endpoint_name</em>.  This will return zero on success indicating that
the <em>endpoint</em> struct can now be used.  <em>endpoint</em> will
be unmodified if an error occurs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_destroy()</span></code>:
will release resources associated with <em>endpoint</em>.  This will return zero
on success indicating that the shmem regions were removed.  Otherwise an
error code is returned.  This function will not delete any shmem regions.
Additionally will send a signal to the agent that the manager
is detaching from the policy and will no longer send updates.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_open()</span></code>:
will create shared memory regions for passing policies to the
Agent, and reading samples from the Agent.  These shmem regions
are managed by the <em>endpoint</em>.  This will return zero on success
indicating that the shmem regions were successfully created.  If
the shmem key already exists, an error code of <code class="docutils literal notranslate"><span class="pre">EEXIST</span></code> is returned.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_close()</span></code>:
will release shmem regions containing the substring
<em>endpoint_name</em>.  This will return zero on success indicating that
the shmem regions were removed.  Otherwise an error code is
returned.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_agent()</span></code>:
checks to see if an agent specified by <em>agent_name</em> has attached
to the <em>endpoint</em>.  The number of bytes reserved for <em>agent_name</em>
is specified in <em>agent_name_max</em>.  Returns zero if the endpoint
has an agent attached and the agent’s name can be stored in the
<em>agent_name</em> buffer, or if no agent has attached.  Otherwise an
error code is returned.  If no agent has attached, <em>agent_name</em>
will be an unaltered string.  If no shmem region has been created with
<code class="docutils literal notranslate"><span class="pre">geopm_endpoint_open()</span></code>, an error code is returned.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_wait_for_agent_attach()</span></code>:
blocks until an agent has attached to the <em>endpoint</em> or the
<em>timeout</em> in seconds is reached.  This will return zero on success
indicating that the agent attached or the wait was cancelled.
Otherwise an error code is returned.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_stop_wait_loop()</span></code>:
stops any current wait loops the <em>endpoint</em> is running.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_reset_wait_loop()</span></code>:
resets the <em>endpoint</em> to prepare for a subsequent call to
<code class="docutils literal notranslate"><span class="pre">geopm_endpoint_wait_for_agent_attach()</span></code>.  This only needs to be
called after calling <code class="docutils literal notranslate"><span class="pre">geopm_endpoint_stop_wait_loop()</span></code> once to reuse
the endpoint for another agent.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_profile_name()</span></code>:
provides the profile name of the attached agent in <em>profile_name</em>.
The number of bytes reserved for <em>profile_name</em> is specified in
<em>profile_name_max</em>.  Returns zero if the endpoint has an agent
attached and the profile name can be stored in the <em>profile_name</em>
buffer.  Otherwise an error code is returned.  If no agent has
attached, <em>profile_name</em> will be an unaltered string.  If no shmem
region has been created with <code class="docutils literal notranslate"><span class="pre">geopm_endpoint_open()</span></code>, an error
code is returned.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_num_node()</span></code>:
provides the number of nodes controlled by the agent attached to
the <em>endpoint</em> in <em>num_node</em>.  Returns zero on success, otherwise
an error code is returned.  If no shmem region has been created
with <code class="docutils literal notranslate"><span class="pre">geopm_endpoint_open()</span></code>, an error code is returned.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_node_name()</span></code>:
provides the hostname of the <em>endpoint</em> managed compute node in
<em>node_name</em>.  The index is specified by <em>node_idx</em>.  The number of
bytes reserved for <em>node_name</em> is specified in <em>node_name_max</em>.
Returns zero if the node name can be stored in the <em>node_name</em>
buffer, otherwise an error code is returned.  If no shmem region
has been created with <code class="docutils literal notranslate"><span class="pre">geopm_endpoint_open()</span></code>, an error code is
returned.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_write_policy()</span></code>:
sets the policy values for the agent within <em>endpoint</em> to follow.
These values provided in <em>policy_array</em> will be consumed by the
GEOPM runtime at the next iteration of the control loop.  The size
of the <em>policy_array</em> is given in <em>num_policy</em>.  Returns zero on
success, otherwise an error code is returned.  Setting NAN for a
policy value can be used to to indicate that the Agent should use
an appropriate default value.  If no shmem region has been created
with <code class="docutils literal notranslate"><span class="pre">geopm_endpoint_open()</span></code>, an error code is returned.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopm_endpoint_read_sample()</span></code>:
provides the sample telemetry from the <em>endpoint</em>‘s agent in
<em>sample_array</em> and the amount of time that has passed since the
agent last provided an update in <em>sample_age_sec</em>.  The number of
samples is given in <em>num_sample</em>.  Returns zero on success,
otherwise an error code is returned.  If no shmem region has been
created with <code class="docutils literal notranslate"><span class="pre">geopm_endpoint_open()</span></code>, an error code is returned.</p></li>
</ul>
</section>
<section id="errors">
<h2>Errors<a class="headerlink" href="#errors" title="Link to this heading"></a></h2>
<p>All functions described on this man page return an error code.  See
<a class="reference internal" href="geopm_error.3.html"><span class="doc">geopm_error(3)</span></a> for a full description of the error numbers and how
to convert them to strings.</p>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h2>
<p>The endpoint interface needs to be opened and attached to an agent. The
following pseudocode illustrates the order of function calls that would enable
an endpoint user to interact with an agent after a job has already started
executing, instead of writing a static policy to a file and waiting for job
completion to receive feedback.</p>
<p>Error-checking is omitted from this example for brevity. See
<a class="reference internal" href="geopm_error.3.html"><span class="doc">geopm_error(3)</span></a> for interpretation of the return values
from these functions.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span><span class="w"> </span><span class="n">agent_name</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
<span class="kt">char</span><span class="w"> </span><span class="n">profile_name</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
<span class="kt">char</span><span class="w"> </span><span class="n">node_name</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
<span class="kt">int</span><span class="w"> </span><span class="n">num_node</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">geopm_endpoint_c</span><span class="o">*</span><span class="w"> </span><span class="n">endpoint</span><span class="p">;</span>
<span class="n">geopm_endpoint_create</span><span class="p">(</span><span class="s">&quot;my_endpoint&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">endpoint</span><span class="p">);</span>
<span class="n">geopm_endpoint_open</span><span class="p">(</span><span class="n">endpoint</span><span class="p">);</span>
<span class="n">geopm_endpoint_wait_for_agent_attach</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
<span class="n">geopm_endpoint_agent</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="w"> </span><span class="n">agent_name</span><span class="p">,</span><span class="w"> </span><span class="n">agent_name</span><span class="p">);</span>
<span class="c1">// Now you can look up agent properties by agent_name, such as the names of</span>
<span class="c1">// policy and sample vector elements. See geopm_agent(3).</span>
<span class="n">geopm_endpoint_profile_name</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="w"> </span><span class="n">profile_name</span><span class="p">,</span><span class="w"> </span><span class="n">profile_name</span><span class="p">);</span>
<span class="c1">// Now you have the user-provided profile name for the job</span>
<span class="n">geopm_endpoint_num_node</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">num_node</span><span class="p">);</span>
<span class="n">geopm_endpoint_node_name</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span><span class="w"> </span><span class="n">num_node</span><span class="mi">-1</span><span class="w"> </span><span class="cm">/* The last node&#39;s name */</span><span class="p">,</span>
<span class="w">                         </span><span class="k">sizeof</span><span class="w"> </span><span class="n">node_name</span><span class="p">,</span><span class="w"> </span><span class="n">node_name</span><span class="p">);</span>
<span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="cm">/* populate the array based on the agent policy */</span><span class="p">;</span>
<span class="n">geopm_endpoint_write_policy</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span><span class="w"> </span><span class="n">policy</span><span class="p">,</span><span class="w"> </span><span class="n">num_policy</span><span class="p">);</span>
<span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">sample</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="cm">/* Allocate large enough to hold agent&#39;s samples */</span><span class="p">;</span>
<span class="kt">double</span><span class="w"> </span><span class="n">sample_age_sec</span><span class="p">;</span><span class="w"> </span><span class="c1">// How old the sample is by the time you request it</span>
<span class="n">geopm_endpoint_read_sample</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span><span class="w"> </span><span class="n">num_sample</span><span class="p">,</span><span class="w"> </span><span class="n">sample</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">sample_age_sec</span><span class="p">);</span>
<span class="n">geopm_endpoint_close</span><span class="p">(</span><span class="n">endpoint</span><span class="p">);</span>
<span class="n">geopm_endpoint_destroy</span><span class="p">(</span><span class="n">endpoint</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="geopm.7.html"><span class="doc">geopm(7)</span></a>,
<a class="reference internal" href="geopm_error.3.html"><span class="doc">geopm_error(3)</span></a>,
<a class="reference internal" href="geopm%3A%3AEndpoint.3.html"><span class="doc">geopm::Endpoint(3)</span></a>,
<a class="reference internal" href="geopmendpoint.1.html"><span class="doc">geopmendpoint(1)</span></a>,
<a class="reference internal" href="geopm_agent.3.html"><span class="doc">geopm_agent(3)</span></a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="geopm_daemon.3.html" class="btn btn-neutral float-left" title="geopm_daemon(3) – helpers for GEOPM daemons" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="geopm_error.3.html" class="btn btn-neutral float-right" title="geopm_error(3) – error code descriptions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015 - 2024 Intel Corporation. All rights reserved..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>