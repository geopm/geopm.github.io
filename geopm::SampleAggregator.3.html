

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>geopm::SampleAggregator(3) – per-region aggregated signal data &mdash; GEOPM  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=7ab3649f" />
      <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="geopm::SharedMemory(3) – abstractions for shared memory" href="geopm%3A%3ASharedMemory.3.html" />
    <link rel="prev" title="geopm::ProfileIOGroup(3) – IOGroup providing application signals" href="geopm%3A%3AProfileIOGroup.3.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            GEOPM
              <img src="https://geopm.github.io/images/geopm-logo-clear.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guides.html">User Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="contrib.html">Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="devel.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="reference.html">Reference Manual</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="reference.html#geopm-manual-pages">GEOPM Manual Pages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="geopm.7.html">geopm(7) – Global Extensible Open Power Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio.7.html">geopm_pio(7) – GEOPM PlatformIO interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_cnl.7.html">geopm_pio_cnl(7) – Signals and controls for Compute Node Linux Board-Level Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_const_config.7.html">geopm_pio_const_config(7) – Signals for ConstConfigIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_cpuinfo.7.html">geopm_pio_cpuinfo(7) – Signals and controls for the CPUInfoIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_dcgm.7.html">geopm_pio_dcgm(7) – IOGroup providing signals and controls for NVIDIA GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_levelzero.7.html">geopm_pio_levelzero(7) – IOGroup providing signals and controls for Intel GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_msr.7.html">geopm_pio_msr(7) – Signals and controls for Model Specific Registers (MSRs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_nvml.7.html">geopm_pio_nvml(7) – IOGroup providing signals and controls for NVIDIA GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_profile.7.html">geopm_pio_profile(7) – Signals and controls for the ProfileIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_service.7.html">geopm_pio_service(7) – Signals and controls for the ServiceIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_sst.7.html">geopm_pio_sst(7) – Signals and controls for Intel Speed Select Technology</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_sysfs.7.html">geopm_pio_sysfs(7) – Signals and controls for sysfs attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_time.7.html">geopm_pio_time(7) – Signals and controls for Time IO Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmaccess.1.html">geopmaccess(1) – Access management for the GEOPM Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmadmin.1.html">geopmadmin(1) – tool for GEOPM system administrators</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmagent.1.html">geopmagent(1) – query agent information and create static policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmbench.1.html">geopmbench(1) – synthetic benchmark application</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmctl.1.html">geopmctl(1) – GEOPM runtime control application</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmendpoint.1.html">geopmendpoint(1) – command line tool for dynamic policy control</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmlaunch.1.html">geopmlaunch(1) – application launch wrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmread.1.html">geopmread(1) – query platform information</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmsession.1.html">geopmsession(1) – Command line interface for the GEOPM service batch read features</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmwrite.1.html">geopmwrite(1) – modify platform state</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmdpy.7.html">geopmdpy(7) – global extensible open power manager python daemon package</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmpy.7.html">geopmpy(7) – global extensible open power manager python package</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent.3.html">geopm_agent(3) – query information about available agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_ctl.3.html">geopm_ctl(3) – GEOPM runtime control thread</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_daemon.3.html">geopm_daemon(3) – helpers for GEOPM daemons</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_endpoint.3.html">geopm_endpoint(3) – dynamic policy control for resource management</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_error.3.html">geopm_error(3) – error code descriptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_field.3.html">geopm_agent(3) – query information about available agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_fortran.3.html">geopm_fortran(3) – GEOPM fortran interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_hash.3.html">geopm_hash(3) – helper methods for encoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_imbalancer.3.html">geopm_imbalancer(3) – set artificial runtime imbalance</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio.3.html">geopm_pio(3) – interfaces to query and modify platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_policystore.3.html">geopm_policystore(3) – GEOPM resource policy store interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_prof.3.html">geopm_prof(3) – application profiling interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_sched.3.html">geopm_sched(3) – interface with Linux scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_time.3.html">geopm_time(3) – helper methods for time</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_topo.3.html">geopm_topo(3) – query platform component topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_version.3.html">geopm_version(3) – GEOPM library version</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AAgent.3.html">geopm::Agent(3) – GEOPM agent plugin interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AAgg.3.html">geopm::Agg(3) – data aggregation functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACNLIOGroup.3.html">geopm::CNLIOGroup(3) – IOGroup for interaction with Compute Node Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACPUActivityAgent.3.html">geopm::CPUActivityAgent(3) – agent for selecting CPU frequency based on CPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACircularBuffer.3.html">geopm::CircularBuffer(3) – generic circular buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AComm.3.html">geopm::Comm(3) – communication abstractions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACpuinfoIOGroup.3.html">geopm::CpuinfoIOGroup(3) – IOGroup for CPU frequency limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ADaemon.3.html">geopm::Daemon(3) – GEOPM daemon helper methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AEndpoint.3.html">geopm::Endpoint(3) – GEOPM endpoint interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AException.3.html">geopm::Exception(3) – custom GEOPM exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AGPUActivityAgent.3.html">geopm::GPUActivityAgent(3) – agent for selecting GPU frequency based on GPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AHelper.3.html">geopm::Helper – common helper methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AIOGroup.3.html">geopm::IOGroup(3) – provides system values and settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMPIComm.3.html">geopm::MPIComm(3) – implementation of Comm using MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMSRIO.3.html">geopm::MSRIO(3) – methods for reading and writing MSRs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMSRIOGroup.3.html">geopm::MSRIOGroup – IOGroup providing MSR-based signals and controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMonitorAgent.3.html">geopm::MonitorAgent – agent that enforces no policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APlatformIO.3.html">geopm::PlatformIO(3) – GEOPM platform interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APlatformTopo.3.html">geopm::PlatformTopo(3) – platform topology information</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APluginFactory.3.html">geopm::PluginFactory(3) – abstract factory for plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerBalancer.3.html">geopm::PowerBalancer(3) – balances power according to epoch runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerBalancerAgent.3.html">geopm::PowerBalancerAgent(3) – agent optimizing performance under a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerGovernor.3.html">geopm::PowerGovernor(3) – enforces a power limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerGovernorAgent.3.html">geopm::PowerGovernorAgent(3) – agent that enforces a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AProfileIOGroup.3.html">geopm::ProfileIOGroup(3) – IOGroup providing application signals</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">geopm::SampleAggregator(3) – per-region aggregated signal data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-methods">Class Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ASharedMemory.3.html">geopm::SharedMemory(3) – abstractions for shared memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ATimeIOGroup.3.html">geopm::TimeIOGroup(3) – IOGroup providing time signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_report.7.html">geopm_report(7) – GEOPM summary report file</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_cpu_activity.7.html">geopm_agent_cpu_activity(7) – agent for selecting CPU frequency based on CPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_ffnet.7.html">geopm_agent_ffnet(7) – agent for adjusting frequencies based on application behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_frequency_map.7.html">geopm_agent_frequency_map(7) – agent for running regions at user selected frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_gpu_activity.7.html">geopm_agent_gpu_activity(7) – agent for selecting GPU frequency based on GPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_monitor.7.html">geopm_agent_monitor(7) – agent implementation for aggregating statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_power_balancer.7.html">geopm_agent_power_balancer(7) – agent optimizes performance under a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_power_governor.7.html">geopm_agent_power_governor(7) – agent enforces a power cap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#doxygen-pages">Doxygen Pages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Releases</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GEOPM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="reference.html">Reference Manual</a></li>
      <li class="breadcrumb-item active">geopm::SampleAggregator(3) – per-region aggregated signal data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/geopm::SampleAggregator.3.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="geopm-sampleaggregator-3-per-region-aggregated-signal-data">
<h1>geopm::SampleAggregator(3) – per-region aggregated signal data<a class="headerlink" href="#geopm-sampleaggregator-3-per-region-aggregated-signal-data" title="Link to this heading"></a></h1>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Link to this heading"></a></h2>
<p>#include <a class="reference external" href="https://github.com/geopm/geopm/blob/dev/libgeopm/include/SampleAggregator.hpp">&lt;geopm/SampleAggregator.hpp&gt;</a></p>
<p>Link with <code class="docutils literal notranslate"><span class="pre">-lgeopm</span></code> <strong>(MPI)</strong> or <code class="docutils literal notranslate"><span class="pre">-lgeopm</span></code> <strong>(non-MPI)</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">SampleAggregator</span><span class="o">&gt;</span><span class="w"> </span><span class="n">SampleAggregator</span><span class="o">::</span><span class="n">make_unique</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">SampleAggregator::push_signal</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="n">signal_name</span><span class="p">,</span>
<span class="w">                                  </span><span class="kt">int</span><span class="w"> </span><span class="n">domain_type</span><span class="p">,</span>
<span class="w">                                  </span><span class="kt">int</span><span class="w"> </span><span class="n">domain_idx</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">SampleAggregator::push_signal_total</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="n">signal_name</span><span class="p">,</span>
<span class="w">                                        </span><span class="kt">int</span><span class="w"> </span><span class="n">domain_type</span><span class="p">,</span>
<span class="w">                                        </span><span class="kt">int</span><span class="w"> </span><span class="n">domain_idx</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">SampleAggregator::push_signal_average</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="n">signal_name</span><span class="p">,</span>
<span class="w">                                          </span><span class="kt">int</span><span class="w"> </span><span class="n">domain_type</span><span class="p">,</span>
<span class="w">                                          </span><span class="kt">int</span><span class="w"> </span><span class="n">domain_idx</span><span class="p">);</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">SampleAggregator::update</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">double</span><span class="w"> </span><span class="nf">SampleAggregator::sample_application</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">signal_idx</span><span class="p">);</span>

<span class="kt">double</span><span class="w"> </span><span class="nf">SampleAggregator::sample_epoch</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">signal_idx</span><span class="p">);</span>

<span class="kt">double</span><span class="w"> </span><span class="nf">SampleAggregator::sample_region</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">signal_idx</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">region_hash</span><span class="p">);</span>

<span class="kt">double</span><span class="w"> </span><span class="nf">SampleAggregator::sample_epoch_last</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">signal_idx</span><span class="p">);</span>

<span class="kt">double</span><span class="w"> </span><span class="nf">SampleAggregator::sample_region_last</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">signal_idx</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">region_hash</span><span class="p">);</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">SampleAggregator::period_duration</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">duration</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">SampleAggregator::get_period</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">double</span><span class="w"> </span><span class="nf">SampleAggregator::sample_period_last</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">signal_idx</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">RegionAggregator</span></code> is used to store running totals of various
signals per region.  Regions are automatically detected through
sampling the <code class="docutils literal notranslate"><span class="pre">REGION_HASH</span></code> signal.  The object also accumulates data for
the epoch.  The set of signals to be tracked is determined by pushing
signals similar to the <code class="docutils literal notranslate"><span class="pre">push_signal()</span></code> method of
<a class="reference internal" href="geopm%3A%3APlatformIO.3.html"><span class="doc">geopm::PlatformIO(3)</span></a>.</p>
</section>
<section id="class-methods">
<h2>Class Methods<a class="headerlink" href="#class-methods" title="Link to this heading"></a></h2>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">make_unique()</span></code></dt><dd><p>Returns a <code class="docutils literal notranslate"><span class="pre">unique_ptr</span></code> to a concrete object
constructed using the underlying implementation</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">push_signal()</span></code></dt><dd><p>Push a signal to be accumulated per-region.
Check the signal behavior and call <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code>
or <code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code> accordingly.
The signal to sample and aggregate is <em>signal_name</em> and
it will be collected for the domain <em>domain_type</em> at <em>domain_idx</em>
over which the region hash and signal should be sampled.
The return value is an index to be
used with <code class="docutils literal notranslate"><span class="pre">sample()</span></code> to refer to this signal.
This index matches the return value of
<a class="reference internal" href="geopm%3A%3APlatformIO.3.html"><span class="doc">geopm::PlatformIO(3)</span></a><code class="docutils literal notranslate"><span class="pre">::push_signal()</span></code> for the same signal.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code></dt><dd><p>Push a signal to be accumulated per-region as a total.
The <em>signal_name</em> must be a valid signal available
through <code class="docutils literal notranslate"><span class="pre">PlatformIO</span></code>.  Note that unlike other signals
this is a total accumulated per region by subtracting
the value of the signal at the region exit from the
region entry.  Region entry and exit are not exact and
are determined by the value of the <code class="docutils literal notranslate"><span class="pre">REGION_HASH</span></code> signal
at the time of <code class="docutils literal notranslate"><span class="pre">read_batch()</span></code>.  This aggregation should
only be used for signals that are monotonically
increasing, such as time.
The signal to sample and aggregate is <em>signal_name</em> and
it will be collected for the domain <em>domain_type</em> at <em>domain_idx</em>
over which the region hash and signal should be sampled.
The return value is an index to be
used with <code class="docutils literal notranslate"><span class="pre">sample()</span></code> to refer to this signal.
This index matches the return value of
<a class="reference internal" href="geopm%3A%3APlatformIO.3.html"><span class="doc">geopm::PlatformIO(3)</span></a><code class="docutils literal notranslate"><span class="pre">::push_signal()</span></code> for the same signal.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code></dt><dd><p>Push a signal to be accumulated per-region as an average.
The <em>signal_name</em> must be a valid signal available
through <code class="docutils literal notranslate"><span class="pre">PlatformIO</span></code>.  Note that unlike other signals
this is an average value accumulated per region by a
time weighted mean of the values sampled while in the
region. Region entry and exit are not exact and are
determined by the value of the <code class="docutils literal notranslate"><span class="pre">REGION_HASH</span></code> signal at
the time of <code class="docutils literal notranslate"><span class="pre">read_batch()</span></code>.  This aggregation should be
used for signals that vary up and down over time such
as the CPU frequency.
The signal to sample and aggregate is <em>signal_name</em> and
it will be collected for the domain <em>domain_type</em> at <em>domain_idx</em>
over which the region hash and signal should be sampled.
The return value is an index to be
used with <code class="docutils literal notranslate"><span class="pre">sample()</span></code> to refer to this signal.
This index matches the return value of
<a class="reference internal" href="geopm%3A%3APlatformIO.3.html"><span class="doc">geopm::PlatformIO(3)</span></a><code class="docutils literal notranslate"><span class="pre">::push_signal()</span></code> for the same signal.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">update()</span></code></dt><dd><p>Update stored totals for each signal.
This method is to be called after each call to
<code class="docutils literal notranslate"><span class="pre">PlatformIO::read_batch()</span></code>.  This should be called with
every <code class="docutils literal notranslate"><span class="pre">PlatformIO</span></code> update because <code class="docutils literal notranslate"><span class="pre">sample_total()</span></code> maybe
not be called until the end of execution.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sample_application()</span></code></dt><dd><p>Get the aggregated value of a signal.
The aggregation type is determined by which method was
used to push the signal: <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> or
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code>. The <em>signal_idx</em> parameter is the
Index returned by a previous call to <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> or
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code>.  The value returned is
aggregated over all samples since the application
start, regardless of region or epoch.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sample_epoch()</span></code></dt><dd><p>Get the aggregated value of a signal since the first epoch.
The aggregation type is determined by which method was
used to push the signal: <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> or
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code>. The <em>signal_idx</em> parameter is the
Index returned by a previous call to <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> or
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code>.  The value returned is
aggregated over all samples since the first epoch
observed over the domain specified when the signal was
pushed, or <code class="docutils literal notranslate"><span class="pre">NAN</span></code> if called before first call to <code class="docutils literal notranslate"><span class="pre">update()</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sample_region()</span></code></dt><dd><p>Get the aggregated value of a signal during the
execution of a particular region.
The aggregation type is determined by which method was
used to push the signal: <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> or
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code>. The <em>signal_idx</em> parameter is the
Index returned by a previous call to <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> or
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code>.  The value returned is
aggregated over all samples where the <em>region_hash</em>
signal matched the value specified for the domain
pushed.  The returned value is zero for
<code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> aggregation, and <code class="docutils literal notranslate"><span class="pre">NAN</span></code> for
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code> aggregation if the region was not
observed for any samples,
or <code class="docutils literal notranslate"><span class="pre">NAN</span></code> if called before first call to <code class="docutils literal notranslate"><span class="pre">update()</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sample_epoch_last()</span></code></dt><dd><p>Get the aggregated value of a signal over the
last completed epoch interval.
The aggregation type is determined by which method was
used to push the signal: <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> or
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code>. The <em>signal_idx</em> parameter is the
Index returned by a previous call to <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> or
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code>.  The value returned is
aggregated over all samples between the last two
samples when the epoch count changed,
or <code class="docutils literal notranslate"><span class="pre">NAN</span></code> if called before first call to <code class="docutils literal notranslate"><span class="pre">update()</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sample_region_last()</span></code></dt><dd><p>Get the aggregated value of a signal during the
the last completed execution of a particular region.
The aggregation type is determined by which method was
used to push the signal: <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> or
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code>. The <em>signal_idx</em> parameter is the
Index returned by a previous call to <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> or
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code>.  The value returned is
aggregated over the last contiguous set of samples
where the <em>region_hash</em> signal matched the value
specified for the domain pushed.  Note that if the
region is currently executing, the value reported is
aggregated over the last region interval, not the
currently executing interval. The returned value is
zero for <code class="docutils literal notranslate"><span class="pre">push_signal_total()</span></code> aggregation, and <code class="docutils literal notranslate"><span class="pre">NAN</span></code> for
<code class="docutils literal notranslate"><span class="pre">push_signal_average()</span></code> aggregation if a completed region
with the specified hash has not been observed, or <code class="docutils literal notranslate"><span class="pre">NAN</span></code> if called
before first call to <code class="docutils literal notranslate"><span class="pre">update()</span></code> or if
<code class="docutils literal notranslate"><span class="pre">period_duration()</span></code> was not called.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">period_duration()</span></code></dt><dd><p>Set the time period for <code class="docutils literal notranslate"><span class="pre">sample_period_last()</span></code>
Calling this method prior to the first call to
<code class="docutils literal notranslate"><span class="pre">update()</span></code> enables signals to be accumulated on a
periodic basis.  The <code class="docutils literal notranslate"><span class="pre">sample_period_last()</span></code> method is
used to sample an accumulated value over the last
completed time interval, and the period of the
interval is configured by calling this method.
The <em>duration</em> is the time interval in seconds over
which the <code class="docutils literal notranslate"><span class="pre">sample_region_last()</span></code> method is
aggregated (must be greater than <code class="docutils literal notranslate"><span class="pre">0.0</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_period()</span></code></dt><dd><p>Get the index of the current time period.
Provides an index of completed durations.
Returns the number of completed durations since the
application start. Will return
zero if periodic sampling is not enabled (when
<code class="docutils literal notranslate"><span class="pre">period_duration()</span></code> was not called prior to <code class="docutils literal notranslate"><span class="pre">update()</span></code>).
When periodic sampling is enabled, the
<code class="docutils literal notranslate"><span class="pre">sample_period_last()</span></code> method will return <code class="docutils literal notranslate"><span class="pre">0.0</span></code> until a
full period has elapsed, this corresponds to when
<code class="docutils literal notranslate"><span class="pre">get_period()</span></code> returns a value greater than zero.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sample_period_last()</span></code></dt><dd><p>Get the aggregated value of a signal during the
last completed time interval.</p>
</dd>
</dl>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="geopm.7.html"><span class="doc">geopm(7)</span></a>,
<a class="reference internal" href="geopm%3A%3APlatformIO.3.html"><span class="doc">geopm::PlatformIO(3)</span></a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="geopm%3A%3AProfileIOGroup.3.html" class="btn btn-neutral float-left" title="geopm::ProfileIOGroup(3) – IOGroup providing application signals" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="geopm%3A%3ASharedMemory.3.html" class="btn btn-neutral float-right" title="geopm::SharedMemory(3) – abstractions for shared memory" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015 - 2024 Intel Corporation. All rights reserved..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>