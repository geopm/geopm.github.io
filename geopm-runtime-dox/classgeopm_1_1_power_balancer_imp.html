<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>geopm: geopm::PowerBalancerImp Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">geopm<span id="projectnumber">&#160;3.1.1.dev652+g66257d34</span>
   </div>
   <div id="projectbrief">GEOPM - Global Extensible Open Power Manager</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegeopm.html">geopm</a></li><li class="navelem"><a class="el" href="classgeopm_1_1_power_balancer_imp.html">PowerBalancerImp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgeopm_1_1_power_balancer_imp-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">geopm::PowerBalancerImp Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_power_balancer_imp_8hpp_source.html">PowerBalancerImp.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for geopm::PowerBalancerImp:</div>
<div class="dyncontent">
<div class="center"><img src="classgeopm_1_1_power_balancer_imp__inherit__graph.png" border="0" usemap="#ageopm_1_1_power_balancer_imp_inherit__map" alt="Inheritance graph"/></div>
<map name="ageopm_1_1_power_balancer_imp_inherit__map" id="ageopm_1_1_power_balancer_imp_inherit__map">
<area shape="rect" title=" " alt="" coords="5,79,203,104"/>
<area shape="rect" href="classgeopm_1_1_power_balancer.html" title="Stay within a power cap but redistribute power to optimize performance. An average per compute node p..." alt="" coords="18,5,190,31"/>
<area shape="poly" title=" " alt="" coords="107,44,107,79,101,79,101,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for geopm::PowerBalancerImp:</div>
<div class="dyncontent">
<div class="center"><img src="classgeopm_1_1_power_balancer_imp__coll__graph.png" border="0" usemap="#ageopm_1_1_power_balancer_imp_coll__map" alt="Collaboration graph"/></div>
<map name="ageopm_1_1_power_balancer_imp_coll__map" id="ageopm_1_1_power_balancer_imp_coll__map">
<area shape="rect" title=" " alt="" coords="5,79,203,104"/>
<area shape="rect" href="classgeopm_1_1_power_balancer.html" title="Stay within a power cap but redistribute power to optimize performance. An average per compute node p..." alt="" coords="18,5,190,31"/>
<area shape="poly" title=" " alt="" coords="107,44,107,79,101,79,101,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a00c6fa5fd4b915577786511a5a06196a" id="r_a00c6fa5fd4b915577786511a5a06196a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#a00c6fa5fd4b915577786511a5a06196a">PowerBalancerImp</a> (double ctl_latency, double trial_delta, int num_sample, double measure_duration)</td></tr>
<tr class="memdesc:a00c6fa5fd4b915577786511a5a06196a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a testable <a class="el" href="classgeopm_1_1_power_balancer_imp.html">PowerBalancerImp</a> object.  <br /></td></tr>
<tr class="separator:a00c6fa5fd4b915577786511a5a06196a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa658503b71c7570918f783d38e036df9" id="r_aa658503b71c7570918f783d38e036df9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#aa658503b71c7570918f783d38e036df9">PowerBalancerImp</a> (double ctl_latency)</td></tr>
<tr class="memdesc:aa658503b71c7570918f783d38e036df9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="classgeopm_1_1_power_balancer_imp.html">PowerBalancerImp</a> object.  <br /></td></tr>
<tr class="separator:aa658503b71c7570918f783d38e036df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af86347b553c0f00238d360e4cfd9819d" id="r_af86347b553c0f00238d360e4cfd9819d"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#af86347b553c0f00238d360e4cfd9819d">~PowerBalancerImp</a> ()=default</td></tr>
<tr class="memdesc:af86347b553c0f00238d360e4cfd9819d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a <a class="el" href="classgeopm_1_1_power_balancer_imp.html">PowerBalancerImp</a> object.  <br /></td></tr>
<tr class="separator:af86347b553c0f00238d360e4cfd9819d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51e9b61cb646202c093d25b168861271" id="r_a51e9b61cb646202c093d25b168861271"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#a51e9b61cb646202c093d25b168861271">power_cap</a> (double cap) override</td></tr>
<tr class="memdesc:a51e9b61cb646202c093d25b168861271"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should be called at the start of application execution with the average power cap across compute nodes. Should be called at the end of the second phase of execution to note that the power savings made across all compute nodes has been evenly redistributed.  <br /></td></tr>
<tr class="separator:a51e9b61cb646202c093d25b168861271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4da33e6ec47bb1007a6fa7d9fed759cd" id="r_a4da33e6ec47bb1007a6fa7d9fed759cd"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#a4da33e6ec47bb1007a6fa7d9fed759cd">power_cap</a> (void) const override</td></tr>
<tr class="memdesc:a4da33e6ec47bb1007a6fa7d9fed759cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current power cap which cannot be exceeded without breaking contract that the average power budget across all compute nodes is maintained.  <br /></td></tr>
<tr class="separator:a4da33e6ec47bb1007a6fa7d9fed759cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98361888874560337cd58387e619cd0d" id="r_a98361888874560337cd58387e619cd0d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#a98361888874560337cd58387e619cd0d">power_limit</a> (void) const override</td></tr>
<tr class="memdesc:a98361888874560337cd58387e619cd0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current power limit prescribed for this node.  <br /></td></tr>
<tr class="separator:a98361888874560337cd58387e619cd0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a7fe1a7b051170c0f534e67630b7fbb" id="r_a8a7fe1a7b051170c0f534e67630b7fbb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#a8a7fe1a7b051170c0f534e67630b7fbb">power_limit_adjusted</a> (double limit) override</td></tr>
<tr class="memdesc:a8a7fe1a7b051170c0f534e67630b7fbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify power balancer that a new limit has been set with the governor.  <br /></td></tr>
<tr class="separator:a8a7fe1a7b051170c0f534e67630b7fbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb91df72877d1b8400c563e9e1b64804" id="r_adb91df72877d1b8400c563e9e1b64804"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#adb91df72877d1b8400c563e9e1b64804">is_runtime_stable</a> (double measured_runtime) override</td></tr>
<tr class="memdesc:adb91df72877d1b8400c563e9e1b64804"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the object with a runtime measured under the current power limit and test if the current runtime sample is reliable such that a call <a class="el" href="classgeopm_1_1_power_balancer_imp.html#aeaeca591b7009d57d873eb2541ac7e08" title="Return the expected execution time of an application epoch under the current power limit.">runtime_sample()</a> can be made.  <br /></td></tr>
<tr class="separator:adb91df72877d1b8400c563e9e1b64804"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaeca591b7009d57d873eb2541ac7e08" id="r_aeaeca591b7009d57d873eb2541ac7e08"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#aeaeca591b7009d57d873eb2541ac7e08">runtime_sample</a> (void) const override</td></tr>
<tr class="memdesc:aeaeca591b7009d57d873eb2541ac7e08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the expected execution time of an application epoch under the current power limit.  <br /></td></tr>
<tr class="separator:aeaeca591b7009d57d873eb2541ac7e08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f9e14771035975428d7becefd0bee3f" id="r_a0f9e14771035975428d7becefd0bee3f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#a0f9e14771035975428d7becefd0bee3f">calculate_runtime_sample</a> (void) override</td></tr>
<tr class="memdesc:a0f9e14771035975428d7becefd0bee3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample the measured runtimes under the current power cap in the first phase of execution. This measurement will be aggregated across all compute nodes to find the largest runtime measured.  <br /></td></tr>
<tr class="separator:a0f9e14771035975428d7becefd0bee3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f3852a14b3525d3f4bcfbb61922578b" id="r_a0f3852a14b3525d3f4bcfbb61922578b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#a0f3852a14b3525d3f4bcfbb61922578b">target_runtime</a> (double largest_runtime) override</td></tr>
<tr class="separator:a0f3852a14b3525d3f4bcfbb61922578b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac168b31048ab2fd283d9c0178a0cdb76" id="r_ac168b31048ab2fd283d9c0178a0cdb76"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#ac168b31048ab2fd283d9c0178a0cdb76">is_target_met</a> (double measured_runtime) override</td></tr>
<tr class="memdesc:ac168b31048ab2fd283d9c0178a0cdb76"><td class="mdescLeft">&#160;</td><td class="mdescRight">During the second phase of execution the power limit is decreased until the epoch runtime on the compute node under management has increased to the runtime of the slowest compute node. This method is used to update the object with a new measurement and also test if the current power limit meets the requirements. If the method returns false, then the value returned by <a class="el" href="classgeopm_1_1_power_balancer_imp.html#a98361888874560337cd58387e619cd0d" title="Returns the current power limit prescribed for this node.">power_limit()</a> may have been updated. The new power limit should be enforced for the next epoch execution.  <br /></td></tr>
<tr class="separator:ac168b31048ab2fd283d9c0178a0cdb76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaee8ece95c8c020a2a7844e9f61c2b60" id="r_aaee8ece95c8c020a2a7844e9f61c2b60"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer_imp.html#aaee8ece95c8c020a2a7844e9f61c2b60">power_slack</a> (void) override</td></tr>
<tr class="memdesc:aaee8ece95c8c020a2a7844e9f61c2b60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query the difference between the last power cap setting and the current power limit. If this method is called and it returns zero then the trial delta used to lower the power limit is reduced by a factor of two.  <br /></td></tr>
<tr class="separator:aaee8ece95c8c020a2a7844e9f61c2b60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classgeopm_1_1_power_balancer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classgeopm_1_1_power_balancer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classgeopm_1_1_power_balancer.html">geopm::PowerBalancer</a></td></tr>
<tr class="memitem:a990b8da3a1c2a3a8f2986fbed9f1f8e2 inherit pub_methods_classgeopm_1_1_power_balancer" id="r_a990b8da3a1c2a3a8f2986fbed9f1f8e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer.html#a990b8da3a1c2a3a8f2986fbed9f1f8e2">PowerBalancer</a> ()=default</td></tr>
<tr class="memdesc:a990b8da3a1c2a3a8f2986fbed9f1f8e2 inherit pub_methods_classgeopm_1_1_power_balancer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a IPowerBalancer object.  <br /></td></tr>
<tr class="separator:a990b8da3a1c2a3a8f2986fbed9f1f8e2 inherit pub_methods_classgeopm_1_1_power_balancer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4599b55e3f9b129927461e6dea779eed inherit pub_methods_classgeopm_1_1_power_balancer" id="r_a4599b55e3f9b129927461e6dea779eed"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer.html#a4599b55e3f9b129927461e6dea779eed">~PowerBalancer</a> ()=default</td></tr>
<tr class="memdesc:a4599b55e3f9b129927461e6dea779eed inherit pub_methods_classgeopm_1_1_power_balancer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a IPowerBalancer object.  <br /></td></tr>
<tr class="separator:a4599b55e3f9b129927461e6dea779eed inherit pub_methods_classgeopm_1_1_power_balancer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classgeopm_1_1_power_balancer"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classgeopm_1_1_power_balancer')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classgeopm_1_1_power_balancer.html">geopm::PowerBalancer</a></td></tr>
<tr class="memitem:a77416cf4c4099d1e630f20f66fde4b4c inherit pub_static_methods_classgeopm_1_1_power_balancer" id="r_a77416cf4c4099d1e630f20f66fde4b4c"><td class="memItemLeft" align="right" valign="top">static std::unique_ptr&lt; <a class="el" href="classgeopm_1_1_power_balancer.html">PowerBalancer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer.html#a77416cf4c4099d1e630f20f66fde4b4c">make_unique</a> (double ctl_latency)</td></tr>
<tr class="memdesc:a77416cf4c4099d1e630f20f66fde4b4c inherit pub_static_methods_classgeopm_1_1_power_balancer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a unique_ptr to a concrete object constructed using the underlying implementation.  <br /></td></tr>
<tr class="separator:a77416cf4c4099d1e630f20f66fde4b4c inherit pub_static_methods_classgeopm_1_1_power_balancer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba4d60f2cecb84be79e6536cf822fd4 inherit pub_static_methods_classgeopm_1_1_power_balancer" id="r_a3ba4d60f2cecb84be79e6536cf822fd4"><td class="memItemLeft" align="right" valign="top">static std::shared_ptr&lt; <a class="el" href="classgeopm_1_1_power_balancer.html">PowerBalancer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_power_balancer.html#a3ba4d60f2cecb84be79e6536cf822fd4">make_shared</a> (double ctl_latency)</td></tr>
<tr class="memdesc:a3ba4d60f2cecb84be79e6536cf822fd4 inherit pub_static_methods_classgeopm_1_1_power_balancer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a shared_ptr to a concrete object constructed using the underlying implementation.  <br /></td></tr>
<tr class="separator:a3ba4d60f2cecb84be79e6536cf822fd4 inherit pub_static_methods_classgeopm_1_1_power_balancer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a00c6fa5fd4b915577786511a5a06196a" name="a00c6fa5fd4b915577786511a5a06196a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00c6fa5fd4b915577786511a5a06196a">&#9670;&#160;</a></span>PowerBalancerImp() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">geopm::PowerBalancerImp::PowerBalancerImp </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ctl_latency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>trial_delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>measure_duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a testable <a class="el" href="classgeopm_1_1_power_balancer_imp.html">PowerBalancerImp</a> object. </p>

</div>
</div>
<a id="aa658503b71c7570918f783d38e036df9" name="aa658503b71c7570918f783d38e036df9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa658503b71c7570918f783d38e036df9">&#9670;&#160;</a></span>PowerBalancerImp() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">geopm::PowerBalancerImp::PowerBalancerImp </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ctl_latency</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a <a class="el" href="classgeopm_1_1_power_balancer_imp.html">PowerBalancerImp</a> object. </p>

</div>
</div>
<a id="af86347b553c0f00238d360e4cfd9819d" name="af86347b553c0f00238d360e4cfd9819d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af86347b553c0f00238d360e4cfd9819d">&#9670;&#160;</a></span>~PowerBalancerImp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual geopm::PowerBalancerImp::~PowerBalancerImp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy a <a class="el" href="classgeopm_1_1_power_balancer_imp.html">PowerBalancerImp</a> object. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0f9e14771035975428d7becefd0bee3f" name="a0f9e14771035975428d7becefd0bee3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f9e14771035975428d7becefd0bee3f">&#9670;&#160;</a></span>calculate_runtime_sample()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void geopm::PowerBalancerImp::calculate_runtime_sample </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sample the measured runtimes under the current power cap in the first phase of execution. This measurement will be aggregated across all compute nodes to find the largest runtime measured. </p>

<p>Implements <a class="el" href="classgeopm_1_1_power_balancer.html#a46013a55e94d8b0c795b904088a286c2">geopm::PowerBalancer</a>.</p>

</div>
</div>
<a id="adb91df72877d1b8400c563e9e1b64804" name="adb91df72877d1b8400c563e9e1b64804"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb91df72877d1b8400c563e9e1b64804">&#9670;&#160;</a></span>is_runtime_stable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool geopm::PowerBalancerImp::is_runtime_stable </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>measured_runtime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the object with a runtime measured under the current power limit and test if the current runtime sample is reliable such that a call <a class="el" href="classgeopm_1_1_power_balancer_imp.html#aeaeca591b7009d57d873eb2541ac7e08" title="Return the expected execution time of an application epoch under the current power limit.">runtime_sample()</a> can be made. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">measured_runtime</td><td>Most recent measurement of the execution time for an epoch on the node being managed under the current power limit. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if a stable measurement of expected runtime for an epoch can be made with the <a class="el" href="classgeopm_1_1_power_balancer_imp.html#aeaeca591b7009d57d873eb2541ac7e08" title="Return the expected execution time of an application epoch under the current power limit.">runtime_sample()</a> method, and false otherwise. </dd></dl>
<p>m_runtime_vec used as a temporary holder until enough time has passed to determine how many samples are required in the circular buffer.</p>

<p>Implements <a class="el" href="classgeopm_1_1_power_balancer.html#a7c5660af0029b304ed90c0b1b557932e">geopm::PowerBalancer</a>.</p>

</div>
</div>
<a id="ac168b31048ab2fd283d9c0178a0cdb76" name="ac168b31048ab2fd283d9c0178a0cdb76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac168b31048ab2fd283d9c0178a0cdb76">&#9670;&#160;</a></span>is_target_met()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool geopm::PowerBalancerImp::is_target_met </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>measured_runtime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>During the second phase of execution the power limit is decreased until the epoch runtime on the compute node under management has increased to the runtime of the slowest compute node. This method is used to update the object with a new measurement and also test if the current power limit meets the requirements. If the method returns false, then the value returned by <a class="el" href="classgeopm_1_1_power_balancer_imp.html#a98361888874560337cd58387e619cd0d" title="Returns the current power limit prescribed for this node.">power_limit()</a> may have been updated. The new power limit should be enforced for the next epoch execution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">measured_runtime</td><td>Most recent measurement of the execution time for an epoch on the node being managed under the current power limit. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the current power limit is reliably close to the target runtime and excess power should be sent up to the root to be redistributed, and false if more trials are required. </dd></dl>

<p>Implements <a class="el" href="classgeopm_1_1_power_balancer.html#a9ddcd8d50f9c64c905641a79d2c87517">geopm::PowerBalancer</a>.</p>

</div>
</div>
<a id="a51e9b61cb646202c093d25b168861271" name="a51e9b61cb646202c093d25b168861271"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51e9b61cb646202c093d25b168861271">&#9670;&#160;</a></span>power_cap() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void geopm::PowerBalancerImp::power_cap </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>cap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should be called at the start of application execution with the average power cap across compute nodes. Should be called at the end of the second phase of execution to note that the power savings made across all compute nodes has been evenly redistributed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">power_cap</td><td>The new maximum power limit equal to the current power limit plus the amount of power saved that is being redistributed. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classgeopm_1_1_power_balancer.html#a25b98f4cf13bf0bdd785790d30fd14ea">geopm::PowerBalancer</a>.</p>

</div>
</div>
<a id="a4da33e6ec47bb1007a6fa7d9fed759cd" name="a4da33e6ec47bb1007a6fa7d9fed759cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4da33e6ec47bb1007a6fa7d9fed759cd">&#9670;&#160;</a></span>power_cap() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double geopm::PowerBalancerImp::power_cap </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current power cap which cannot be exceeded without breaking contract that the average power budget across all compute nodes is maintained. </p>
<dl class="section return"><dt>Returns</dt><dd>The current value of the power cap. </dd></dl>

<p>Implements <a class="el" href="classgeopm_1_1_power_balancer.html#a58b198100093c8cd3563dc1114e149c1">geopm::PowerBalancer</a>.</p>

</div>
</div>
<a id="a98361888874560337cd58387e619cd0d" name="a98361888874560337cd58387e619cd0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98361888874560337cd58387e619cd0d">&#9670;&#160;</a></span>power_limit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double geopm::PowerBalancerImp::power_limit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the current power limit prescribed for this node. </p>
<dl class="section return"><dt>Returns</dt><dd>The current power limit in units of Watts. </dd></dl>

<p>Implements <a class="el" href="classgeopm_1_1_power_balancer.html#aaf84174bff51eddc5ab995ff6992b75d">geopm::PowerBalancer</a>.</p>

</div>
</div>
<a id="a8a7fe1a7b051170c0f534e67630b7fbb" name="a8a7fe1a7b051170c0f534e67630b7fbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a7fe1a7b051170c0f534e67630b7fbb">&#9670;&#160;</a></span>power_limit_adjusted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void geopm::PowerBalancerImp::power_limit_adjusted </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>limit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notify power balancer that a new limit has been set with the governor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">limit</td><td>limit that was set. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classgeopm_1_1_power_balancer.html#ab1241a9b3105bc51cc9a50f897cdb9d1">geopm::PowerBalancer</a>.</p>

</div>
</div>
<a id="aaee8ece95c8c020a2a7844e9f61c2b60" name="aaee8ece95c8c020a2a7844e9f61c2b60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaee8ece95c8c020a2a7844e9f61c2b60">&#9670;&#160;</a></span>power_slack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double geopm::PowerBalancerImp::power_slack </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Query the difference between the last power cap setting and the current power limit. If this method is called and it returns zero then the trial delta used to lower the power limit is reduced by a factor of two. </p>
<dl class="section return"><dt>Returns</dt><dd>The difference between the last power cap and the current power limit in units of Watts. </dd></dl>

<p>Implements <a class="el" href="classgeopm_1_1_power_balancer.html#a4dc53811113f4cb2c07c53859a09052b">geopm::PowerBalancer</a>.</p>

</div>
</div>
<a id="aeaeca591b7009d57d873eb2541ac7e08" name="aeaeca591b7009d57d873eb2541ac7e08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaeca591b7009d57d873eb2541ac7e08">&#9670;&#160;</a></span>runtime_sample()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double geopm::PowerBalancerImp::runtime_sample </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the expected execution time of an application epoch under the current power limit. </p>

<p>Implements <a class="el" href="classgeopm_1_1_power_balancer.html#a543328bb4f42dc573d9ca5cff470c4ea">geopm::PowerBalancer</a>.</p>

</div>
</div>
<a id="a0f3852a14b3525d3f4bcfbb61922578b" name="a0f3852a14b3525d3f4bcfbb61922578b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f3852a14b3525d3f4bcfbb61922578b">&#9670;&#160;</a></span>target_runtime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void geopm::PowerBalancerImp::target_runtime </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>largest_runtime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Set</td><td>the target runtime which is the largest epoch execution time measured by any compute node since the application began or the last global increase to the power budget. </td></tr>
    <tr><td class="paramname">largest_runtime</td><td>The largest expected runtime for one epoch across all compute nodes under the current power budget. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classgeopm_1_1_power_balancer.html#a7c23de5386f1d7be2c8d09d53f2c4e9d">geopm::PowerBalancer</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_power_balancer_imp_8hpp_source.html">PowerBalancerImp.hpp</a></li>
<li><a class="el" href="_power_balancer_8cpp.html">PowerBalancer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
