<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>geopmaccess(1) – Access management for the GEOPM Service &mdash; GEOPM  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="geopmadmin(1) – tool for GEOPM system administrators" href="geopmadmin.1.html" />
    <link rel="prev" title="geopm_pio_time(7) – Signals and controls for Time IO Group" href="geopm_pio_time.7.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            GEOPM
              <img src="https://geopm.github.io/images/geopm-logo-clear.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.1.1.dev26+gc950217c
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guides.html">User Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="contrib.html">Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="devel.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="reference.html">Reference Manual</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="reference.html#geopm-manual-pages">GEOPM Manual Pages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="geopm.7.html">geopm(7) – Global Extensible Open Power Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio.7.html">geopm_pio(7) – GEOPM PlatformIO interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_cnl.7.html">geopm_pio_cnl(7) – Signals and controls for Compute Node Linux Board-Level Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_const_config.7.html">geopm_pio_const_config(7) – Signals for ConstConfigIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_cpuinfo.7.html">geopm_pio_cpuinfo(7) – Signals and controls for the CPUInfoIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_dcgm.7.html">geopm_pio_dcgm(7) – IOGroup providing signals and controls for NVIDIA GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_levelzero.7.html">geopm_pio_levelzero(7) – IOGroup providing signals and controls for Intel GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_msr.7.html">geopm_pio_msr(7) – Signals and controls for Model Specific Registers (MSRs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_nvml.7.html">geopm_pio_nvml(7) – IOGroup providing signals and controls for NVIDIA GPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_profile.7.html">geopm_pio_profile(7) – Signals and controls for the ProfileIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_service.7.html">geopm_pio_service(7) – Signals and controls for the ServiceIOGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_sst.7.html">geopm_pio_sst(7) – Signals and controls for Intel Speed Select Technology</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_sysfs.7.html">geopm_pio_sysfs(7) – Signals and controls for sysfs attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio_time.7.html">geopm_pio_time(7) – Signals and controls for Time IO Group</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">geopmaccess(1) – Access management for the GEOPM Service</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exit-status">Exit Status</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="geopmadmin.1.html">geopmadmin(1) – tool for GEOPM system administrators</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmagent.1.html">geopmagent(1) – query agent information and create static policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmbench.1.html">geopmbench(1) – synthetic benchmark application</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmctl.1.html">geopmctl(1) – GEOPM runtime control application</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmendpoint.1.html">geopmendpoint(1) – command line tool for dynamic policy control</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmlaunch.1.html">geopmlaunch(1) – application launch wrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmread.1.html">geopmread(1) – query platform information</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmsession.1.html">geopmsession(1) – Command line interface for the GEOPM service batch read features</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmwrite.1.html">geopmwrite(1) – modify platform state</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmdpy.7.html">geopmdpy(7) – global extensible open power manager python daemon package</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopmpy.7.html">geopmpy(7) – global extensible open power manager python package</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent.3.html">geopm_agent(3) – query information about available agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_ctl.3.html">geopm_ctl(3) – GEOPM runtime control thread</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_daemon.3.html">geopm_daemon(3) – helpers for GEOPM daemons</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_endpoint.3.html">geopm_endpoint(3) – dynamic policy control for resource management</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_error.3.html">geopm_error(3) – error code descriptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_field.3.html">geopm_agent(3) – query information about available agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_fortran.3.html">geopm_fortran(3) – GEOPM fortran interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_hash.3.html">geopm_hash(3) – helper methods for encoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_imbalancer.3.html">geopm_imbalancer(3) – set artificial runtime imbalance</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_pio.3.html">geopm_pio(3) – interfaces to query and modify platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_policystore.3.html">geopm_policystore(3) – GEOPM resource policy store interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_prof.3.html">geopm_prof(3) – application profiling interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_sched.3.html">geopm_sched(3) – interface with Linux scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_time.3.html">geopm_time(3) – helper methods for time</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_topo.3.html">geopm_topo(3) – query platform component topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_version.3.html">geopm_version(3) – GEOPM library version</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AAgent.3.html">geopm::Agent(3) – GEOPM agent plugin interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AAgg.3.html">geopm::Agg(3) – data aggregation functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACNLIOGroup.3.html">geopm::CNLIOGroup(3) – IOGroup for interaction with Compute Node Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACPUActivityAgent.3.html">geopm::CPUActivityAgent(3) – agent for selecting CPU frequency based on CPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACircularBuffer.3.html">geopm::CircularBuffer(3) – generic circular buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AComm.3.html">geopm::Comm(3) – communication abstractions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ACpuinfoIOGroup.3.html">geopm::CpuinfoIOGroup(3) – IOGroup for CPU frequency limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ADaemon.3.html">geopm::Daemon(3) – GEOPM daemon helper methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AEndpoint.3.html">geopm::Endpoint(3) – GEOPM endpoint interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AException.3.html">geopm::Exception(3) – custom GEOPM exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AGPUActivityAgent.3.html">geopm::GPUActivityAgent(3) – agent for selecting GPU frequency based on GPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AHelper.3.html">geopm::Helper – common helper methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AIOGroup.3.html">geopm::IOGroup(3) – provides system values and settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMPIComm.3.html">geopm::MPIComm(3) – implementation of Comm using MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMSRIO.3.html">geopm::MSRIO(3) – methods for reading and writing MSRs</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMSRIOGroup.3.html">geopm::MSRIOGroup – IOGroup providing MSR-based signals and controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AMonitorAgent.3.html">geopm::MonitorAgent – agent that enforces no policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APlatformIO.3.html">geopm::PlatformIO(3) – GEOPM platform interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APlatformTopo.3.html">geopm::PlatformTopo(3) – platform topology information</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APluginFactory.3.html">geopm::PluginFactory(3) – abstract factory for plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerBalancer.3.html">geopm::PowerBalancer(3) – balances power according to epoch runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerBalancerAgent.3.html">geopm::PowerBalancerAgent(3) – agent optimizing performance under a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerGovernor.3.html">geopm::PowerGovernor(3) – enforces a power limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3APowerGovernorAgent.3.html">geopm::PowerGovernorAgent(3) – agent that enforces a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3AProfileIOGroup.3.html">geopm::ProfileIOGroup(3) – IOGroup providing application signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ASampleAggregator.3.html">geopm::SampleAggregator(3) – per-region aggregated signal data</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ASharedMemory.3.html">geopm::SharedMemory(3) – abstractions for shared memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm%3A%3ATimeIOGroup.3.html">geopm::TimeIOGroup(3) – IOGroup providing time signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_report.7.html">geopm_report(7) – GEOPM summary report file</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_cpu_activity.7.html">geopm_agent_cpu_activity(7) – agent for selecting CPU frequency based on CPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_ffnet.7.html">geopm_agent_ffnet(7) – agent for adjusting frequencies based on application behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_frequency_map.7.html">geopm_agent_frequency_map(7) – agent for running regions at user selected frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_gpu_activity.7.html">geopm_agent_gpu_activity(7) – agent for selecting GPU frequency based on GPU compute activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_monitor.7.html">geopm_agent_monitor(7) – agent implementation for aggregating statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_power_balancer.7.html">geopm_agent_power_balancer(7) – agent optimizes performance under a power cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="geopm_agent_power_governor.7.html">geopm_agent_power_governor(7) – agent enforces a power cap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#doxygen-pages">Doxygen Pages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Releases</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GEOPM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="reference.html">Reference Manual</a></li>
      <li class="breadcrumb-item active">geopmaccess(1) – Access management for the GEOPM Service</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/geopmaccess.1.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="geopmaccess-1-access-management-for-the-geopm-service">
<h1>geopmaccess(1) – Access management for the GEOPM Service<a class="headerlink" href="#geopmaccess-1-access-management-for-the-geopm-service" title="Link to this heading"></a></h1>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Link to this heading"></a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geopmaccess [-h] [-v] [-c] [-u | -g GROUP | -a | -l | -s] [-w | -e | -D] [-n | -F] [-x]
</pre></div>
</div>
<p>Access management for the GEOPM Service. Command line tool for reading and
writing the access management lists for the GEOPM Service signals and controls.</p>
<section id="read-access-list">
<h3>Read Access List<a class="headerlink" href="#read-access-list" title="Link to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geopmaccess [-c] [-u | -g GROUP | -a | -l]
</pre></div>
</div>
</section>
<section id="write-access-list">
<h3>Write Access List<a class="headerlink" href="#write-access-list" title="Link to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geopmaccess -w [-c] [-g GROUP] [-n | -f]
</pre></div>
</div>
</section>
<section id="edit-access-list">
<h3>Edit Access List<a class="headerlink" href="#edit-access-list" title="Link to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geopmaccess -e [-c] [-g GROUP]
</pre></div>
</div>
</section>
<section id="remove-access-list">
<h3>Remove Access List<a class="headerlink" href="#remove-access-list" title="Link to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geopmaccess -D [-c] [-g GROUP]
</pre></div>
</div>
</section>
<section id="get-help-or-version">
<h3>Get Help or Version<a class="headerlink" href="#get-help-or-version" title="Link to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geopmaccess -h | -v
</pre></div>
</div>
</section>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading"></a></h2>
<p>The GEOPM service uses the <code class="docutils literal notranslate"><span class="pre">/etc/geopm</span></code> directory to store files that control
which signals and controls may be accessed by a user through the service.  The
purpose of the <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code> command line tool is to enable reading and
writing of these access list files.</p>
<section id="options">
<h3>Options<a class="headerlink" href="#options" title="Link to this heading"></a></h3>
<dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p id="help-option">Print help message and exit</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--version</span></kbd></dt>
<dd><p id="version-option">Print version and exit</p>
</dd>
<dt><kbd><span class="option">-c</span>, <span class="option">--controls</span></kbd></dt>
<dd><p id="controls-option">Command applies to controls not signals</p>
</dd>
<dt><kbd><span class="option">-u</span>, <span class="option">--default</span></kbd></dt>
<dd><p id="default-option">Print the default user access list</p>
</dd>
<dt><kbd><span class="option">-g <var>GROUP</var></span>, <span class="option">--group <var>GROUP</var></span></kbd></dt>
<dd><p id="group-option">Read or write the access list for a specific Unix GROUP</p>
</dd>
<dt><kbd><span class="option">-a</span>, <span class="option">--all</span></kbd></dt>
<dd><p id="all-option">Print all signals or controls supported by the service system</p>
</dd>
<dt><kbd><span class="option">-l</span>, <span class="option">--log</span></kbd></dt>
<dd><p id="log-option">Print list of used signals or controls used since last restart of the
service</p>
</dd>
<dt><kbd><span class="option">-s</span>, <span class="option">--msr-safe</span></kbd></dt>
<dd><p id="msr-safe-option">Generate an allowlist for msr-safe</p>
</dd>
<dt><kbd><span class="option">-w</span>, <span class="option">--write</span></kbd></dt>
<dd><p id="write-option">Use standard input to write an access list. Implies -u unless -g is
provided.</p>
</dd>
<dt><kbd><span class="option">-e</span>, <span class="option">--edit</span></kbd></dt>
<dd><p id="edit-option">Edit an access list using EDITOR environment variable, default vi</p>
</dd>
<dt><kbd><span class="option">-D</span>, <span class="option">--delete</span></kbd></dt>
<dd><p id="delete-option">Remove an access list for default user or a particular Unix Group</p>
</dd>
<dt><kbd><span class="option">-n</span>, <span class="option">--dry-run</span></kbd></dt>
<dd><p id="dry-run-option">Do error checking on all user input, but do not modify configuration files</p>
</dd>
<dt><kbd><span class="option">-F</span>, <span class="option">--force</span></kbd></dt>
<dd><p id="force-option">Write access list without validating GEOPM Service support for names</p>
</dd>
<dt><kbd><span class="option">-x</span>, <span class="option">--direct</span></kbd></dt>
<dd><p id="direct-option">Write directly to files, do not use DBus</p>
</dd>
</dl>
</section>
<section id="query-access">
<h3>Query Access<a class="headerlink" href="#query-access" title="Link to this heading"></a></h3>
<p>The default behavior of <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code> when no options are provided
is to print the list of signals that the calling user has permissions
to read through the GEOPM Service. This command is used by a GEOPM
service client to discover which signals they have permission to read
based on the configuration set by the system administrator.  All
supported signals or controls are printed when called by a root user.</p>
<p>All <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code> commands refer to reading or writing signal access
lists by default.  To specify that the command should instead refer to
the access lists for controls, the <code class="docutils literal notranslate"><span class="pre">-c</span></code> / <code class="docutils literal notranslate"><span class="pre">--controls</span></code> option must
be provided.  For example, when the <code class="docutils literal notranslate"><span class="pre">-c</span></code> option is provided without
any other options, the list of controls that may be configured by the
calling user is printed.</p>
<p>By convention, all control settings can be read by requesting the
signal that shares the same name as the control.  Note that when
adding a control name to the access list for writing, the
administrator is implicitly providing read access to the control
setting as well.</p>
<p>All users of the system will have access to the signals and controls
determined by the “default access list.”  The default access list may
be read by specifying the <code class="docutils literal notranslate"><span class="pre">-u</span></code> / <code class="docutils literal notranslate"><span class="pre">--user</span></code> option.  These
permissions are extended for each user based on Unix user group
membership.  Each Unix group on the system may have GEOPM Service
signal and control access lists associated with it.  To read or write
the access list for a particular Unix user group, the <code class="docutils literal notranslate"><span class="pre">-g</span></code> or
<code class="docutils literal notranslate"><span class="pre">--group</span></code> option must be specified.</p>
</section>
<section id="access-management">
<h3>Access Management<a class="headerlink" href="#access-management" title="Link to this heading"></a></h3>
<p>Reading access lists may be done by an unprivileged client or by the
system administrator, but only a process with the Linux
<a class="reference external" href="https://man7.org/linux/man-pages/man7/capabilities.7.html">capabilities(7)</a>
<code class="docutils literal notranslate"><span class="pre">CAP_SYS_ADMIN</span></code> has permission to write or delete an access list.
Typically is done by the root user or with the <code class="docutils literal notranslate"><span class="pre">sudo</span></code> command.  The
administrator may execute <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code> to write to an access list
by providing the <code class="docutils literal notranslate"><span class="pre">-w</span></code> / <code class="docutils literal notranslate"><span class="pre">--write</span></code> command line option.  The <code class="docutils literal notranslate"><span class="pre">-D</span></code>
/ <code class="docutils literal notranslate"><span class="pre">--delete</span></code> option will remove all signals or controls from the
configuration.  An access list can be modified in a text editor when
the <code class="docutils literal notranslate"><span class="pre">-e</span></code> / <code class="docutils literal notranslate"><span class="pre">--edit</span></code> option is provided.</p>
<p>When writing an access list with the <code class="docutils literal notranslate"><span class="pre">-w</span></code> / <code class="docutils literal notranslate"><span class="pre">--write</span></code> command line
option, the list of names is provided to standard input.  Typically,
this is piped in from an existing file.  When the <code class="docutils literal notranslate"><span class="pre">-e</span></code> / <code class="docutils literal notranslate"><span class="pre">--edit</span></code>
option is provided, the existing access list is opened in an editor
for modification.  The default editor is <code class="docutils literal notranslate"><span class="pre">vi</span></code> but the user may
override this with the <code class="docutils literal notranslate"><span class="pre">EDITOR</span></code> environment variable.</p>
<p>The access list created is derived from standard input or the edited
file by reading one name per line.  Standard input lines that begin
with the <code class="docutils literal notranslate"><span class="pre">#</span></code> character are ignored, and an empty line or <code class="docutils literal notranslate"><span class="pre">EOF</span></code>
<em>(end of file)</em> will cause parsing of standard input to stop.</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">-a</span></code> / <code class="docutils literal notranslate"><span class="pre">--all</span></code> options are not valid when writing,
editing, or deleting an access list.  The default access list will be
written or deleted if the <code class="docutils literal notranslate"><span class="pre">-g</span></code> / <code class="docutils literal notranslate"><span class="pre">--group</span></code> option is not
specified.  This differs from the default behavior when reading an
access list: the default behavior when writing equivalent to the
<code class="docutils literal notranslate"><span class="pre">-u</span></code> / <code class="docutils literal notranslate"><span class="pre">--default</span></code> option when reading.</p>
</section>
<section id="shared-file-systems">
<h3>Shared File Systems<a class="headerlink" href="#shared-file-systems" title="Link to this heading"></a></h3>
<p>There are use cases where the <code class="docutils literal notranslate"><span class="pre">/etc/geopm</span></code> directory must be
configured on a system where the signals and controls available at
configuration-time do not match what is available at run-time.  This
is particularly common when the <code class="docutils literal notranslate"><span class="pre">/etc/geopm</span></code> directory is
located on a shared file system to support distributed servers.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-n</span></code> / <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code> option may be specified to check the
validity of a configuration at run-time without modifying files in the
<code class="docutils literal notranslate"><span class="pre">/etc</span></code> directory.  This option will check the names provided
to standard input, however no files are opened for writing.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-F</span></code> / <code class="docutils literal notranslate"><span class="pre">--force</span></code> option enables the creation of access
lists in <code class="docutils literal notranslate"><span class="pre">/etc/geopm</span></code> without checking that the names in the
access list correspond to signals or controls supported by the active
GEOPM Service.  This enables the creation of the configuration file on
a system where the GEOPM Service does not support some signals or
controls.</p>
<p>Note that having signal or control names in an access list in
<code class="docutils literal notranslate"><span class="pre">/etc/geopm</span></code> which are not valid on a particular system is
not an error.  This enables access list files to be mounted on
multiple systems which may have non-overlapping support.</p>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<p>Some examples of how to use the <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code> command line tool are
provided.</p>
<section id="reading-the-access-lists">
<h3>Reading the Access Lists<a class="headerlink" href="#reading-the-access-lists" title="Link to this heading"></a></h3>
<p>The signals and controls provided by the GEOPM Service depend on which
Linux features are available, i.e. which device drivers are loaded, how
they are configured, and what hardware is installed.  The service may
be extended with IOGroup plugins which may augment the signals and
controls available through the service.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code> commandline tool can be used to discover which
signals and controls are provided by the GEOPM Service on your system.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># PRINT ALLOWED SIGNALS FOR CALLING USER</span>
geopmaccess

<span class="c1"># PRINT ALLOWED CONTROLS FOR CALLING USER</span>
geopmaccess<span class="w"> </span>--controls

<span class="c1"># PRINT ALL SIGNALS PROVIDED</span>
geopmaccess<span class="w"> </span>--all

<span class="c1"># PRINT ALL CONTROLS PROVIDED</span>
geopmaccess<span class="w"> </span>--all<span class="w"> </span>--controls

<span class="c1"># PRINT DEFAULT SIGNAL ACCESS LIST</span>
geopmaccess<span class="w"> </span>--default

<span class="c1"># PRINT DEFAULT CONTROL ACCESS LIST</span>
geopmaccess<span class="w"> </span>--default<span class="w"> </span>--controls

<span class="c1"># PRINT SIGNAL ACCESS FOR UNIX GROUP &quot;power&quot;</span>
geopmaccess<span class="w"> </span>--group<span class="w"> </span>power

<span class="c1"># PRINT CONTROL ACCESS FOR UNIX GROUP &quot;power&quot;</span>
geopmaccess<span class="w"> </span>--controls<span class="w"> </span>--group<span class="w"> </span>power
</pre></div>
</div>
</section>
<section id="enabling-user-access">
<h3>Enabling User Access<a class="headerlink" href="#enabling-user-access" title="Link to this heading"></a></h3>
<p>This example configures the GEOPM Service to enable any user to read
and write to bits 8-15 of the MSR_PERF_CTL register which controls the
maximum frequency of the core.  This could also be accomplished
interactively using the <code class="docutils literal notranslate"><span class="pre">-e</span></code> / <code class="docutils literal notranslate"><span class="pre">--edit</span></code> option.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># NAME OF CONTROL</span>
<span class="nv">CONTROL</span><span class="o">=</span>MSR::PERF_CTL:FREQ

<span class="c1"># CREATE TEMPORARY FILES</span>
<span class="nv">ACCESS_SIGNALS</span><span class="o">=</span><span class="k">$(</span>mktemp<span class="k">)</span>
<span class="nv">ACCESS_CONTROLS</span><span class="o">=</span><span class="k">$(</span>mktemp<span class="k">)</span>

<span class="c1"># SAVE INITIAL ACCESS SETTINGS</span>
geopmaccess<span class="w"> </span>&gt;<span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>
geopmaccess<span class="w"> </span>--controls<span class="w"> </span>&gt;<span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_CONTROLS</span><span class="si">}</span>

<span class="c1"># ADD THE CONTROL INTO ACCESS LIST FOR READING AND WRITING</span>
<span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">CONTROL</span><span class="si">}</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>
<span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">CONTROL</span><span class="si">}</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_CONTROLS</span><span class="si">}</span>
geopmaccess<span class="w"> </span>--write<span class="w"> </span>&lt;<span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>
geopmaccess<span class="w"> </span>--write<span class="w"> </span>--controls<span class="w"> </span>&lt;<span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_CONTROLS</span><span class="si">}</span>

<span class="c1"># CLEAN UP TEMPORARY FILES</span>
rm<span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_CONTROLS</span><span class="si">}</span>
</pre></div>
</div>
</section>
<section id="enabling-group-access">
<h3>Enabling Group Access<a class="headerlink" href="#enabling-group-access" title="Link to this heading"></a></h3>
<p>As an administrator you may want to enable access to a signal or
control for a subset of your users.  This can be accomplished by
creating a Unix user group containing the users that should be
provided this privilege.  This mechanism may also be used to extend
permissions for one particular user if the user-name-specific group is
provided.  This can also be accomplished interactively using the
<code class="docutils literal notranslate"><span class="pre">-e</span></code> / <code class="docutils literal notranslate"><span class="pre">--edit</span></code> option.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># NAME OF SIGNAL</span>
<span class="nv">SIGNAL</span><span class="o">=</span>CPU_INSTRUCTIONS_RETIRED

<span class="c1"># NAME OF UNIX GROUP</span>
<span class="nv">GROUP_NAME</span><span class="o">=</span>perf

<span class="c1"># CREATE A TEMPORARY FILE</span>
<span class="nv">ACCESS_SIGNALS</span><span class="o">=</span><span class="k">$(</span>mktemp<span class="k">)</span>

<span class="c1"># SAVE INITIAL ACCESS SETTINGS</span>
geopmaccess<span class="w"> </span>--group<span class="w"> </span><span class="si">${</span><span class="nv">GROUP_NAME</span><span class="si">}</span><span class="w"> </span>&gt;<span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>

<span class="c1"># ADD THE SIGNAL INTO ACCESS LIST FOR READING</span>
<span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">SIGNAL</span><span class="si">}</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>
geopmaccess<span class="w"> </span>--group<span class="w"> </span><span class="si">${</span><span class="nv">GROUP_NAME</span><span class="si">}</span><span class="w"> </span>--write<span class="w"> </span>&lt;<span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>

<span class="c1"># CLEAN UP TEMPORARY FILE</span>
rm<span class="w"> </span><span class="si">${</span><span class="nv">ACCESS_SIGNALS</span><span class="si">}</span>
</pre></div>
</div>
<p>Another example of using group permissions is to create a Unix group
called “geopm” that is granted access to all signals and controls that
are enabled on the system.  Users that should be granted full use of
the service can then be added to the <em>geopm</em> Unix group.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># NAME OF UNIX GROUP</span>
<span class="nv">GROUP_NAME</span><span class="o">=</span>geopm

<span class="c1"># CREATE &quot;geopm&quot; GROUP</span>
groupadd<span class="w"> </span><span class="si">${</span><span class="nv">GROUP_NAME</span><span class="si">}</span>

<span class="c1"># ENABLE GROUP TO READ ALL AVAILABLE SIGNALS</span>
geopmaccess<span class="w"> </span>-a<span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmaccess<span class="w"> </span>-g<span class="w"> </span><span class="si">${</span><span class="nv">GROUP_NAME</span><span class="si">}</span><span class="w"> </span>-w

<span class="c1"># ENABLE GROUP TO WRITE ALL AVAILABLE CONTROLS</span>
geopmaccess<span class="w"> </span>-a<span class="w"> </span>-c<span class="w"> </span><span class="p">|</span><span class="w"> </span>geopmaccess<span class="w"> </span>-g<span class="w"> </span><span class="si">${</span><span class="nv">GROUP_NAME</span><span class="si">}</span><span class="w"> </span>-w<span class="w"> </span>-c
</pre></div>
</div>
</section>
<section id="supporting-heterogeneous-clusters">
<h3>Supporting Heterogeneous Clusters<a class="headerlink" href="#supporting-heterogeneous-clusters" title="Link to this heading"></a></h3>
<p>This example demonstrates how to create and check access lists when
the <code class="docutils literal notranslate"><span class="pre">/etc/geopm</span></code> directory must be modified on a system with
incomplete support for signals and controls.</p>
<p>In this example, the access lists created contain all signals and
controls supported by two different systems.  Similar steps would be
followed if the input lists were derived in a different way.  This
example also shows how to validate access lists on multiple systems
and combine access lists when writing to a shared mount point.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Log onto one of the systems</span>
ssh<span class="w"> </span>system1

<span class="c1"># Create a lists of signals and controls on shared mount</span>
geopmaccess<span class="w"> </span>--all<span class="w"> </span>&gt;<span class="w"> </span>system1-signals.txt
geopmaccess<span class="w"> </span>--all<span class="w"> </span>--controls<span class="w"> </span>&gt;<span class="w"> </span>system1-controls.txt

<span class="c1"># Check validity of created lists</span>
geopmaccess<span class="w"> </span>--write<span class="w"> </span>--dry-run<span class="w"> </span>&lt;<span class="w"> </span>system1-signals.txt
geopmaccess<span class="w"> </span>--write<span class="w"> </span>--controls<span class="w"> </span>--dry-run<span class="w"> </span>&lt;<span class="w"> </span>system1-controls.txt

<span class="c1"># Log onto a system with non-overlapping support</span>
ssh<span class="w"> </span>system2

<span class="c1"># Create lists of signals and controls on shared mount</span>
geopmaccess<span class="w"> </span>--all<span class="w"> </span>&gt;<span class="w"> </span>system2-signals.txt
geopmaccess<span class="w"> </span>--all<span class="w"> </span>--controls<span class="w"> </span>&gt;<span class="w"> </span>system2-controls.txt

<span class="c1"># Check validity of created lists</span>
geopmaccess<span class="w"> </span>--write<span class="w"> </span>--dry-run<span class="w"> </span>&lt;<span class="w"> </span>system2-signals.txt
geopmaccess<span class="w"> </span>--write<span class="w"> </span>--controls<span class="w"> </span>--dry-run<span class="w"> </span>&lt;<span class="w"> </span>system2-controls.txt

<span class="c1"># Log onto node where /etc/geopm is writable</span>
ssh<span class="w"> </span>admin-system

<span class="c1"># Combine the created lists, duplicates are okay</span>
cat<span class="w"> </span>system1-signals.txt<span class="w"> </span>system2-signals.txt<span class="w"> </span>&gt;<span class="w"> </span>all-signals.txt
cat<span class="w"> </span>system1-controls.txt<span class="w"> </span>system2-controls.txt<span class="w"> </span>&gt;<span class="w"> </span>all-controls.txt

<span class="c1"># Modify configuration without checking names</span>
sudo<span class="w"> </span>geopmaccess<span class="w"> </span>--write<span class="w"> </span>--force<span class="w"> </span>&lt;<span class="w"> </span>all-signals.txt
sudo<span class="w"> </span>geopmaccess<span class="w"> </span>--write<span class="w"> </span>--controls<span class="w"> </span>--force<span class="w"> </span>&lt;<span class="w"> </span>all-controls.txt
</pre></div>
</div>
</section>
<section id="configuring-msr-safe">
<h3>Configuring msr-safe<a class="headerlink" href="#configuring-msr-safe" title="Link to this heading"></a></h3>
<p>In order for the GEOPM service to be able to leverage the msr-safe
kernel driver for fast MSR access, an allowlist must be put in place.
Without the allowlist, msr-safe will not provide access to MSRs even
for privileged users.  For more information see: <a class="reference internal" href="requires.html#the-msr-driver"><span class="std std-ref">The MSR Driver</span></a>.</p>
<p>The following example demonstrates the necessary commands to set the
msr-safe allowlist using <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that if the <code class="docutils literal notranslate"><span class="pre">msr</span></code> driver is already loaded (via inspection
with <code class="docutils literal notranslate"><span class="pre">lsmod</span></code>) then steps 1 and 4 below can be skipped.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the following with root or sudo:</span>
<span class="m">1</span>.<span class="w"> </span>modprobe<span class="w"> </span>msr
<span class="m">2</span>.<span class="w"> </span>geopmaccess<span class="w"> </span>-s<span class="w"> </span>&gt;<span class="w"> </span>allowlist.txt
<span class="m">3</span>.<span class="w"> </span>cat<span class="w"> </span>allowlist.txt<span class="w"> </span>&gt;<span class="w"> </span>/dev/cpu/msr_allowlist
<span class="m">4</span>.<span class="w"> </span>rmmod<span class="w"> </span>msr
</pre></div>
</div>
<p>If you have installed msr-safe via RPM, it is likely you have the
msr-safe.service running via systemd that will try to set the
allowlist on service start.  In order to have msr-safe.service use the
allowlist you have just created, you must create or modify the
msr-safe entry in sysconfig to set the <code class="docutils literal notranslate"><span class="pre">ALLOWLIST</span></code> environment
variable.</p>
<p>First, place <code class="docutils literal notranslate"><span class="pre">allowlist.txt</span></code> under the default path for allowlists
from the RPM install: <code class="docutils literal notranslate"><span class="pre">/usr/share/msr-safe/allowlists</span></code>.  Next,
create <code class="docutils literal notranslate"><span class="pre">/etc/sysconfig/msr-safe</span></code> with the following contents:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">ALLOWLIST</span><span class="o">=</span>&lt;PATH_TO_ALLOWLIST_IN_USR_SHARE&gt;
</pre></div>
</div>
<p>Afterward, use <code class="docutils literal notranslate"><span class="pre">systemctl</span> <span class="pre">restart</span> <span class="pre">msr-safe</span></code> to restart that
service and the manually verify that the allowlist was set properly.
This can be done by issuing <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">/dev/cpu/msr-allowlist</span></code> and
comparing the entries against <code class="docutils literal notranslate"><span class="pre">allowlist.txt</span></code>.</p>
<p>More information:
<a class="reference external" href="https://github.com/LLNL/msr-safe/blob/main/rpm/msr-safe.service">msr-safe.service</a>
<a class="reference external" href="https://github.com/LLNL/msr-safe/blob/main/rpm/msr-safe.sh">msr-safe.sh</a></p>
</section>
</section>
<section id="exit-status">
<h2>Exit Status<a class="headerlink" href="#exit-status" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code> command will return 0 upon success and -1 on
failure.  For all failures, an error message describing the failure
will be printed.  Setting the <code class="docutils literal notranslate"><span class="pre">GEOPM_DEBUG</span></code> environment variable
will enable more verbose error messages.</p>
<p>Use of the <code class="docutils literal notranslate"><span class="pre">geopmaccess</span></code> command line tool requires the GEOPM
Service systemd unit to be active.  This can be checked with the
command <code class="docutils literal notranslate"><span class="pre">systemctl</span> <span class="pre">status</span> <span class="pre">geopm</span></code>.  A failure will occur if the GEOPM
Service is not active.</p>
<p>Modification of access lists is typically is done by the root user or
with the <code class="docutils literal notranslate"><span class="pre">sudo</span></code> command.  A process is required to have the Linux
<a class="reference external" href="https://man7.org/linux/man-pages/man7/capabilities.7.html">capabilities(7)</a>
<code class="docutils literal notranslate"><span class="pre">CAP_SYS_ADMIN</span></code> in order to modify any access lists, and a failure
will occur otherwise.</p>
<p>Some command line options cannot be used together, for example, a
failure will occur if the user specifies both <code class="docutils literal notranslate"><span class="pre">--all</span></code> and
<code class="docutils literal notranslate"><span class="pre">--write</span></code>.</p>
<p>Attempts to set configurations using unsupported names will fail
unless the <code class="docutils literal notranslate"><span class="pre">-F</span></code> / <code class="docutils literal notranslate"><span class="pre">--force</span></code> option is provided.</p>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="geopm.7.html"><span class="doc">geopm(7)</span></a>,
<a class="reference internal" href="geopmread.1.html"><span class="doc">geopmread(1)</span></a>,
<a class="reference internal" href="geopmwrite.1.html"><span class="doc">geopmwrite(1)</span></a>,
<a class="reference internal" href="geopmsession.1.html"><span class="doc">geopmsession(1)</span></a>,
<a class="reference internal" href="geopm_pio.7.html"><span class="doc">geopm_pio(7)</span></a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="geopm_pio_time.7.html" class="btn btn-neutral float-left" title="geopm_pio_time(7) – Signals and controls for Time IO Group" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="geopmadmin.1.html" class="btn btn-neutral float-right" title="geopmadmin(1) – tool for GEOPM system administrators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015 - 2024 Intel Corporation. All rights reserved..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>